"use strict";(self.webpackChunkbot=self.webpackChunkbot||[]).push([["552"],{25282:function(e,t,n){n.r(t),n.d(t,{default:()=>h});var r=n("85893"),o=n("67294"),i=n("67026"),a=n("92198"),c=n("89250"),s=n("88199"),u=n("74748"),l=n("2502"),d=n("66499"),f=n("66175"),p=n("33996");let y=e=>{let{children:t}=e,n=localStorage.getItem("theme")??"light",{ui:i}=(0,p.oR)()??{ui:{setDevice:()=>{}}},{setDevice:a}=i,{isDesktop:c,isMobile:s,isTablet:u}=(0,l.F)();return(0,o.useEffect)(()=>{let e=document.querySelector("body");e&&("light"===n?(e.classList.remove("theme--dark"),e.classList.add("theme--light")):(e.classList.remove("theme--light"),e.classList.add("theme--dark")))},[n]),(0,o.useEffect)(()=>{s?a("mobile"):u?a("tablet"):a("desktop")},[c,s,u,a]),(0,r.jsx)("div",{className:"main-body",children:t})},h=()=>{var e;let t;let{isDesktop:n}=(0,l.F)(),p="/callback"===window.location.pathname,h="true"===a.Z.get("logged_state"),m=window.location.pathname.includes("endpoint"),w=JSON.parse(localStorage.getItem("clientAccounts")??"{}"),b=new URLSearchParams(window.location.search),g=b.get("account")??"",v=JSON.parse(localStorage.getItem("accountsList")??"{}"),_=Object.keys(v).length>0,j=Object.values(w).some(e=>e.currency===g)||"demo"===g||""===g,[S,L]=(0,o.useState)(j);(0,o.useEffect)(()=>(window.setClientHasCurrency=L,()=>{delete window.setClientHasCurrency}),[]);let O=[...f.g$d,...f.bs3],x=null===(e=b.get("account")??"")||void 0===e?void 0:e.toUpperCase(),k=O.includes(x),E=[],C=e=>{let{data:n}=e;if("authorize"===n.msg_type){var r;let e=((null==n?void 0:null===(r=n.authorize)||void 0===r?void 0:r.account_list)||[]).filter(e=>0===e.is_disabled);E.push(e||[]);let o=new Set(Object.values(w).map(e=>e.currency)),i=E.flat(),a="",c=i.some(e=>o.has(e.currency)?(e.currency,!1):(console.log("Missing currency:",e.currency),sessionStorage.setItem("query_param_currency",e.currency),!0)),s=!1,u="";for(let t of e)if(t.loginid&&!v[t.loginid]){s=!0,(u=t.currency||"")&&sessionStorage.setItem("query_param_currency",u);break}if(c||s)L(!1);else{let t=(null==e?void 0:e.find(e=>e.currency===g))||(null==e?void 0:e[0]),n=sessionStorage.getItem("query_param_currency")||(null==t?void 0:t.currency)||"USD";n=`account=${n}`,L(!0),!new URLSearchParams(window.location.search).has("account")&&window.history.pushState({},"",`${window.location.pathname}?${n}`),L(!0)}t&&(null==t||t.unsubscribe())}};return(0,o.useEffect)(()=>{k&&s.api_base.api&&g&&O.includes(g.toUpperCase())&&(t=s.api_base.api.onMessage().subscribe(C))},[]),(0,o.useEffect)(()=>{g&&sessionStorage.setItem("query_param_currency",g);let e=!m&&!p&&!S;if((0,d.p)()&&h&&!_&&!m&&!p||e){let e=sessionStorage.getItem("query_param_currency")||g||"USD";e&&sessionStorage.setItem("query_param_currency",e);try{(0,u.P6)({redirectCallbackUri:`${window.location.origin}/callback`,...e?{state:{account:e}}:{}}).catch(e=>{console.error(e)})}catch(e){console.error(e)}}},[h,_,m,p,S]),(0,r.jsx)("div",{className:(0,i.Z)("layout",{responsive:n}),children:(0,r.jsx)(y,{children:(0,r.jsx)(c.j3,{})})})}},69174:function(e,t,n){n.d(t,{a:function(){return i},c:function(){return r},g:function(){return o}});var r="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}},2502:function(e,t,n){n.d(t,{F:function(){return o}});var r=n(79166);let o=()=>{let e=(0,r.u)("(min-width: 1280px)"),t=(0,r.u)("(max-width: 600px)"),n=(0,r.u)("(min-width: 601px) and (max-width: 1279px)"),o=(0,r.u)("(min-width: 601px) and (max-width: 1279px) and (orientation: portrait)");return{isDesktop:e,isMobile:t,isTablet:n,isTabletPortrait:o,isMobileOrTabletLandscape:(0,r.u)("(max-width: 1279px) and (orientation: landscape)")}}},79166:function(e,t,n){n.d(t,{a:function(){return l},u:function(){return u}});var r=n(67294),o=n(69174),i="object"==typeof o.c&&o.c&&o.c.Object===Object&&o.c,a="object"==typeof self&&self&&self.Object===Object&&self;i||a||Function("return this")();var c="u">typeof window?r.useLayoutEffect:r.useEffect,s=typeof window>"u";function u(e,{defaultValue:t=!1,initializeWithValue:n=!0}={}){let o=e=>s?t:window.matchMedia(e).matches,[i,a]=(0,r.useState)(()=>n?o(e):t);function l(){a(o(e))}return c(()=>{let t=window.matchMedia(e);return l(),t.addListener?t.addListener(l):t.addEventListener("change",l),()=>{t.removeListener?t.removeListener(l):t.removeEventListener("change",l)}},[e]),i}function l(e,t,n="mousedown",o={}){!function(e,t,n,o){let i=(0,r.useRef)(t);c(()=>{i.current=t},[t]),(0,r.useEffect)(()=>{let t=window;if(!(t&&t.addEventListener))return;let n=e=>{i.current(e)};return t.addEventListener(e,n,o),()=>{t.removeEventListener(e,n,o)}},[e,n,o])}(n,n=>{let r=n.target;r&&r.isConnected&&(Array.isArray(e)?e.filter(e=>!!e.current).every(e=>e.current&&!e.current.contains(r)):e.current&&!e.current.contains(r))&&t(n)},void 0,o)}},67026:function(e,t,n){n.d(t,{Z:function(){return r}});let r=function(){for(var e,t,n=0,r="",o=arguments.length;n<o;n++)(e=arguments[n])&&(t=function e(t){var n,r,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(n=0;n<i;n++)t[n]&&(r=e(t[n]))&&(o&&(o+=" "),o+=r)}else for(r in t)t[r]&&(o&&(o+=" "),o+=r)}return o}(e))&&(r&&(r+=" "),r+=t);return r}}}]);