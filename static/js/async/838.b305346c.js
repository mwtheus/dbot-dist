"use strict";(self.webpackChunkbot=self.webpackChunkbot||[]).push([["838"],{56803:function(){},5637:function(e,t,a){a.r(t),a.d(t,{default:()=>iC});var s,n,l=a("85893"),i=a("67294"),r=a("96877"),o=a("30453"),d=a("33281");let c=e=>{let{children:t}=e,{isSingleLoggingIn:a}=(0,o.q)();return a?(0,l.jsx)(d.a,{isFullScreen:!0}):(0,l.jsx)(l.Fragment,{children:t})};var _=a("97613"),u=a("66175"),x=a("79907"),m=a("79649"),h=a("33996");let p=()=>{let{client:e}=(0,h.oR)(),{account_settings:t,landing_company_shortcode:a}=e,{tnc_status:s}=t||{};return s&&0===s[a]};var j=a("12977"),v=a("35275"),b=a("72461"),y=a("48059"),g=a("2502"),f=a("31784");let N=(0,r.Pi)(()=>{let{isAuthorized:e}=(0,m.T)(),{client:t}=(0,h.oR)(),{is_cr_account:a}=t,[s,n]=i.useState(!1),{isDesktop:r}=(0,g.F)(),o=p();i.useEffect(()=>{o?n(!0):n(!1)},[o]);let d=async()=>{e&&(await x.D.api.send({tnc_approval:1}),t.landing_company_shortcode&&t.updateTncStatus(t.landing_company_shortcode,1),n(!1))};return(0,l.jsx)(f.Z,{className:"tnc-status-update-modal-wrapper",is_open:s,has_close_icon:!1,width:"44rem",children:(0,l.jsxs)("div",{className:"tnc-status-update-modal",children:[(0,l.jsx)(j.x,{size:r?"sm":"md",bold:!0,children:(0,l.jsx)(y.Xx,{i18n_default_text:"Updated T&C's"})}),(0,l.jsxs)("div",{className:"tnc-status-update-modal__text-container",children:[(0,l.jsx)(j.x,{size:r?"sm":"md",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Please review our updated <0>terms and conditions</0>.",components:[(0,l.jsx)(v.r,{className:"tnc-link",size:r?"sm":"md",href:a?"https://deriv.com/eu/terms-and-conditions#clients":"https://deriv.com/terms-and-conditions#clients"},0)]})}),(0,l.jsx)(j.x,{size:r?"sm":"md",children:(0,l.jsx)(y.Xx,{i18n_default_text:"By continuing you understand and accept the changes."})})]}),(0,l.jsx)("div",{className:"tnc-status-update-modal__button",children:(0,l.jsx)(b.zx,{onClick:d,size:"md",variant:"primary",label:(0,l.jsx)(y.Xx,{i18n_default_text:"Continue"})})})]})})});var C=a("20296"),k=a.n(C),w=a("76298");var T=((s={}).MOVE="move",s.TOP="top",s.RIGHT="right",s.BOTTOM="bottom",s.LEFT="left",s.TOP_RIGHT="top-right",s.BOTTOM_RIGHT="bottom-right",s.BOTTOM_LEFT="bottom-left",s.TOP_LEFT="top-left",s.BODY_REF="body",s);let E=e=>{let{setZIndex:t}=e,a=document.getElementsByClassName("draggable");if(!a.length)return;let s=Array.from(a).reduce((e,t)=>Math.max(e,parseInt(window.getComputedStyle(t).zIndex)||0),0);t(s+3)},S=e=>{let{prevWidth:t,leftOffset:a,boundaryRect:s,initialSelfRight:n,resize_direction:l,newWidth:i,minWidth:r,clientX:o,self:d}=e,c=(null==s?void 0:s.left)??0,_=(null==s?void 0:s.width)??0,u=c+a+5,x=(null==d?void 0:d.left)??0,m=c+_-7;if(l.includes("left"))return i>=r&&o>u?i:o<u+10?m-u-(m-n)-10:t;if(l.includes("right")){if(i>=r&&o<m)return i;if(o>m)return m-x}return t},A=e=>{let{prevHeight:t,topOffset:a,boundaryRect:s,initialSelfBottom:n,resize_direction:l,newHeight:i,minHeight:r,clientY:o,self:d}=e,c=(null==s?void 0:s.top)??0,_=(null==s?void 0:s.height)??0,u=c+a+5,x=(null==d?void 0:d.top)??0,m=c+_-7;if(l.includes("top"))return i>=r&&o>u?i:o<u+10?m-u-(m-n)-10:t;if(l.includes("bottom")){if(i>=r&&o<m)return i;if(o>m)return m-x}return t},I=e=>{let{children:t,boundary:a,initialValues:s={width:400,height:400,xAxis:0,yAxis:0},minWidth:n=100,minHeight:r=100,enableResizing:o=!1,enableDragging:d=!0,header:c="",onClose:_}=e,[u,x]=(0,i.useState)({x:s.xAxis,y:s.yAxis}),[m,h]=(0,i.useState)({width:s.width,height:s.height}),[p,j]=(0,i.useState)(100),v=(0,i.useRef)(!1),[b,y]=(0,i.useState)(!1),g=(0,i.useRef)(null),[f,N]=(0,i.useState)(document.querySelector(a??T.BODY_REF));(0,i.useEffect)(()=>{h({width:s.width,height:s.height}),x({x:s.xAxis,y:s.yAxis})},[s.height,s.width,s.xAxis,s.yAxis]),(0,i.useEffect)(()=>{N(document.querySelector(a??T.BODY_REF)),E({setZIndex:j})},[a]);let C=(e,t)=>{var a,l,i,c,_;if(null==e||e.stopPropagation(),E({setZIndex:j}),!t)return;v.current=t!==T.MOVE&&o,y(t===T.MOVE&&d);let p=null==f?void 0:f.getBoundingClientRect(),b=(null==f?void 0:f.offsetTop)??0,N=(null==f?void 0:f.offsetLeft)??0,C=(null==e?void 0:e.clientX)??0,k=(null==e?void 0:e.clientY)??0,w=(null==m?void 0:m.width)??s.width,I=(null==m?void 0:m.height)??s.height,R=(null==u?void 0:u.x)??0,O=(null==u?void 0:u.y)??0,M=(null===(l=g.current)||void 0===l?void 0:null===(a=l.getBoundingClientRect())||void 0===a?void 0:a.right)??m.width,L=(null===(c=g.current)||void 0===c?void 0:null===(i=c.getBoundingClientRect())||void 0===i?void 0:i.bottom)??m.height,D={},U=null===(_=g.current)||void 0===_?void 0:_.querySelector("#draggable-content-body");if(U){let{style:e}=U;e&&"none"!==e.pointerEvents&&(D={...e},e.pointerEvents="none")}let F=e=>{if(!e)return;let{clientX:t,clientY:a}=e,s=t-C,n=a-k;try{v.current?Z(s,n,t,a):z(s,n)}catch(e){P()}},Z=(e,a,s,l)=>{var i;let o=(null==u?void 0:u.x)??0,d=(null==u?void 0:u.y)??0,c=w,_=I;t.includes(T.RIGHT)?c+=e:t.includes(T.LEFT)&&(o=e+R,c-=e),t.includes(T.BOTTOM)?_+=a:t.includes(T.TOP)&&(d=a+O,_-=a),x(e=>{let t=Math.max(d,b+5),a=Math.max(o,N+5);return{x:c<=n?e.x:a,y:_<=r?e.y:t}});let m=null===(i=g.current)||void 0===i?void 0:i.getBoundingClientRect();h(e=>({width:S({prevWidth:e.width,leftOffset:N,boundaryRect:p,initialSelfRight:M,resize_direction:t,newWidth:c,minWidth:n,clientX:s,self:m}),height:A({prevHeight:e.height,topOffset:b,boundaryRect:p,initialSelfBottom:L,resize_direction:t,newHeight:_,minHeight:r,clientY:l,self:m})}))},z=(e,t)=>{let a=Math.min(Math.max(e+R,N+5),N+((null==p?void 0:p.width)??0)-m.width-9);x({x:a,y:Math.min(Math.max(t+O,b+5),b+((null==p?void 0:p.height)??0)-m.height-9)})},P=()=>{if(y(!1),v.current=!1,null==U?void 0:U.style)try{Object.assign(U.style,D)}catch{U.style.pointerEvents="unset"}f&&(window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",P))};f&&(window.addEventListener("mousemove",F),window.addEventListener("mouseup",P))};return(0,l.jsx)("div",{className:`draggable ${b?"dragging":""}`,style:{position:"absolute",top:u.y,left:u.x,zIndex:p},onMouseDown:()=>E({setZIndex:j}),onKeyDown:()=>E({setZIndex:j}),"data-testid":"dt_react_draggable",tabIndex:0,children:(0,l.jsxs)("div",{ref:g,className:"draggable-content","data-testid":"dt_react_draggable_content",style:{width:m.width,height:m.height},children:[(0,l.jsxs)("div",{id:"draggable-content__header","data-testid":"dt_react_draggable_handler",className:"draggable-content__header",onMouseDown:e=>C(e,T.MOVE),onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),tabIndex:0,children:[(0,l.jsx)("div",{className:"draggable-content__header__title",children:c}),(0,l.jsx)("div",{className:"draggable-content__header__close","data-testid":"dt_react_draggable-close-modal",onClick:_,children:(0,l.jsx)(w.Z,{height:"20px",width:"20px",fill:"var(--text-general)",className:"icon-general-fill-path"})})]}),(0,l.jsx)("span",{className:"draggable-content__body",id:"draggable-content-body",children:t}),o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"resizable-handle__top","data-testid":"dt_resizable-handle__top",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.TOP),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__right","data-testid":"dt_resizable-handle__right",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.RIGHT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__bottom","data-testid":"dt_resizable-handle__bottom",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.BOTTOM),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__left","data-testid":"dt_resizable-handle__left",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.LEFT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__top-right","data-testid":"dt_resizable-handle__top-right",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.TOP_RIGHT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__bottom-right","data-testid":"dt_resizable-handle__bottom-right",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.BOTTOM_RIGHT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__bottom-left","data-testid":"dt_resizable-handle__bottom-left",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.BOTTOM_LEFT),tabIndex:0}),(0,l.jsx)("div",{className:"resizable-handle__top-left","data-testid":"dt_resizable-handle__top-left",onKeyDown:e=>"Enter"===e.key&&C(null,T.MOVE),onMouseDown:e=>C(e,T.TOP_LEFT),tabIndex:0})]})]})})},R=e=>{let{boundary:t,children:a,onClose:s,enableResizing:n=!1,enableDragging:r=!0,header:o="",minHeight:d=100,minWidth:c=100,modalHeight:_=400,modalWidth:u=400}=e,[x,m]=(0,i.useState)(!1),h=(window.innerWidth-u)/2,p=(window.innerHeight-_)/2,[j,v]=i.useState({width:u,height:_,xAxis:h>=0?h:0,yAxis:p>=0?p:0}),b=k()(()=>{let e=window.innerWidth>u?u:window.innerWidth-50,t=window.innerHeight>_?_:window.innerHeight-50,a=(window.innerWidth-e)/2,s=(window.innerHeight-t)/2;v({width:e,height:t,xAxis:a>=0?a:0,yAxis:s>=0?s:0}),m(!0)},0);return i.useEffect(()=>(b(),window.addEventListener("resize",b),()=>{window.removeEventListener("resize",b)}),[b]),(0,l.jsx)("div",{id:"draggable_resize_container",children:x&&(0,l.jsx)(I,{boundary:t,initialValues:j,minWidth:c,minHeight:d,enableResizing:n,enableDragging:r,header:o,onClose:s,children:a})})};var O=a("63387"),M=a.n(O),L=a("24561"),D=a("33690"),U=a("88199"),F=a("26855");let Z={FRXAUDCAD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexAudcadIcon}))),FRXAUDCHF:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexAudchfIcon}))),FRXAUDJPY:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexAudjpyIcon}))),FRXAUDNZD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexAudnzdIcon}))),FRXAUDPLN:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexAudsgdIcon}))),FRXAUDUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexAudusdIcon}))),FRXBROUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexCadchfIcon}))),FRXEURAUD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexEuraudIcon}))),FRXEURCAD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexEurcadIcon}))),FRXEURCHF:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexEurchfIcon}))),FRXEURGBP:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexEurgbpIcon}))),FRXEURJPY:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexEurjpyIcon}))),FRXEURNZD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexEurnzdIcon}))),FRXEURUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexEurusdIcon}))),FRXGBPAUD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexGbpaudIcon}))),FRXGBPCAD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexGbpcadIcon}))),FRXGBPCHF:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexGbpchfIcon}))),FRXGBPJPY:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexGbpjpyIcon}))),FRXGBPNOK:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexGbpnokIcon}))),FRXGBPUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexGbpusdIcon}))),FRXGBPNZD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexGbpnzdIcon}))),FRXNZDJPY:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexNzdjpnIcon}))),FRXNZDUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexNzdusdIcon}))),FRXUSDCAD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexUsdcadIcon}))),FRXUSDCHF:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexUsdchfIcon}))),FRXUSDJPY:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexUsdjpyIcon}))),FRXUSDNOK:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexUsdnokIcon}))),FRXUSDPLN:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexUsdplnIcon}))),FRXUSDSEK:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexUsdsekIcon}))),FRXUSDMXN:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketForexUsdmxnIcon}))),FRXXAGUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCommoditySilverusdIcon}))),FRXXAUUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCommodityGoldusdIcon}))),FRXXPDUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCommodityPalladiumusdIcon}))),FRXXPTUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCommodityPlatinumusdIcon}))),OTC_AEX:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesNetherlands25Icon}))),OTC_AS51:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesAustralia200Icon}))),OTC_DJI:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesWallStreet30Icon}))),OTC_FCHI:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesFrance40Icon}))),OTC_FTSE:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesUk100Icon}))),OTC_GDAXI:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesUk100Icon}))),OTC_HSI:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesHongKong50Icon}))),OTC_IBEX35:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesSpain35Icon}))),OTC_N225:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesJapan225Icon}))),OTC_NDX:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesUsTech100Icon}))),OTC_SPC:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesUs500Icon}))),OTC_SSMI:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesSwiss20Icon}))),OTC_SX5E:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketIndicesEuro50Icon}))),R_10:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility10Icon}))),R_25:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility25Icon}))),R_50:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility50Icon}))),R_75:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility75Icon}))),R_100:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility100Icon}))),BOOM300N:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedBoom300Icon}))),BOOM500:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedBoom500Icon}))),BOOM1000:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedBoom1000Icon}))),CRASH300N:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedCrash300Icon}))),CRASH500:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedCrash500Icon}))),CRASH1000:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedCrash1000Icon}))),RDBEAR:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedBearIcon}))),RDBULL:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedBullIcon}))),STPRNG:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedStepIndices100Icon}))),STPRNG2:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedStepIndices200Icon}))),STPRNG3:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedStepIndices300Icon}))),STPRNG4:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedStepIndices400Icon}))),STPRNG5:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedStepIndices500Icon}))),WLDAUD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedAudBasketIcon}))),WLDEUR:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedEurBasketIcon}))),WLDGBP:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedGbpBasketIcon}))),WLDXAU:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedGoldBasketIcon}))),WLDUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedUsdBasketIcon}))),"1HZ10V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility101sIcon}))),"1HZ25V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility251sIcon}))),"1HZ50V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility501sIcon}))),"1HZ75V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility751sIcon}))),"1HZ100V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility1001sIcon}))),"1HZ150V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility1501sIcon}))),"1HZ200V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility2001sIcon}))),"1HZ250V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility2501sIcon}))),"1HZ300V":(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedVolatility3001sIcon}))),JD10:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedJump10Icon}))),JD25:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedJump25Icon}))),JD50:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedJump50Icon}))),JD75:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedJump75Icon}))),JD100:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedJump100Icon}))),JD150:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedJump150Icon}))),JD200:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketDerivedJump200Icon}))),CRYBCHUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyBchusdIcon}))),CRYBNBUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyBnbusdIcon}))),CRYBTCLTC:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyBtcltcIcon}))),CRYIOTUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyIotusdIcon}))),CRYNEOUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyNeousdIcon}))),CRYOMGUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyOmgusdIcon}))),CRYTRXUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyTrxusdIcon}))),CRYBTCETH:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyBtcethIcon}))),CRYZECUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyZecusdIcon}))),CRYXMRUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyXmrusdIcon}))),CRYXMLUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyXlmusdIcon}))),CRYXRPUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyXrpusdIcon}))),CRYBTCUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyBtcusdIcon}))),CRYDSHUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyDshusdIcon}))),CRYETHUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyEthusdIcon}))),CRYEOSUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyEosusdIcon}))),CRYLTCUSD:(0,i.lazy)(()=>a.e("753").then(a.bind(a,48375)).then(e=>({default:e.MarketCryptocurrencyLtcusdIcon}))),unknown:(0,i.lazy)(()=>a.e("733").then(a.bind(a,57136)).then(e=>({default:e.IllustrativeMarketsIcon})))},z=e=>{let{type:t,size:a}=e,s=Z[null==t?void 0:t.toUpperCase()]||Z.unknown;return(0,l.jsx)(i.Suspense,{fallback:null,children:(0,l.jsx)(s,{iconSize:a??"xs"})})};var P=a("82106"),B=a("86278"),X=a("14244"),$=a("26088"),H=a("92868"),V=a("45452");let q=e=>{let{alignment:t,children:a,className:s,classNameBubble:n,classNameTarget:r,classNameTargetIcon:o,counter:d,disable_message_icon:c,disable_target_icon:_,has_error:u,icon:x,id:m,is_open:h,is_bubble_hover_enabled:p,margin:j=0,message:v,onBubbleClose:b,onBubbleOpen:y,onClick:f=()=>void 0,relative_render:N=!1,should_disable_pointer_events:C=!1,should_show_cursor:k,zIndex:w="1",data_testid:T,arrow_styles:E}=e,S=i.useRef(),[A,I]=i.useState(void 0),[R,O]=i.useState(!1),{isDesktop:L}=(0,g.F)(),[D,U]=(0,B.X)(null,!0),[F,Z]=(0,B.m)(),z=i.useMemo(()=>!L&&void 0===h,[L,h]);i.useEffect(()=>{S.current&&I(S.current)},[u]),i.useEffect(()=>{!U&&z&&O(!1)},[U,z]);let q=()=>{y&&y()},G=()=>{b&&b()},Y=M()(o,x),K=U&&v&&(!z||R);return(0,l.jsxs)("div",{ref:D,className:M()({"dc-popover__wrapper":N}),onClick:e=>{f(e),z&&O(!R)},"data-testid":"dt_popover_wrapper",children:[N&&(0,l.jsx)("div",{className:"dc-popover__container",style:{zIndex:w},children:(0,l.jsx)("div",{ref:S,className:"dc-popover__container-relative","data-testid":"dt_popover_relative_container"})}),(A||!N)&&(0,l.jsx)(P.Popover,{isOpen:h??(K||p&&Z),positions:[t],padding:j+8,containerClassName:M()({"react-tiny-popover-container--disabled-pointer-event":C,"react-tiny-popover-cursor-option":k}),...N?{parentElement:A,contentLocation:e=>{let{childRect:a,popoverRect:s,nudgedLeft:n}=e,l=document.body.clientWidth,i=a.right+(s.width-a.width/2),r=0,o=0;switch(t){case"left":o=-1*Math.abs((s.height>s.width?n:s.width)+j),r=a.height>s.height?(a.height-s.height)/2:-((s.height-a.height)/2*1);break;case"right":o=s.width+j,r=a.height>s.height?(a.height-s.height)/2:-((s.height-a.height)/2*1);break;case"top":o=i>l?-1*Math.abs(i-l):0,r=-1*Math.abs(s.height+j);break;case"bottom":o=i>l?-1*Math.abs(i-l):0,r=a.height+j}return{top:r,left:o}}}:{containerStyle:{zIndex:w}},content:e=>{let{position:t,childRect:a,popoverRect:s}=e;return(0,l.jsx)(P.ArrowContainer,{position:t,childRect:a,popoverRect:s,arrowColor:u?"var(--status-danger)":"var(--general-active)",arrowSize:5,arrowStyle:N?{borderTop:"10px solid transparent",borderLeft:"10px solid transparent",borderRight:`10px solid ${u?"var(--status-danger)":"var(--general-active)"}`,transform:"rotate(315deg)",right:"0px",top:"5px",height:"10px",margin:"auto",bottom:"0px"}:{...E},children:(0,l.jsxs)("div",{id:m,onMouseEnter:q,onMouseLeave:G,className:M()(n,"dc-popover__bubble",{"dc-popover__bubble--error":u}),ref:F,children:[!c&&"info"===x&&(0,l.jsx)("i",{className:"dc-popover__bubble__icon",children:(0,l.jsx)(X.Z,{})}),u&&(0,l.jsx)(V.Z,{size:"xxs",color:"colored-background",children:v})||(0,l.jsx)(V.Z,{lineHeight:"md",size:"xxs",className:"dc-popover__bubble__text",children:v})]})})},children:(0,l.jsx)("div",{"data-testid":T,className:M()("dc-popover",s),id:m,children:(0,l.jsxs)("div",{className:M()(r,"dc-popover__target"),children:[!_&&(0,l.jsxs)("i",{className:v?"dc-popover__target__icon":"dc-popover__target__icon--disabled",children:["info"===x&&(0,l.jsx)(X.Z,{className:Y}),"question"===x&&(0,l.jsx)(H.Z,{className:Y}),"dot"===x&&(0,l.jsx)($.Z,{className:Y}),"counter"===x&&(0,l.jsx)("span",{className:Y,children:d})]}),a]})})})]})},G={ACCU:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesAccumulatorStayInIcon}))),DIGITDIFF:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsDiffersIcon}))),DIGITEVEN:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsEvenIcon}))),DIGITMATCH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsMatchesIcon}))),DIGITODD:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsOddIcon}))),DIGITOVER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsOverIcon}))),DIGITUNDER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesDigitsUnderIcon}))),TICKHIGH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsHighIcon}))),TICKLOW:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsLowIcon}))),NOTOUCH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsNoTouchIcon}))),ONETOUCH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsTouchIcon}))),EXPIRYRANGE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsEndsInIcon}))),EXPIRYMISS:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsEndsOutIcon}))),UPORDOWN:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsGoesOutIcon}))),RANGE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesInsAndOutsStaysInIcon}))),MULTDOWN:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesMultipliersDownIcon}))),MULTUP:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesMultipliersUpIcon}))),CALLSPREAD:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesSpreadsCallIcon}))),PUTSPREAD:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesSpreadsPutIcon}))),ASIAND:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsAsianDownIcon}))),ASIANU:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsAsianUpIcon}))),PUT:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsFallIcon}))),PUTE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsFallIcon}))),RUNLOW:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsOnlyDownsIcon}))),RUNHIGH:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsOnlyUpsIcon}))),RESETPUT:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsResetDownIcon}))),RESETCALL:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsResetUpIcon}))),CALL:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsRiseIcon}))),CALLE:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesUpsAndDownsRiseIcon}))),HIGHER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsHigherIcon}))),LOWER:(0,i.lazy)(()=>a.e("327").then(a.bind(a,94733)).then(e=>({default:e.TradeTypesHighsAndLowsLowerIcon}))),unknown:(0,i.lazy)(()=>a.e("733").then(a.bind(a,57136)).then(e=>({default:e.IllustrativeMarketsIcon})))},Y=e=>{let{type:t,size:a,className:s}=e,n=G[null==t?void 0:t.toUpperCase()]||G.unknown;return(0,l.jsx)(i.Suspense,{fallback:null,children:(0,l.jsx)(n,{iconSize:a??"xs",className:s})})},K="transaction-details-modal-desktop",W=e=>{let{label:t,extra_classes:a=[],loader:s=!1}=e;return(0,l.jsx)("div",{className:M()(`${K}__table-cell`,...a),children:s?(0,l.jsx)(ee,{}):t})},J=e=>{let{columns:t}=e;return(0,l.jsx)("div",{className:M()(`${K}__table-row`,`${K}__table-header`),children:null==t?void 0:t.map(e=>(0,l.jsx)(W,{extra_classes:[e.extra_class?`${K}__table-cell${e.extra_class}`:""],label:e.label,loader:!1},e.key))})},Q=e=>{let{message:t,icon:a}=e;return(0,l.jsx)("div",{className:`${K}__icon-wrapper`,children:(0,l.jsx)(q,{alignment:(0,F.rK)()?"right":"left",message:t,zIndex:"9999",children:a})})},ee=()=>(0,l.jsx)(L.ZP,{className:"transactions__loader-text","data-testid":"transaction_details_table_cell_loader",height:10,width:30,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"60",height:"12"})});function et(e){let{result:t,result_columns:a,transactions:s,transaction_columns:n,account:i,balance:r}=e;return(0,l.jsxs)("div",{"data-testid":"transaction_details_tables",className:"transaction-details-tables",children:[(0,l.jsxs)("div",{className:M()(`${K}__table-container`,`${K}__table-container__top-table`),children:[(0,l.jsx)(J,{columns:n}),null==s?void 0:s.map(e=>{let{data:t,type:a}=e;if(a===D.i.CONTRACT){var s,n;return(0,l.jsxs)("div",{className:`${K}__table-row`,children:[(0,l.jsx)(W,{label:(null==t?void 0:t.date_start)&&(0,u.fcq)(null==t?void 0:t.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]"),extra_classes:[`${K}__table-cell--grow-big`]}),(0,l.jsx)(W,{label:null==t?void 0:null===(s=t.transaction_ids)||void 0===s?void 0:s.buy,extra_classes:[`${K}__table-cell--grow-mid`]}),(0,l.jsx)(W,{label:(0,l.jsx)(Q,{message:null==t?void 0:t.display_name,icon:(0,l.jsx)(z,{type:null==t?void 0:t.underlying,size:"sm"})})}),(0,l.jsx)(W,{label:(0,l.jsx)(Q,{message:(0,U.getContractTypeName)(t),icon:(0,l.jsx)(Y,{type:null==t?void 0:t.contract_type,size:"sm"})})}),(0,l.jsx)(W,{label:null==t?void 0:t.entry_tick,loader:!(null==t?void 0:t.entry_tick)}),(0,l.jsx)(W,{label:null==t?void 0:t.exit_tick,loader:!t.exit_tick}),(0,l.jsx)(W,{label:Math.abs((null==t?void 0:t.buy_price)??0).toFixed(2)}),(0,l.jsx)(W,{label:(0,l.jsx)("div",{className:M()({[`${K}__profit--win`]:(null==t?void 0:t.profit)>0,[`${K}__profit--loss`]:(null==t?void 0:t.profit)<0}),children:Math.abs((null==t?void 0:t.profit)??0).toFixed(2)}),loader:!t.is_completed})]},null==t?void 0:null===(n=t.transaction_ids)||void 0===n?void 0:n.buy)}return(0,l.jsx)("div",{className:`${K}__table-row`,children:(0,l.jsx)("div",{className:`${K}__divider`,children:(0,l.jsx)("div",{className:"transactions__divider-line"})})},`transaction-row-divider-${t}`)})]}),(0,l.jsxs)("div",{className:M()(`${K}__table-container`,`${K}__table-container__bottom-table`),children:[(0,l.jsx)(J,{columns:a}),(0,l.jsxs)("div",{className:`${K}__table-row`,children:[(0,l.jsx)(W,{label:i,extra_classes:[`${K}__table-cell--grow-mid`]}),(0,l.jsx)(W,{label:null==t?void 0:t.number_of_runs}),(0,l.jsx)(W,{label:Math.abs((null==t?void 0:t.total_stake)??0).toFixed(2)}),(0,l.jsx)(W,{label:Math.abs((null==t?void 0:t.total_payout)??0).toFixed(2)}),(0,l.jsx)(W,{label:null==t?void 0:t.won_contracts}),(0,l.jsx)(W,{label:null==t?void 0:t.lost_contracts,extra_classes:[`${K}__loss`]}),(0,l.jsx)(W,{label:(0,l.jsx)("div",{className:M()((null==t?void 0:t.total_profit)&&{[`${K}__profit--win`]:(null==t?void 0:t.total_profit)>0,[`${K}__profit--loss`]:(null==t?void 0:t.total_profit)<0}),"data-testid":"transaction_details_table_profit",children:Math.abs((null==t?void 0:t.total_profit)??0).toFixed(2)})}),(0,l.jsx)(W,{label:r})]})]})]})}let ea=()=>[{key:"timestamp",label:(0,y.NC)("Timestamp"),extra_class:"--grow-big"},{key:"reference",label:(0,y.NC)("Reference"),extra_class:"--grow-mid"},{key:"market",label:(0,y.NC)("Market")},{key:"contract_type",label:(0,y.NC)("Trade type")},{key:"entry_tick",label:(0,y.NC)("Entry spot")},{key:"exit_tick",label:(0,y.NC)("Exit spot")},{key:"buy_price",label:(0,y.NC)("Buy price")},{key:"profit",label:(0,y.NC)("Profit/Loss")}],es=()=>[{key:"account",label:(0,y.NC)("Account"),extra_class:"--grow-mid"},{key:"no_of_runs",label:(0,y.NC)("No. of runs")},{key:"total_stake",label:(0,y.NC)("Total stake")},{key:"total_payout",label:(0,y.NC)("Total payout")},{key:"win",label:(0,y.NC)("Win")},{key:"loss",label:(0,y.NC)("Loss")},{key:"total_profit",label:(0,y.NC)("Total profit/loss")},{key:"balance",label:(0,y.NC)("Balance")}],en=(0,r.Pi)(()=>{let{client:e}=(0,h.oR)(),{loginid:t,balance:a}=e,{transactions:s}=(0,h.oR)(),{toggleTransactionDetailsModal:n,is_transaction_details_modal_open:r,transactions:o}=s,{statistics:d}=s;return(0,l.jsx)(i.Fragment,{children:r&&(0,l.jsx)(R,{boundary:".main",header:(0,y.NC)("Transactions detailed summary"),onClose:()=>n(!1),modalWidth:882,modalHeight:404,minWidth:882,minHeight:404,enableResizing:!0,children:(0,l.jsx)(et,{transaction_columns:ea(),transactions:o,result_columns:es(),result:d,account:t??"",balance:a??0})})})});var el=a("80177"),ei=a("64010"),er=a("44810"),eo=a("30328"),ed=a("43882");let ec=i.memo(e=>{var t,a;let{className:s,column:n,is_footer:i,passthrough:r,row:o}=e;if(!n)return null;let{col_index:d,title:c}=n,_=null==o?void 0:o[d],x=(0,u.MOe)(null==o?void 0:null===(t=o.contract_info)||void 0===t?void 0:t.contract_type),m=(0,u.Yeo)(null==o?void 0:null===(a=o.contract_info)||void 0===a?void 0:a.contract_type);return(0,l.jsxs)("div",{className:M()(s,n.col_index),children:[!i&&(0,l.jsx)("div",{className:M()(`${n.col_index}__row-title`,"data-list__row-title"),children:n.renderHeader?n.renderHeader({title:c,is_vanilla:m}):c}),(0,l.jsx)("div",{className:"data-list__row-content",children:n.renderCellContent?n.renderCellContent({cell_value:_,is_footer:i,passthrough:r,row_obj:o,is_vanilla:m,is_turbos:x}):_})]})});var e_=a("79655"),eu=a("89471");let ex=(e,t)=>{let a=i.useMemo(()=>k()(e,t),[]);return i.useEffect(()=>a.cancel,[]),a},em=i.memo(e=>{let{action_desc:t,destination_link:a,row_gap:s,row_key:n,rowRenderer:r,measure:o,is_dynamic_height:d,...c}=e,[_,x]=i.useState(!1),m=(0,eu.tm)(),h=ex(()=>x(!1),5e3),p=()=>{t&&(x(!_),h())},j=e=>{(0,u.K9$)(p,e)};return i.useEffect(()=>{m()&&d&&(null==o||o())},[_,d,o]),(0,l.jsx)("div",{className:"data-list__row--wrapper",style:{paddingBottom:`${s||0}px`},children:a?(0,l.jsx)(e_.OL,{className:"data-list__item--wrapper",id:`dt_reports_contract_${n}`,to:{pathname:a,state:{from_table_row:!0}},children:(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})}):(0,l.jsx)("div",{className:M()("data-list__item--wrapper",{"data-list__item--dynamic-height-wrapper":d}),children:t?(0,l.jsx)("div",{className:"data-list__item",onClick:j,onKeyDown:j,children:_?(0,l.jsx)("div",{className:"data-list__desc--wrapper",children:t.component&&(0,l.jsx)("div",{children:t.component})}):r({measure:o,...c})}):(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})})})}),eh=eo.aV,ep=eo.qj,ej=eo.Z8,ev=i.memo(e=>{let{children:t,className:a,data_source:s,footer:n,getRowSize:r,keyMapper:o,onRowsRendered:d,onScroll:c,setListRef:_,overscanRowCount:x,...m}=e,[h,p]=i.useState(!0),[j,v]=i.useState(!1),[b,y]=i.useState(0),g=i.useRef(),f=i.useRef(null),N=i.useRef({}),C=i.useRef(null);C.current=s;let k=!r,w=i.useCallback(()=>{s.forEach((e,t)=>{let a=(null==o?void 0:o(e))||`${t}-0`;N.current[a]=!0})},[s,o]);i.useEffect(()=>{k&&(g.current=new eo.t1({fixedWidth:!0,keyMapper:e=>(null==C?void 0:C.current)&&e<(null==C?void 0:C.current.length)&&(null==o?void 0:o(C.current[e]))||e})),w(),p(!1)},[]),i.useEffect(()=>{if(k){var e,t;null===(t=f.current)||void 0===t||null===(e=t.recomputeGridSize)||void 0===e||e.call(t,{columnIndex:0,rowIndex:0})}w()},[s,k,w]);let T=e=>{let{style:t,index:a,key:n,parent:i}=e,{getRowAction:r,passthrough:d,row_gap:c}=m,_=s[a],{action_type:x,shortcode:h,purchase_time:p,transaction_time:v,id:b}=_;if((0,u.JIr)(x,h,p||v)){let e=!!(null==s?void 0:s.find(e=>"sell"===e.action_type&&e.id===b));_={..._,is_sold:e}}let y=r&&r(_),f="string"==typeof y?y:void 0,C="object"==typeof y?y:void 0,w=(null==o?void 0:o(_))||n,T=function(){let{measure:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.jsx)(em,{action_desc:C,destination_link:f,is_new_row:!N.current[w],is_scrolling:j,measure:e,passthrough:d,row_gap:c,row_key:w,row:_,rowRenderer:m.rowRenderer,is_dynamic_height:k})};return k&&g.current?(0,l.jsx)(ej,{cache:g.current,columnIndex:0,rowIndex:a,parent:i,children:e=>{let{measure:a}=e;return(0,l.jsx)("div",{style:t,children:T({measure:a})})}},w):(0,l.jsx)("div",{style:t,children:T()},w)},E=e=>{let t;clearTimeout(t),!j&&v(!0),t=setTimeout(()=>{!h&&v(!1)},200),y(e.target.scrollTop),"function"==typeof c&&c(e)},S=e=>{f.current=e,null==_||_(e)};return h?(0,l.jsx)("div",{}):(0,l.jsxs)("div",{"data-testid":"dt_data_list",className:M()(a,"data-list",{[`${a}__data-list`]:a}),children:[(0,l.jsxs)("div",{className:"data-list__body-wrapper",children:[(0,l.jsx)("div",{className:M()("data-list__body",{[`${a}__data-list-body`]:a}),children:(0,l.jsx)(ep,{children:e=>{var t,n;let{width:i,height:o}=e;return(0,l.jsx)(er.Z,{style:{height:o,width:i},children:(0,l.jsx)(ed.Z,{onScroll:E,autohide:!0,is_bypassed:(0,u.tqC)(),children:(0,l.jsx)(eh,{className:a,deferredMeasurementCache:null==g?void 0:g.current,height:o,onRowsRendered:d,overscanRowCount:x||1,ref:e=>S(e),rowCount:s.length,rowHeight:k&&(null==g?void 0:null===(t=g.current)||void 0===t?void 0:t.rowHeight)?null==g?void 0:null===(n=g.current)||void 0===n?void 0:n.rowHeight:r||0,rowRenderer:T,scrollingResetTimeInterval:0,width:i,...(0,u.nIE)()?{scrollTop:b,autoHeight:!0}:{onScroll:e=>E({target:e})}})})})}})}),t]}),n&&(0,l.jsx)("div",{className:M()("data-list__footer",{[`${a}__data-list-footer`]:a}),children:(0,l.jsx)(i.Fragment,{children:m.rowRenderer({row:n,is_footer:!0})})})]})});ev.displayName="DataList",ev.Cell=ec;let eb=e=>{let{date:t,time:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"journal__text-date",children:t})," | ",(0,l.jsx)("span",{className:"journal__text-time",children:a})]})};var ey=a("1051"),eg=a("75544");let ef=i.forwardRef((e,t)=>{let{className:a,classNameLabel:s,disabled:n=!1,id:r,label:o,label_font_size:d="xs",label_lineHeight:c="unset",defaultChecked:_,onChange:u,value:x=!1,withTabIndex:m=0,greyDisabled:h=!1,has_error:p=!1,...j}=e,[v,b]=i.useState(_||x);return i.useEffect(()=>{b(_||x)},[x,_]),(0,l.jsxs)("label",{htmlFor:r,onClick:e=>e.stopPropagation(),className:M()("dc-checkbox",a,{"dc-checkbox--disabled":n}),children:[(0,l.jsxs)("span",{children:[(0,l.jsx)("input",{className:"dc-checkbox__input",type:"checkbox",id:r,ref:t,disabled:n,onChange:e=>{e.persist(),b(!v),null==u||u(e)},checked:v,...j}),(0,l.jsx)("span",{className:M()("dc-checkbox__box",{"dc-checkbox__box--active":v,"dc-checkbox__box--disabled":n,"dc-checkbox--grey-disabled":n&&h}),tabIndex:m,onKeyDown:e=>{!n&&("Enter"===e.key||32===e.keyCode)&&(null==u||u(e),b(!v))},children:!!v&&(0,l.jsx)(eg.Z,{})})]}),(0,l.jsx)(V.Z,{size:d,lineHeight:c,className:M()("dc-checkbox__label",s,{"dc-checkbox__label--error":p}),children:o})]})});ef.displayName="Checkbox";let eN=e=>{let{wrapper_ref:t,checked_filters:a,filters:s,filterMessage:n,className:i}=e;return(0,l.jsx)("div",{ref:t,className:i,children:s.map(e=>{let t=Array.isArray(a)&&a.includes(e.id);return(0,l.jsx)(ef,{checked:t,label:e.label,onChange:()=>n(!t,e.id),name:e.id,defaultChecked:t},e.id)})})},eC=e=>{let{toggle_ref:t,checked_filters:a,filters:s,filterMessage:n,is_filter_dialog_visible:r,toggleFilterDialog:o}=e,d=i.useRef(null);return(0,ey.t)(d,o,e=>{var a;return r&&!(null===(a=t.current)||void 0===a?void 0:a.contains(e.target))}),(0,l.jsx)(eN,{wrapper_ref:d,checked_filters:a,filters:s,filterMessage:n,className:"filter-dialog"})},ek=e=>{let{logType:t,className:a,extra:s}=e;return(0,l.jsx)("div",{className:M()("journal__text",a),children:(()=>{switch(t){case U.LogTypes.LOAD_BLOCK:return(0,y.NC)("Blocks are loaded successfully");case U.LogTypes.NOT_OFFERED:return(0,y.NC)("Resale of this contract is not offered.");case U.LogTypes.PURCHASE:{let{longcode:e,transaction_id:t}=s;return(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Bought</0>: {{longcode}} (ID: {{transaction_id}})",values:{longcode:e,transaction_id:t},components:[(0,l.jsx)(V.Z,{size:"xxs",styles:{color:"var(--status-info)"}},0)],options:{interpolation:{escapeValue:!1}}})}case U.LogTypes.SELL:{let{sold_for:e}=s;return(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Sold for</0>: {{sold_for}}",values:{sold_for:e},components:[(0,l.jsx)(V.Z,{size:"xxs",styles:{color:"var(--status-warning)"}},0)]})}case U.LogTypes.PROFIT:{let{currency:e,profit:t}=s;return(0,l.jsx)(y.Xx,{i18n_default_text:"Profit amount: <0>{{profit}}</0>",values:{profit:`${(0,u.lby)(e,t,!0)} ${(0,u.O$T)(e)}`},components:[(0,l.jsx)(V.Z,{size:"xxs",styles:{color:"var(--status-success)"}},0)]})}case U.LogTypes.LOST:{let{currency:e,profit:t}=s;return(0,l.jsx)(y.Xx,{i18n_default_text:"Loss amount: <0>{{profit}}</0>",values:{profit:`${(0,u.lby)(e,t,!0)} ${(0,u.O$T)(e)}`},components:[(0,l.jsx)(V.Z,{size:"xxs",styles:{color:"var(--status-danger)"}},0)]})}case U.LogTypes.WELCOME_BACK:{let{current_currency:e}=s;if(e)return(0,l.jsx)(y.Xx,{i18n_default_text:"Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",values:{current_currency:e}});return(0,l.jsx)(y.Xx,{i18n_default_text:"Welcome back! Your messages have been restored."})}case U.LogTypes.WELCOME:{let{current_currency:e}=s;if(e)return(0,l.jsx)(y.Xx,{i18n_default_text:"You are using your {{current_currency}} account.",values:{current_currency:e}});break}default:return null}})()})},ew=(e,t,a,s,n)=>{switch(t){case U.MessageTypes.SUCCESS:return(0,l.jsx)(ek,{logType:e,extra:s,className:a});case U.MessageTypes.NOTIFY:if("function"==typeof e)return(0,l.jsx)("div",{className:M()("journal__text",a),children:e(n)});return(0,l.jsx)("div",{className:M()("journal__text",a),children:e});case U.MessageTypes.ERROR:return(0,l.jsx)("div",{className:"journal__text--error journal__text",children:e});default:return null}},eT=e=>{let{row:t,measure:a}=e,{date:s,time:n,message:i,message_type:r,className:o,extra:d}=t,c=eb({date:s,time:n});return(0,l.jsx)("div",{children:(0,l.jsx)("div",{className:"list__animation","data-testid":"mock-css-transition",children:(0,l.jsxs)("div",{className:"journal__item",dir:(0,F.rK)()?"rtl":"ltr",children:[(0,l.jsx)("div",{className:"journal__item-content",children:ew(i,r,o,d,a)}),(0,l.jsx)("div",{className:"journal__text-datetime",children:c})]})})})},eE=e=>{let{is_mobile:t}=e;return(0,l.jsxs)(L.ZP,{className:M()("journal__loader",{"journal__loader--mobile":t}),speed:3,width:350,height:92,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",children:[(0,l.jsx)("rect",{x:"15",y:"15",rx:"5",ry:"5",width:"320",height:"40"}),(0,l.jsx)("rect",{x:"15",y:"60",rx:"5",ry:"5",width:"180",height:"7"})]})};var eS=a("81262");let eA=()=>{let e=new Date,t=e.getUTCFullYear(),a=(e.getUTCMonth()+1).toString().padStart(2,"0"),s=e.getUTCDate().toString().padStart(2,"0"),n=e.getUTCHours().toString().padStart(2,"0"),l=e.getUTCMinutes().toString().padStart(2,"0"),i=e.getUTCSeconds().toString().padStart(2,"0");return`${t}-${a}-${s} ${n}${l}${i}`},eI=(e,t)=>{let{profit:a,sold_for:s,longcode:n,transaction_id:l,current_currency:i}=t;switch(e){case U.LogTypes.LOAD_BLOCK:return(0,y.NC)("Blocks are loaded successfully");case U.LogTypes.NOT_OFFERED:return(0,y.NC)("Resale of this contract is not offered.");case U.LogTypes.PURCHASE:return(0,y.NC)("Bought: {{longcode}} (ID: {{transaction_id}})",{longcode:n,transaction_id:l});case U.LogTypes.SELL:return(0,y.NC)("Sold for: {{sold_for}}",{sold_for:s});case U.LogTypes.PROFIT:return(0,y.NC)("Profit amount: {{profit}}",{profit:a});case U.LogTypes.LOST:return(0,y.NC)("Loss amount: {{profit}}",{profit:a});case U.LogTypes.WELCOME_BACK:if(i)return(0,y.NC)("Welcome back! Your messages have been restored. You are using your {{current_currency}} account.",{current_currency:i});return(0,y.NC)("Welcome back! Your messages have been restored.");case U.LogTypes.WELCOME:if(i)return(0,y.NC)("You are using your {{current_currency}} account.",{current_currency:i});break;default:return""}},eR=(e,t)=>{let a=encodeURI(`data:text/csv;charset=utf-8, ${t}`),s=document.createElement("a");s.setAttribute("href",a),s.setAttribute("download",`${e} ${eA()}.csv`),document.body.appendChild(s),s.click();let n=s.parentNode;n&&s&&(null==n?void 0:n.contains(s))&&(null==n||n.removeChild(s))};var eO=a("45221");let eM=(0,r.Pi)(e=>{let t,a,{tab:s}=e,{run_panel:n,transactions:i,journal:r}=(0,h.oR)(),{is_clear_stat_disabled:o,is_running:d}=n,{filtered_messages:c}=r,{transactions:_}=i,u=!1;return"transactions"===s?(t=()=>{let e=[[(0,y.NC)("Market"),(0,y.NC)("Reference ID (buy)"),(0,y.NC)("Reference ID (sell)"),(0,y.NC)("Barrier"),(0,y.NC)("Start Time"),(0,y.NC)("Entry Spot"),(0,y.NC)("Entry Spot Time"),(0,y.NC)("Exit Spot"),(0,y.NC)("Exit Spot Time"),(0,y.NC)("Buy Price"),(0,y.NC)("Profit/Loss")]];_.forEach(t=>{let{data:a}=t;"string"!=typeof a&&e.push([a.display_name,a.transaction_ids.buy,a.transaction_ids.sell,a.barrier,a.date_start,a.entry_tick,a.entry_tick_time,a.exit_tick,a.exit_tick_time,a.buy_price,a.profit])});let t=e.map(e=>e.join(",")).join("\n");eR((0,y.NC)("Transactions"),t)},u=!_.length||d,a=(0,y.NC)("Download your transaction history."),!_.length&&(a=(0,y.NC)("No transaction or activity yet."))):"journal"===s&&(t=()=>{let e=[[(0,y.NC)("Date"),(0,y.NC)("Time"),(0,y.NC)("Message")]];c.map(t=>{let a;a="success"!==t.message_type?JSON.stringify(t.message):eI(t.message.toString(),t.extra);let s=[t.date,t.time,null==a?void 0:a.replace("&#x2F;","/")];e.push(s)});let t=e.map(e=>e.join(",")).join("\n");eR((0,y.NC)("Journal"),t)},a=(0,y.NC)("Download your journal."),(u=o)&&(a=(0,y.NC)("No transaction or activity yet."))),d&&(a=(0,y.NC)("Download is unavailable while your bot is running.")),(0,l.jsx)(q,{className:"run-panel__info",classNameBubble:"run-panel__info--bubble",alignment:"bottom",message:a,zIndex:"5",children:(0,l.jsx)(eO.Z,{id:"download-button",disabled:u,className:"download__button",onClick:t,secondary:!0,children:(0,l.jsx)(y.Xx,{i18n_default_text:"Download"})})})});var eL=a("29643");let eD=e=>{let{checked_filters:t,filters:a,filterMessage:s,is_filter_dialog_visible:n,toggleFilterDialog:r}=e,o=i.useRef(null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"journal-tools__container",children:[(0,l.jsx)(eM,{tab:"journal"}),(0,l.jsxs)("div",{ref:o,className:"journal-tools__container-filter",onClick:r,children:[(0,l.jsx)(V.Z,{size:"xs",className:"journal-tools__container-filter--label",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Filters"})}),(0,l.jsx)(eL.Z,{height:"16px",width:"16px",fill:"var(--text-general)"})]})]}),(0,l.jsx)(eS.Z,{in:n,classNames:{enter:"filter-dialog--enter",enterDone:"filter-dialog--enter-done",exit:"filter-dialog--exit"},timeout:150,unmountOnExit:!0,children:(0,l.jsx)(eC,{toggle_ref:o,checked_filters:t,filters:a,filterMessage:s,is_filter_dialog_visible:n,toggleFilterDialog:r})})]})},eU=(0,r.Pi)(()=>{let{journal:e,run_panel:t}=(0,h.oR)(),{checked_filters:a,filterMessage:s,filters:n,filtered_messages:i,is_filter_dialog_visible:r,toggleFilterDialog:o,unfiltered_messages:d}=e,{is_stop_button_visible:c,contract_stage:_}=t,u=Array.isArray(i)&&i.length,x=Array.isArray(d)&&d.length,{isDesktop:m}=(0,g.F)();return(0,l.jsxs)("div",{className:M()("journal run-panel-tab__content--no-stat",{"run-panel-tab__content":m}),"data-testid":"dt_mock_journal",children:[(0,l.jsx)(eD,{checked_filters:a,filters:n,filterMessage:s,is_filter_dialog_visible:r,toggleFilterDialog:o}),(0,l.jsx)("div",{className:"journal__item-list",children:u?(0,l.jsx)(ev,{className:"journal",data_source:i,rowRenderer:e=>(0,l.jsx)(eT,{...e}),keyMapper:e=>e.unique_id}):(0,l.jsx)(l.Fragment,{children:_>=el.K.STARTING&&Object.keys(a).length&&!x&&c?(0,l.jsx)(eE,{is_mobile:!m}):(0,l.jsxs)("div",{className:"journal-empty",children:[(0,l.jsx)(ei.Z,{height:"64px",width:"64px",className:"journal-empty__icon icon-general-fill-g-path",color:"secondary",fill:"var(--text-general)"}),(0,l.jsx)(V.Z,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",lineHeight:"s",className:"journal-empty__header",children:(0,l.jsx)(y.Xx,{i18n_default_text:"There are no messages to display"})}),(0,l.jsxs)("div",{className:"journal-empty__message",children:[(0,l.jsx)(V.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Here are the possible reasons:"})}),(0,l.jsxs)("ul",{className:"journal-empty__list",children:[(0,l.jsx)("li",{children:(0,l.jsx)(V.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The bot is not running"})})}),(0,l.jsx)("li",{children:(0,l.jsx)(V.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The stats are cleared"})})}),(0,l.jsx)("li",{children:(0,l.jsx)(V.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"All messages are filtered out"})})})]})]})]})})})]})});var eF=a("29747"),eZ=a("45697"),ez=a.n(eZ),eP=a("97050"),eB=a("75097");let eX={initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{duration:250,delay:.3}},e$={initial:{y:50,opacity:0},animate:{y:0,opacity:1},transition:{duration:.25,delay:.3}},eH={initial:{opacity:0},animate:{opacity:1},transition:{duration:.3}},eV=e=>{let{children:t,className:a,is_visible:s,keyname:n,type:i}=e;return"top"===i?(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsx)(eB.E.div,{animate:eX.animate,initial:eX.initial,transition:eX.transition,className:a,children:t},n)}):"bottom"===i?(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsx)(eB.E.div,{animate:e$.animate,initial:e$.initial,transition:e$.transition,className:a,children:t},n)}):(0,l.jsx)(l.Fragment,{children:s&&(0,l.jsx)(eB.E.div,{animate:eH.animate,initial:eH.initial,transition:eH.transition,className:a,children:t},n)})},eq=a("45927").Z,eG=e=>{let{children:t,has_footer:a}=e;return a?(0,l.jsx)("div",{className:"dc-input__wrapper",children:t}):(0,l.jsx)(i.Fragment,{children:t})},eY=i.forwardRef((e,t)=>{let{bottom_label:a,className:s,classNameError:n,classNameHint:r,classNameWarn:o,disabled:d=!1,error:c,field_className:_,has_character_counter:u,hint:x,initial_character_count:m,input_id:h,is_relative_hint:p,label_className:j,label:v,leading_icon:b,max_characters:y,trailing_icon:g,warn:f,data_testId:N,maxLength:C,placeholder:k,...w}=e,[T,E]=i.useState(0);i.useEffect(()=>{(m||0===m)&&E(m)},[m]);let S=e=>{var t;let a=e.target.value;if("tick_count"===e.target.name){let e=a.indexOf(".");-1!==e&&(a=a.substring(0,e))}else{let e=a.indexOf(".");-1!==e&&a.substring(e+1).length>2&&(a=a.substring(0,e+3))}E(a.length),e.target.value=a,null===(t=w.onChange)||void 0===t||t.call(w,e)},A=!!u||!!x&&!!p,I=v?"":k;return(0,l.jsxs)(eG,{has_footer:A,children:[(0,l.jsxs)("div",{className:M()("dc-input",s,{"dc-input--disabled":d,"dc-input--error":c,"dc-input--hint":x,"dc-input--bottom-label-active":a}),children:[(0,l.jsxs)("div",{className:M()("dc-input__container",{"dc-input__container--disabled":d,"dc-input__container--error":c}),children:[b&&i.cloneElement(b,{className:M()("dc-input__leading-icon",b.props.className)}),"textarea"===w.type?(0,l.jsx)("textarea",{ref:t,"data-testid":N,...w,className:M()("dc-input__field dc-input__textarea",{"dc-input__field--placeholder-visible":!v&&k}),onChange:S,disabled:d,id:h,maxLength:C,placeholder:I}):(0,l.jsx)("input",{ref:t,"data-testid":N,...w,className:M()("dc-input__field",_,{"dc-input__field--placeholder-visible":!v&&k}),onFocus:w.onFocus,onBlur:w.onBlur,onChange:S,onKeyDown:w.onKeyDown,onMouseDown:w.onMouseDown,onMouseUp:w.onMouseUp,onPaste:w.onPaste,disabled:d,"data-lpignore":"password"!==w.type||void 0,id:h,"aria-label":v,maxLength:C,placeholder:I}),g&&i.cloneElement(g,{className:M()("dc-input__trailing-icon",g.props.className)}),v&&(0,l.jsx)("label",{className:M()("dc-input__label",j),htmlFor:w.id,children:v})]}),(0,l.jsx)("div",{children:!A&&(0,l.jsxs)(i.Fragment,{children:[c&&(0,l.jsx)(eq,{className:n,message:c,type:"error"}),f&&(0,l.jsx)(eq,{className:o,message:f,type:"warn"}),!c&&x&&!p&&(0,l.jsx)("div",{className:"dc-input__hint",children:(0,l.jsx)(V.Z,{as:"p",color:"less-prominent",size:"xs",className:r,children:x})})]})})]}),A&&(0,l.jsxs)("div",{className:"dc-input__footer",children:[c&&(0,l.jsx)(eq,{className:n,message:c,type:"error"}),f&&(0,l.jsx)(eq,{className:o,message:f,type:"warn"}),!c&&x&&(0,l.jsx)("div",{className:"dc-input__hint dc-input__hint--relative",children:(0,l.jsx)(V.Z,{color:"less-prominent","line-height":"m",size:"xs",children:x})}),u&&(0,l.jsx)("div",{className:"dc-input__counter",children:(0,l.jsxs)(V.Z,{color:"less-prominent","line-height":"m",size:"xs",children:[T,y?`/${y}`:""]})})]}),a&&!c&&(0,l.jsx)("div",{className:"dc-input__bottom-label",children:(0,l.jsx)(V.Z,{size:"xs",color:"less-prominent",children:a})})]})});eY.displayName="Input";var eK=a("66163"),eW=a("73935"),eJ=a("14117");let eQ=e=>{let{children:t,header:a,id:s,is_from_app:n=!1,is_open:r,onClickClose:o,portal_id:d,header_classname:c,has_return_icon:_,onReturn:u}=e,x=i.useRef(null),m=(0,l.jsxs)("div",{ref:x,id:s,className:M()("dc-page-overlay",{"dc-page-overlay-portal":!!d}),children:[a&&(0,l.jsx)("div",{className:M()("dc-page-overlay__header",{"dc-page-app__header ":n}),children:(0,l.jsxs)("div",{className:"dc-page-overlay__header-wrapper",children:[(0,l.jsxs)("div",{className:M()("dc-page-overlay__header-title",c),children:[_&&(0,l.jsx)(eJ.Z,{onClick:u,className:"dc-modal-header__icon"}),a]}),!n&&(0,l.jsx)("div",{"data-testid":"dt_page_overlay_header_close",className:"dc-page-overlay__header-close",onClick:o||window.history.back,children:(0,l.jsx)(w.Z,{height:"20px",width:"20px"})})]})}),(0,l.jsx)("div",{className:"dc-page-overlay__content",children:t})]});return d?eW.createPortal((0,l.jsx)(eS.Z,{appear:!0,in:r,timeout:250,classNames:{appear:"dc-page-overlay--enter",enter:"dc-page-overlay--enter",enterDone:"dc-page-overlay--enter-done",exit:"dc-page-overlay--exit"},unmountOnExit:!0,children:m}),document.getElementById(d)):(0,l.jsx)(i.Fragment,{children:m})},e0=e=>{let[t,a]=i.useState(""),{is_onscreen_keyboard_active:s,is_logged_in:n,initial_values:r,api_max_losses:o,onRunButtonClick:d,resetSelfExclusion:c,updateSelfExclusion:_,setRunLimit:u,is_mobile:x}=e;i.useEffect(()=>{!n&&c()});let m=async e=>{if(e.form_max_losses!==o){let t=await _({max_losses:e.form_max_losses});if(null==t?void 0:t.error){a((0,y.NC)(t.error.message));return}}u(e.run_limit),d()};return(0,l.jsx)("div",{className:"db-self-exclusion",children:(0,l.jsxs)("div",{className:"db-self-exclusion__content",children:[(0,l.jsx)("div",{className:"db-self-exclusion__info",children:(0,y.NC)("Enter limits to stop your bot from trading when any of these conditions are met.")}),(0,l.jsx)(eF.J9,{initialValues:r,validate:e=>{let t={},s=/^\d+(\.\d+)?$/,n=/^\d+$/,l=(0,y.NC)("This field is required."),i=(0,y.NC)("Should be a valid number"),r=(0,y.NC)("Reached maximum number of digits"),d=(0,y.NC)("Reached maximum number of decimals"),c=(0,y.NC)("Please enter a number between 0 and {{api_max_losses}}.",{api_max_losses:o});return["run_limit","form_max_losses"].forEach(a=>{!e[a]&&(t[a]=l)}),["run_limit","form_max_losses"].forEach(a=>{e[a]&&(s.test(e[a])?+e[a]>0x9184e729fff&&(t[a]=r):t[a]=i)}),["run_limit"].forEach(a=>{e[a]&&!n.test(e[a])&&(t[a]=i)}),["form_max_losses"].forEach(a=>{let s=e[a].toString().split(".")[1];(s&&s.length||0)>2&&(t[a]=d)}),["form_max_losses"].forEach(s=>{0!==o&&o!==e[s]&&o<e[s]?t[s]=c:a("")}),t},onSubmit:m,children:e=>{let{values:a,touched:n,errors:i,isValid:r,handleChange:o}=e;return(0,l.jsxs)(eF.l0,{children:[(0,l.jsx)("div",{className:"db-self-exclusion__form-group",children:(0,l.jsx)(eF.gN,{name:"form_max_losses",children:e=>{let{field:s}=e;return(0,l.jsx)(eY,{...s,className:"db-self-exclusion__input",type:"text",label:(0,y.NC)("Daily loss limit"),value:a.form_max_losses,onChange:o,error:t||n[s.name]&&i[s.name],hint:(0,y.NC)("Limits your potential losses for the day across all Deriv platforms.")})}})}),(0,l.jsx)("div",{className:"db-self-exclusion__form-group",children:(0,l.jsx)(eF.gN,{name:"run_limit",children:e=>{let{field:t}=e;return(0,l.jsx)(eY,{...t,className:"db-self-exclusion__input",type:"text",label:(0,y.NC)("Maximum consecutive trades"),value:a.run_limit,onChange:o,error:n[t.name]&&i.run_limit,hint:(0,y.NC)("Maximum number of trades your bot will execute for this run.")})}})}),(0,l.jsx)("div",{className:M()("db-self-exclusion__footer",{"db-self-exclusion__footer--relative":x&&s}),children:(0,l.jsxs)("div",{className:"db-self-exclusion__footer-btn-group",children:[(0,l.jsx)(eO.Z,{large:!0,text:(0,y.NC)("Cancel"),onClick:c,secondary:!0,type:"button"}),(0,l.jsx)(eO.Z,{type:"submit",large:!0,text:(0,y.NC)("Apply and run"),is_disabled:!r||!a.run_limit||!a.form_max_losses||""!==t,primary:!0})]})})]})}})]})})},e1=(0,r.Pi)(e=>{let{onRunButtonClick:t}=e,{self_exclusion:a}=(0,h.oR)(),{ui:s,client:n}=(0,h.oR)(),{is_restricted:i,resetSelfExclusion:r,initial_values:o,api_max_losses:d,run_limit:c,setRunLimit:_}=a,{is_onscreen_keyboard_active:u}=s,{is_logged_in:x,updateSelfExclusion:m,virtual_account_loginid:p}=n,{isDesktop:j}=(0,g.F)(),v={is_onscreen_keyboard_active:u,is_logged_in:x,initial_values:o,api_max_losses:d,onRunButtonClick:t,resetSelfExclusion:r,updateSelfExclusion:m,setRunLimit:_,virtual_account_loginid:p,run_limit:c,isDesktop:j};return(0,l.jsx)(l.Fragment,{children:j?(0,l.jsx)(f.Z,{is_open:i,has_close_icon:!0,width:"440px",height:"374px",toggleModal:r,className:"db-self-exclusion__modal",title:(0,y.NC)("Limits"),children:(0,l.jsx)(e0,{...v})}):(0,l.jsx)(eV,{is_visible:i,className:"limits__wrapper",keyname:"limitis__wrapper",children:(0,l.jsx)(eQ,{header:(0,y.NC)("Limits"),onClickClose:r,children:(0,l.jsx)(eK.Z,{children:(0,l.jsx)(eP.Z,{className:"limits__wrapper--is-mobile",children:(0,l.jsx)(e0,{...v})})})})})})});e1.propTypes={onRunButtonClick:ez().func};var e3=a("65342"),e8=a("51729");let e5=e=>{let{anchor:t="left",children:a,className:s,contentClassName:n,footer:r,header:o,width:d=250,zIndex:c=4,..._}=e,[u,x]=i.useState(_.is_open),{isDesktop:m}=(0,g.F)();return i.useEffect(()=>{x(_.is_open)},[_.is_open]),(0,l.jsxs)("div",{"data-testid":"drawer",className:M()("dc-drawer",s,{[`dc-drawer--${t}`]:m,"dc-drawer--open":u}),style:{zIndex:c,transform:u&&m?"left"===t?`translateX(calc(${d}px - 16px))`:`translateX(calc(-${d}px + 16px))`:void 0},children:[(0,l.jsx)("div",{className:M()("dc-drawer__toggle",{"dc-drawer__toggle--open":u}),onClick:()=>{x(!u),_.toggleDrawer&&_.toggleDrawer(!u)},children:m?(0,l.jsx)(e3.Z,{className:M()("dc-drawer__toggle-icon",{[`dc-drawer__toggle-icon--${t}`]:m})}):(0,l.jsx)(e8.Z,{iconSize:"sm",className:"dc-drawer__toggle-icon"})}),(0,l.jsxs)("div",{className:M()("dc-drawer__container",{[`dc-drawer__container--${t}`]:m}),children:[o&&(0,l.jsx)("div",{className:"dc-drawer__header",children:o}),(0,l.jsx)("div",{className:M()("dc-drawer__content",n),children:a}),r&&(0,l.jsx)("div",{className:"dc-drawer__footer",children:r})]})]})};var e7=a("87537"),e2=a("62873"),e4=a("88817"),e9=a("50220");let e6=(0,y.NC)("Your bot is running and waiting for a signal to buy a contract."),te=()=>(0,l.jsxs)("div",{className:"db-contract-card-running-loader",children:[(0,l.jsx)(e9.Z,{id:"rotate-icon",fontSize:16,fill:"var(--text-general)"}),(0,l.jsx)(V.Z,{color:"less-prominent",lineHeight:"xs",size:"xs",weight:"bold",align:"center",className:"dc-contract-card-message",children:e6})]}),tt=e=>{let{speed:t=3,contract_stage:a}=e;return(0,l.jsx)(l.Fragment,{children:a===el.K.RUNNING?(0,l.jsx)(te,{}):(0,l.jsxs)(L.ZP,{height:153,width:334,speed:t,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)","data-testid":"contract-card-loader",children:[(0,l.jsx)("rect",{x:"12",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),(0,l.jsx)("rect",{x:"61",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"15",rx:"0",ry:"0",width:"41",height:"25"}),(0,l.jsx)("rect",{x:"229",y:"24",rx:"0",ry:"0",width:"91",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"48",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"64",rx:"0",ry:"0",width:"308",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"80",rx:"0",ry:"0",width:"308",height:"1"}),(0,l.jsx)("rect",{x:"12",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"12",y:"137",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"89",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"105",rx:"0",ry:"0",width:"60",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"121",rx:"0",ry:"0",width:"140",height:"8"}),(0,l.jsx)("rect",{x:"180",y:"137",rx:"0",ry:"0",width:"60",height:"8"})]})})};var ta=a("91761"),ts=a("48766"),tn=a("54802"),tl=a("23406");let ti=i.memo(e=>{let{className:t,value:a}=e,[s,n]=i.useState(!1),[r,o]=i.useState({icon:"",previous_icon:""}),{icon:d,previous_icon:c,previous_value:_}=r,u=!isNaN(Number(r.value))&&!isNaN(Number(a)),x=i.useRef();return i.useEffect(()=>(n(!0),o(e=>{let t=Number(e.value)<Number(a)?(0,l.jsx)(tn.Z,{fill:"var(--text-profit-success)",iconSize:"sm"}):(0,l.jsx)("div",{style:{position:"relative",top:"-0.7rem"},children:(0,l.jsx)(tl.Z,{fill:"var(--text-loss-danger)",iconSize:"sm"})});return{icon:u?t:"",previous_icon:e.icon,previous_value:e.value,value:a}}),clearTimeout(x.current),x.current=setTimeout(()=>{n(!1)},3e3),()=>clearTimeout(x.current)),[a]),(0,l.jsx)("div",{className:t,"data-testid":"dt_arrow_indicator",children:u&&s?(0,l.jsx)("div",{children:_===Number(a)?c:d}):null})}),tr=e=>{let{currency:t}=e;return(0,l.jsx)(V.Z,{className:"dc-currency-badge",color:"colored-background",lineHeight:"unset",size:"xxxs",weight:"bold",children:(0,u.O$T)(t)})};var to=a("73728");let td=e=>{let{className:t,danger_limit:a=20,is_clockwise:s=!1,progress:n=0,radius:i=22,stroke:r=3,warning_limit:o=50}=e,d=i-r/2,c=2*d*Math.PI;return(0,l.jsxs)("div",{className:M()("dc-circular-progress",t),children:[(0,l.jsx)("div",{className:"dc-circular-progress__icon",children:(0,l.jsx)(to.Z,{iconSize:"xs"})}),(0,l.jsx)("svg",{height:2*i,width:2*i,children:(0,l.jsx)("circle",{className:M()("dc-circular-progress__bar",{"dc-circular-progress--clockwise":s,"dc-circular-progress__bar--warning":n<=o&&n>a,"dc-circular-progress__bar--danger":n<=a}),cx:i,cy:i,fill:"transparent",r:d,strokeDasharray:`${c} ${c}`,strokeWidth:r,style:{strokeDashoffset:c-n/100*c}})})]})},tc=e=>{let{end_time:t,format:a,getCardLabels:s,start_time:n}=e;if(!t||n.unix()>+t)return(0,l.jsx)(i.Fragment,{children:""});let{days:r,timestamp:o}=(0,u.LUK)((0,u.QRc)(n.unix(),t),a),d=o;r>0&&(d=`${r} ${r>1?s().DAYS:s().DAY} ${o}`);let c=/^00:00$/.test(d);return(0,l.jsx)(i.Fragment,{children:!c&&(0,l.jsx)("div",{className:"dc-remaining-time",children:d})})},t_=e=>{let{is_on:t}=e;return(0,l.jsx)("div",{className:M()("dc-tick-progress__tick",{"dc-tick-progress__tick--on":t})})},tu=e=>{let{className:t,rows:a=2,columns:s=5,size:n=10,value:i=0}=e;return(0,l.jsx)("div",{className:M()("dc-tick-progress",t),style:{gridTemplateRows:`repeat(${a}, 1fr)`,gridTemplateColumns:`repeat(${s}, 1fr)`},children:Array(n).fill(null).map((e,t)=>(0,l.jsx)(t_,{is_on:t<Number(i)},t))})},tx=e=>{let{current_tick:t,getCardLabels:a,ticks_count:s}=e;return(0,l.jsxs)("div",{className:"dc-progress-slider__ticks",children:[(0,l.jsxs)(V.Z,{styles:{lineHeight:"18px"},size:"xxs",className:"dc-progress-slider__ticks-caption",children:[a().TICK," ",t]}),(0,l.jsx)(tu,{columns:5,rows:s>5?2:1,size:s,value:t})]})},tm=e=>{let{className:t,current_tick:a,getCardLabels:s,is_loading:n,start_time:r,expiry_time:o,server_time:d,ticks_count:c}=e,_=(0,u.dq6)(d,Number(r),Number(o));return(0,l.jsx)("div",{className:M()("dc-progress-slider-mobile",t),children:c?(0,l.jsx)(tx,{current_tick:a,getCardLabels:s,ticks_count:c}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(V.Z,{size:"xxs",children:(0,l.jsx)(tc,{end_time:o,getCardLabels:s,start_time:d})}),n||_<1?(0,l.jsx)("div",{className:"dc-progress-slider-mobile__infinite-loader",children:(0,l.jsx)("div",{className:"dc-progress-slider-mobile__infinite-loader--indeterminate"})}):(0,l.jsx)(td,{className:"dc-progress-slider-mobile__timer",danger_limit:20,progress:_,warning_limit:50})]})})};var th=a("96672");let tp=e=>{let{getCardLabels:t,is_contract_won:a}=e;return(0,l.jsxs)("span",{className:M()("dc-result__caption",{"dc-result__caption--won":a,"dc-result__caption--lost":!a}),children:[(0,l.jsx)("div",{className:"dc-result__icon",children:(0,l.jsx)(th.Z,{iconSize:"sm",fill:a?"var(--text-profit-success)":"var(--text-loss-danger)"})}),t().CLOSED]})},tj=e=>{let{className:t,children:a,header:s,is_crypto:n,is_loss:i,is_won:r}=e;return(0,l.jsxs)("div",{className:M()("dc-contract-card-item",t),children:[(0,l.jsx)("div",{className:"dc-contract-card-item__header",children:s}),(0,l.jsx)("div",{className:M()("dc-contract-card-item__body",{"dc-contract-card-item__body--crypto":n,"dc-contract-card-item__body--loss":i,"dc-contract-card-item__body--profit":r}),children:a})]})};var tv=a("54996"),tb=a("94145");let ty=i.forwardRef((e,t)=>{let{children:a,is_visible:s,left:n,toggleDialog:i,toggle_ref:r,top:o}=e;(0,ey.t)(t,i,e=>{var t;return s&&!(null==r?void 0:null===(t=r.current)||void 0===t?void 0:t.contains(e.target))});let d=(0,l.jsx)(eS.Z,{in:s,classNames:{enter:"dc-contract-card-dialog--enter",enterDone:"dc-contract-card-dialog--enter-done",exit:"dc-contract-card-dialog--exit"},timeout:150,unmountOnExit:!0,children:(0,l.jsx)("div",{ref:t,className:"dc-contract-card-dialog",style:{top:o,left:`calc(${n}px + 32px)`},children:a})}),c=document.getElementById("deriv_app");return eW.createPortal(d,c||document.body)});ty.displayName="ContractCardDialog";var tg=a("11527"),tf=a("89606");let tN=e=>{let{alignment:t,children:a,className:s,classNameIcon:n,has_error:r,icon:o,message:d}=e,[c,_]=(0,B.X)(),u=M()(n,o);return(0,l.jsxs)("span",{className:M()(s,"dc-tooltip",{"dc-tooltip--error":r}),"data-tooltip":d||void 0,"data-tooltip-pos":t,children:["info"===o&&(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(X.Z,{className:u,ref:c}),(0,l.jsx)(X.Z,{className:M()(`${n}-balloon-icon`,"dc-tooltip__balloon-icon",{"dc-tooltip__balloon-icon--show":_})})]}),"question"===o&&(0,l.jsx)(tf.J,{icon:"IcUnknown",className:u}),"dot"===o&&(0,l.jsx)(tf.J,{icon:"IcCircle",className:u,size:4}),a]})},tC=e=>{let{decrementValue:t,id:a,incrementValue:s,max_is_disabled:n,min_is_disabled:r,is_incrementable_on_long_press:o,onLongPressEnd:d,type:c}=e,_=i.useRef(),u=i.useRef(),x=i.useRef(!1),m=e=>t=>{u.current=setTimeout(()=>{x.current=!0;let a=1;e(t,1),_.current=setInterval(()=>{e(t,++a)},50)},300)},h=()=>{clearInterval(_.current),clearTimeout(u.current),d&&x.current&&d(),x.current=!1},p=e=>o?{onContextMenu:e=>e.preventDefault(),onTouchStart:m(e),onTouchEnd:h,onMouseDown:m(e),onMouseUp:h}:{};return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(eO.Z,{id:`${a}_add`,className:M()("dc-input-wrapper__button dc-input-wrapper__button--increment",{"dc-input-wrapper__button--disabled":!!n}),disabled:!!n,onClick:s,tabIndex:-1,"aria-label":"Increment value",type:c,...p(s),children:(0,l.jsx)(tf.J,{icon:"IcAdd",className:"dc-input-wrapper__icon dc-input-wrapper__icon--plus",color:n?"disabled":void 0})}),(0,l.jsx)(eO.Z,{id:`${a}_sub`,className:M()("dc-input-wrapper__button dc-input-wrapper__button--decrement",{"dc-input-wrapper__button--disabled":!!r}),disabled:!!r,onClick:t,tabIndex:-1,"aria-label":"Decrement value",type:c,...p(t),children:(0,l.jsx)(tf.J,{icon:"IcMinus",className:"dc-input-wrapper__icon dc-input-wrapper__icon--minus",color:r?"disabled":void 0})})]})},tk=e=>{let{ariaLabel:t,changeValue:a,checked:s,className:n,classNameDynamicSuffix:r,classNameInlinePrefix:o,current_focus:d,data_testid:c,data_tip:_,data_value:x,display_value:m,fractional_digits:h,id:p,inline_prefix:j,inputmode:v,is_autocomplete_disabled:b,is_disabled:y,is_hj_whitelisted:g,is_incrementable:f,is_read_only:N,max_length:C,name:k,onBlur:w,onClick:T,onKeyPressed:E,placeholder:S,required:A,setCurrentFocus:I,type:R}=e,O=i.useRef(null);return i.useEffect(()=>{if(d===k){var e;null==O||null===(e=O.current)||void 0===e||e.focus()}},[d,k]),(0,l.jsxs)("div",{className:r,children:[j?(0,l.jsx)("div",{className:o,children:(0,l.jsx)(V.Z,{className:M()(o?`${o}--symbol`:"",{disabled:!!y}),size:"xs",children:"UST"===j?(0,u.O$T)(j):j})}):null,(0,l.jsx)("input",{autoComplete:b?"off":void 0,checked:s,className:M()(n),"data-for":`error_tooltip_${k}`,"data-hj-whitelist":g,"data-tip":_,"data-testid":c,"data-value":x,disabled:!!y,id:p,maxLength:h&&C?C+h+1:C,name:k,onBlur:e=>{null==I||I(null),null==w||w(e)},onChange:e=>{if(-1!==navigator.userAgent.indexOf("Safari")&&"checkbox"!==R){let t=e.target.selectionStart;a(e,e=>{e.target.selectionEnd=t})}else a(e)},onClick:T,onFocus:()=>null==I?void 0:I(k),onKeyDown:f?E:void 0,placeholder:S||void 0,readOnly:N,ref:O,required:A||void 0,inputMode:v,type:"number"===R?"text":R,value:m??"","aria-label":t,"data-lpignore":"password"!==R})]})},tw=e=>{let{ariaLabel:t,checked:a,className:s,classNameDynamicSuffix:n,classNameInlinePrefix:r,classNameInput:o,classNamePrefix:d,classNameWrapper:c,currency:_,current_focus:x,data_tip:m,data_value:h,decimal_point_change:p,error_messages:j,error_message_alignment:v,fractional_digits:b,helper:y,icon:g,id:f,inline_prefix:N,is_autocomplete_disabled:C,is_disabled:k,is_error_tooltip_hidden:w=!1,is_float:T,is_hj_whitelisted:E=!1,is_incrementable:S,is_incrementable_on_long_press:A,is_negative_disabled:I,is_read_only:R=!1,is_signed:O=!1,is_unit_at_right:L=!1,inputmode:D,increment_button_type:U,label:F,max_length:Z,max_value:z,min_value:P,name:B="",format:X,onBlur:$,onChange:H,onClick:q,onClickInputWrapper:G,placeholder:Y,prefix:K,required:W,setCurrentFocus:J,type:Q="",unit:ee,value:et,data_testid:ea}=e,[es,en]=i.useState(),el=j&&!!j.length&&!w,ei=z&&(+et>=+z||Number(es)>=+z),er=P&&(+et<=+P||Number(es)<=+P),eo=!0,ed=e=>{let t="string"==typeof e?e.split("."):e.toString().split(".");return t&&t.length>1?t[1].length:0},ec=e=>{let t=e;return P&&(t=Math.max(t,P)),z&&(t=Math.min(t,z)),t},e_=(e,t)=>{let a;if(ei)return;let s=es||et.toString(),n=s?ed(s):0,l=!!_&&(0,u.oS6)(_);if(t){let e=Math.min(t,Math.max(t,10))/10*+et/100;a=parseFloat(ec(parseFloat(s||"0")+Math.abs(e)).toString()).toFixed(n)}else a=l||!_&&T?parseFloat((parseFloat(s||"0")+parseFloat((1*10**(0-(p||n))).toString())).toString()).toFixed(p||n):parseFloat(((+s||0)+1).toString()).toFixed(n);em(a,!!t)},eu=e=>{let t;let a=es||(null==et?void 0:et.toString()),s=a?ed(a):0,n=!!_&&(0,u.oS6)(_);if(e){let n=Math.min(e,Math.max(e,10))/10*+et/100;t=parseFloat(ec(parseFloat(a||"0")-Math.abs(n)).toString()).toFixed(s)}else t=n||!_&&T?parseFloat((parseFloat(a||"0")-parseFloat((1*10**(0-(p||s))).toString())).toString()).toFixed(p||s):parseFloat(((+a||0)-1).toString()).toFixed(s);return t},ex=(e,t)=>{if(er)return;let a=eu(t);if(!I||!(0>+a))em(a,!!t)},em=(e,t)=>{let a=X?X(e):e;t?en(a):(O&&/^\d+/.test(a)&&+a>0&&(a=`+${a}`),null==H||H({target:{value:a,name:B}}))},eh=es||et;ee&&(eh=L?`${et} ${ee}`:`${ee} ${et}`);let ep=S&&("number"===Q||"tel"===Q),ej=(0,l.jsx)(tk,{ariaLabel:t,changeValue:(e,t)=>{if(ee&&(e.target.value=e.target.value.replace(ee,"").trim()),e.target.value!==et||"checkbox"===Q){if("number"===Q||"tel"===Q){let t=!e.target.value||""===e.target.value||"  "===e.target.value,a=O?"^([+-.0-9])":"^";e.target.value=e.target.value.replace(",",".");let s=RegExp(`${a}(\\d*)?${T?"(\\.\\d+)?":""}$`).test(e.target.value),n=T&&RegExp(`${a}(\\.|\\d+\\.)?$`).test(e.target.value),l=RegExp(`${a}(\\d+)?\\.(\\d+)?[0]+$`).test(e.target.value),i=/e/.test(`${+e.target.value}`);if(Z&&(b||0===b)&&(eo=RegExp(`${a}(\\d{0,${Z}})(\\${b&&"."}\\d{0,${b}})?$`).test(e.target.value)),(s||t)&&eo)e.target.value=t||O||l||i||"tel"===Q?e.target.value:+e.target.value;else if(!n){e.target.value=et;return}}null==H||H(e),t&&t(e)}},checked:a,current_focus:x,className:M()(ep?"dc-input-wrapper__input":"",N?"input--has-inline-prefix":"","input",{"input--error":j&&!!j.length},o),classNameDynamicSuffix:n,classNameInlinePrefix:r,data_tip:m,data_testid:ea,data_value:h,display_value:eh,fractional_digits:b,has_error:el,id:f,inline_prefix:N,is_autocomplete_disabled:C,is_disabled:k,is_hj_whitelisted:E,is_incrementable:ep,is_read_only:R,max_length:Z,name:B,onBlur:$,onClick:q,onKeyPressed:e=>{38===e.keyCode&&e_(),40===e.keyCode&&ex()},placeholder:Y,required:W,setCurrentFocus:J,type:Q,inputmode:D}),ev=(0,l.jsx)(tC,{id:f,max_is_disabled:ei||!!k,incrementValue:e_,min_is_disabled:er||I&&0>+eu()||!!k,decrementValue:ex,onLongPressEnd:()=>{let e=X?X(es):es;null==H||H({target:{value:e||"",name:B}}),en("")},is_incrementable_on_long_press:A,type:U}),eb=(0,l.jsxs)(tN,{className:M()("trade-container__tooltip",{"dc-tooltip--with-label":F}),alignment:v||"left",message:el?j[0]:null,has_error:el,children:[!!F&&(0,l.jsx)("label",{htmlFor:B,className:"dc-input-field__label",children:F}),!!y&&(0,l.jsx)(V.Z,{size:"xxs",color:"less-prominent",weight:"lighter",children:y}),ep?(0,l.jsxs)("div",{className:M()("dc-input-wrapper",{"dc-input-wrapper--disabled":!!k},c),children:[ev,ej]}):ej]});return(0,l.jsxs)(i.Fragment,{children:[!!K&&(0,l.jsx)("div",{className:d,children:(0,l.jsx)("span",{className:M()(`${d}--symbol`,"symbols"),children:(0,u.O$T)(_)})}),(0,l.jsxs)("div",{className:M()("dc-input-field",s),onClick:G,children:[g&&(0,l.jsx)(g,{onClick:q}),eb]})]})},tT=e=>{let{addToast:t,checkbox_tooltip_label:a,classNameBubble:s,classNameInlinePrefix:n,classNameInput:r,className:o,currency:d,current_focus:c,defaultChecked:_,error_message_alignment:x,error_messages:m,is_disabled:h,is_single_currency:p,is_negative_disabled:j,is_input_hidden:v,label:b,max_value:y,name:g,onChange:f,removeToast:N,setCurrentFocus:C,tooltip_alignment:k,tooltip_label:w,value:T}=e,E=i.useRef(null),S=i.useRef(null),[A,I]=i.useState(_),R=`has_${g}`;i.useEffect(()=>{I(_)},[_]),i.useEffect(()=>{if((0,u.tqC)()){let e=()=>{"function"==typeof N&&N(`${g}__error`)};if((null==m?void 0:m.length)!==void 0&&(null==m?void 0:m.length)>0)return"function"==typeof t&&t({key:`${g}__error`,content:String(m),type:"error"}),()=>{e()}}},[m,t,N,g]);let O=()=>{setTimeout(()=>{var e,t,a,s;let n=null===(a=S.current)||void 0===a?void 0:null===(t=a.nextSibling)||void 0===t?void 0:null===(e=t.querySelector)||void 0===e?void 0:e.call(t,"input.dc-input-wrapper__input");null==n||null===(s=n.focus)||void 0===s||s.call(n)})},M=(0,l.jsx)(tw,{className:o,classNameInlinePrefix:n,classNameInput:r,currency:d,current_focus:c||"",error_messages:m,error_message_alignment:x,is_error_tooltip_hidden:(0,u.tqC)(),is_disabled:!!h,fractional_digits:(0,u.i4S)(d),id:`dc_${g}_input`,inline_prefix:p?d:void 0,is_autocomplete_disabled:!0,is_float:(0,u.i4S)(d)>0,is_hj_whitelisted:!0,is_incrementable:!0,is_negative_disabled:j,max_length:10,max_value:y,name:g,onChange:f,onClickInputWrapper:h?void 0:()=>{!A&&(I(!0),null==f||f({target:{name:R,value:!0}}),O())},type:"number",ariaLabel:"",inputmode:"decimal",value:T,setCurrentFocus:C}),L=(0,l.jsx)(ef,{className:`${g}-checkbox__input`,ref:E,id:`dc_${g}-checkbox_input`,onChange:()=>{let e=!A;null==f||f({target:{name:R,value:e}}),e&&O()},name:R,label:b,classNameLabel:`${g}-checkbox__label`,defaultChecked:_,disabled:h});return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{ref:S,className:"dc-input-wrapper--inline",children:[a?(0,l.jsx)(q,{alignment:"left",classNameBubble:"trade-container__popover",is_bubble_hover_enabled:!0,margin:2,message:a,relative_render:!0,children:L}):(0,l.jsx)(i.Fragment,{children:L}),w&&(0,l.jsx)(q,{alignment:k||"left",classNameBubble:s,icon:"info",id:`dc_${g}-checkbox__tooltip`,is_bubble_hover_enabled:!0,message:w,margin:(0,u.tqC)()||"right"===k?0:216,zIndex:"9999",...(0,u.nIE)()?{relative_render:"left"===k}:{}})]}),!v&&M]})},tE=e=>{let t,a,{addToast:s,contract:n,current_focus:r,error_message_alignment:o,getCardLabels:d,isMobile:c,is_turbos:_,is_accumulator:x,onMouseLeave:m,removeToast:h,setCurrentFocus:p,toggleDialog:j,totalProfit:v}=e;i.useEffect(()=>()=>n.clearContractUpdateConfigValues(),[n]);let{contract_info:b,contract_update_take_profit:g,has_contract_update_take_profit:f,contract_update_stop_loss:N,has_contract_update_stop_loss:C,updateLimitOrder:k,validation_errors:w}=n,[T,E]=i.useState({contract_update_take_profit:g,contract_update_stop_loss:N}),{buy_price:S,currency:A="",is_valid_to_cancel:I,is_sold:R}=b,{stop_loss:O,take_profit:L}=(0,u.gNN)(b.limit_order),{contract_update_stop_loss:D,contract_update_take_profit:U}=w,F={take_profit:f?U:void 0,stop_loss:C?D:void 0},Z=Object.keys(F).some(e=>{var t;return null===(t=F[e])||void 0===t?void 0:t.length}),z=(0,u.L8o)(b.contract_type||"");let P=f?+g>0:null!=(t=z?O:L);let B=C?+N>0:null!=(a=L),X=z?!I&&!!(P||B):!!P,$=e=>{let t=["has_contract_update_take_profit","has_contract_update_stop_loss",e.has_contract_update_take_profit&&"contract_update_take_profit",e.has_contract_update_stop_loss&&"contract_update_stop_loss"];return(0,u.eiS)(e,t)},H=e=>{var t;let{name:a,value:s}=e.target;E({...T,[a]:s}),null===(t=n.onChange)||void 0===t||t.call(n,{name:a,value:s})},q=(0,l.jsx)(tT,{addToast:s,removeToast:h,current_focus:r,classNameBubble:"dc-popover__trade-params",classNameInlinePrefix:"dc-contract-card-dialog__input--currency",currency:A,error_messages:F.take_profit,is_input_hidden:c&&!f,is_single_currency:!0,is_negative_disabled:!0,defaultChecked:f,label:d().TAKE_PROFIT,name:"contract_update_take_profit",onChange:H,error_message_alignment:o||"right",value:T.contract_update_take_profit,is_disabled:z&&!!I,setCurrentFocus:p,tooltip_alignment:c?"left":"right",tooltip_label:(0,l.jsx)(y.Xx,{i18n_default_text:"When your profit reaches or exceeds this amount, your trade will be closed automatically."})}),G=(0,u.CeH)(b),Y=(0,l.jsx)(tT,{addToast:s,removeToast:h,current_focus:r,classNameBubble:"dc-popover__trade-params",classNameInlinePrefix:"dc-contract-card-dialog__input--currency",currency:A,defaultChecked:C,error_messages:F.stop_loss,is_input_hidden:c&&!C,is_single_currency:!0,is_negative_disabled:!0,label:d().STOP_LOSS,max_value:Number(S)-G,name:"contract_update_stop_loss",onChange:H,error_message_alignment:o||"right",value:T.contract_update_stop_loss,is_disabled:!!I,setCurrentFocus:p,tooltip_alignment:c?"left":"right",tooltip_label:(0,l.jsx)(y.Xx,{i18n_default_text:"When your loss reaches or exceeds this amount, your trade will be closed automatically."})});return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(eK.Z,{children:(0,l.jsxs)("div",{className:"dc-contract-card-dialog__total-profit",children:[(0,l.jsx)(V.Z,{color:"less-prominent",size:"xs",weight:"bold",children:d().TOTAL_PROFIT_LOSS}),(0,l.jsxs)("div",{className:M()("dc-contract-card__profit-loss dc-contract-card-item__total-profit-loss-value",{"dc-contract-card__profit-loss--is-crypto":(0,u.oS6)(A),"dc-contract-card__profit-loss--negative":v<0,"dc-contract-card__profit-loss--positive":v>0}),children:[(0,l.jsx)(e7.Z,{amount:v,currency:A,show_currency:!0}),!R&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:v})]})]})}),(0,l.jsxs)("div",{className:M()("dc-contract-card-dialog__form",{"dc-contract-card-dialog__form--no-stop-loss":x||_}),children:[(0,l.jsx)("div",{className:"dc-contract-card-dialog__input",children:q}),z&&(0,l.jsx)("div",{className:"dc-contract-card-dialog__input",children:Y}),(0,l.jsx)("div",{className:"dc-contract-card-dialog__button",children:(0,l.jsx)(tg.z,{onClick:e=>{k(),j(e),null==m||m()},disabled:Z||!X||(0,u.xb4)($((0,u.W9k)(b)),$(e.contract)),isFullWidth:!0,children:d().APPLY})})]})]})},tS=e=>{let{addToast:t,contract_id:a,getCardLabels:s,getContractById:n,is_valid_to_cancel:r,should_show_cancellation_warning:o,toggleCancellationWarning:d,...c}=e,[_,x]=i.useState(!1),[m,h]=i.useState(0),[p,j]=i.useState(0),v=i.useRef(null),b=i.useRef(null),y=n(Number(a));i.useEffect(()=>{if(_&&(null==v?void 0:v.current)&&(null==b?void 0:b.current)){let e=v.current.getBoundingClientRect(),t=b.current.getBoundingClientRect(),a=document.body.getBoundingClientRect(),{top:s}=e,{right:n}=e;s+(null==t?void 0:t.height)>a.height&&(s-=(null==t?void 0:t.height)-e.height),n+(null==t?void 0:t.width)>a.width?j(n-(null==t?void 0:t.width)-16):j(n-16),h(s)}},[_]);let g=e=>{e.preventDefault(),e.stopPropagation(),(0,u.tqC)()&&o&&r&&t({key:"deal_cancellation_active",content:s().TAKE_PROFIT_LOSS_NOT_AVAILABLE,type:"error"}),!r&&x(!_)},f=i.useCallback(g,[g]),N=(0,l.jsx)("div",{className:"dc-contract-card-dialog-toggle__icon",children:(0,l.jsx)(tv.Z,{height:12,width:12})});return(0,l.jsxs)("div",{onClick:e=>{e.stopPropagation()},children:[r&&o&&(0,u.nIE)()?(0,l.jsx)(q,{alignment:"right",classNameBubble:"dc-contract-card-dialog__popover-bubble",className:"dc-contract-card-dialog__popover",is_bubble_hover_enabled:!0,margin:2,zIndex:"2",message:s().TAKE_PROFIT_LOSS_NOT_AVAILABLE,onBubbleClose:()=>{null==d||d()},children:(0,l.jsx)("button",{ref:v,className:"dc-contract-card-dialog-toggle",onClick:f,children:N})}):(0,l.jsx)("button",{ref:v,className:"dc-contract-card-dialog-toggle",onClick:f,children:N}),(0,l.jsx)(eK.Z,{children:(0,l.jsx)(tb.Z,{portal_element_id:"modal_root",visible:_,onClose:f,wrapper_classname:"contract-update",children:(0,l.jsx)(eP.Z,{className:"contract-update__wrapper",height_offset:"40px",children:(0,l.jsx)(tE,{addToast:t,contract:y,getCardLabels:s,getContractById:n,isMobile:!0,toggleDialog:f,...c})})})}),(0,l.jsx)(ts.Z,{children:(0,l.jsx)(ty,{ref:b,is_visible:_,left:p,top:m,toggle_ref:v,toggleDialog:f,children:(0,l.jsx)(tE,{addToast:t,contract:y,getCardLabels:s,getContractById:n,toggleDialog:f,...c})})})]})};tS.displayName="ToggleCardDialog";let tA=i.memo(tS),tI=i.memo(e=>{let t,a,{contract_info:s,contract_update:n,currency:r,getCardLabels:o,indicative:d,is_sold:c,is_positions:_,...x}=e,{buy_price:m,profit:h,limit_order:p,sell_price:j}=s,{take_profit:v}=(0,u.gNN)(n||p),b=(0,u.iBr)(s),{CONTRACT_VALUE:y,STAKE:g,TAKE_PROFIT:f,TOTAL_PROFIT_LOSS:N}=o();return h&&(t=+h>0,a=0>+h),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper",children:[(0,l.jsx)(tj,{header:g,className:"dc-contract-card__stake",children:(0,l.jsx)(e7.Z,{amount:m,currency:r})}),(0,l.jsxs)(tj,{header:y,className:"dc-contract-card__current-stake",children:[(0,l.jsx)("div",{className:M()({"dc-contract-card--profit":t,"dc-contract-card--loss":a}),children:(0,l.jsx)(e7.Z,{amount:j||d,currency:r})}),!c&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:j||d})]}),(0,l.jsxs)(tj,{header:N,is_crypto:(0,u.oS6)(r),is_loss:a,is_won:t,children:[(0,l.jsx)(e7.Z,{amount:h,currency:r}),!c&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:h})]}),(0,l.jsxs)(tj,{header:f,className:"dc-contract-card__take-profit",children:[v?(0,l.jsx)(e7.Z,{amount:v,currency:r}):(0,l.jsx)("strong",{children:"-"}),b&&(0,l.jsx)(tA,{contract_id:s.contract_id,getCardLabels:o,is_accumulator:!0,...x})]})]}),!!c&&(0,l.jsx)(eK.Z,{children:(0,l.jsx)("div",{className:M()("dc-contract-card__status",{"dc-contract-card__status--accumulator-mobile-positions":_}),children:(0,l.jsx)(tp,{getCardLabels:o,is_contract_won:t})})})]})}),tR=i.memo(e=>{var t,a;let s,{contract_info:n,currency:r,is_sold:o,indicative:d,progress_slider_mobile_el:c}=e,{buy_price:_,contract_type:x,sell_price:m,profit:h,multiplier:p}=n,{INDICATIVE_PRICE:j,MULTIPLIER:v,PROFIT_LOSS:b,POTENTIAL_PROFIT_LOSS:g,PAYOUT:f,PURCHASE_PRICE:N}=(0,u.gk9)();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper dc-contract-card--lookbacks",children:[(0,l.jsxs)(tj,{header:o?b:g,is_crypto:(0,u.oS6)(r),is_loss:0>Number(h),is_won:Number(h)>0,children:[(0,l.jsx)(e7.Z,{amount:h,currency:r}),!o&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:h})]}),(0,l.jsxs)(tj,{header:o?f:j,children:[(0,l.jsx)(e7.Z,{currency:r,amount:Number(m||d)}),!o&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:Number(m||d)})]}),(0,l.jsx)(tj,{header:N,children:(0,l.jsx)(e7.Z,{amount:_,currency:r})}),(0,l.jsx)(tj,{header:v,children:`x${p}`}),(0,l.jsx)(eK.Z,{children:(0,l.jsx)("div",{className:"dc-contract-card__status",children:o?(0,l.jsx)(tp,{getCardLabels:u.gk9,is_contract_won:"won"===(0,u.efd)(n)}):c})})]}),(0,l.jsx)(tj,{className:"dc-contract-card-item__payout-limit",children:(0,l.jsx)(V.Z,{align:"center",lineHeightt:"l",size:"xxs",children:(t=x,a=p,s="",t===u.FTx.LB_PUT?s=(0,l.jsx)(y.Xx,{i18n_default_text:"(High - Close)"}):t===u.FTx.LB_CALL?s=(0,l.jsx)(y.Xx,{i18n_default_text:"(Close - Low)"}):t===u.FTx.LB_HIGH_LOW&&(s=(0,l.jsx)(y.Xx,{i18n_default_text:"(High - Low)"})),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(y.Xx,{i18n_default_text:"Payout limit: {{multiplier}} x ",values:{multiplier:a}}),s]}))})})]})}),tO=e=>{let{contract_info:t,contract_update:a,currency:s,getCardLabels:n,has_progress_slider:r,progress_slider:o,is_mobile:d,is_sold:c,should_show_cancellation_warning:_,toggleCancellationWarning:x,...m}=e,{buy_price:h,bid_price:p,limit_order:j}=t,{take_profit:v,stop_loss:b}=(0,u.gNN)(a||j),y=(0,u.CeH)(t),g=(0,u.Dlf)(t),f=(0,u.iBr)(t),N=(0,u.vMw)(t),{CONTRACT_COST:C,CONTRACT_VALUE:k,DEAL_CANCEL_FEE:w,STAKE:T,STOP_LOSS:E,TAKE_PROFIT:S,TOTAL_PROFIT_LOSS:A}=n();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:M()({"dc-contract-card-items-wrapper--mobile":d,"dc-contract-card-items-wrapper":!d,"dc-contract-card-items-wrapper--has-progress-slider":r&&!c}),children:[(0,l.jsx)(tj,{header:C,className:"dc-contract-card__stake",children:(0,l.jsx)(e7.Z,{amount:h-y,currency:s})}),(0,l.jsxs)(tj,{header:k,className:"dc-contract-card__current-stake",children:[(0,l.jsx)("div",{className:M()({"dc-contract-card--profit":N>0,"dc-contract-card--loss":N<0}),children:(0,l.jsx)(e7.Z,{amount:p,currency:s})}),!c&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:N})]}),(0,l.jsx)(tj,{header:w,className:M()("dc-contract-card__deal-cancel-fee",{"dc-contract-card__deal-cancel-fee__disabled":!y}),children:y?(0,l.jsx)(e7.Z,{amount:y,currency:s}):(0,l.jsx)(i.Fragment,{children:"-"})}),(0,l.jsx)(tj,{header:T,className:"dc-contract-card__buy-price",children:(0,l.jsx)(e7.Z,{amount:h,currency:s})}),r&&d&&!c&&(0,l.jsx)(tj,{className:"dc-contract-card__date-expiry",children:o}),(0,l.jsxs)("div",{className:"dc-contract-card__limit-order-info",children:[(0,l.jsx)(tj,{header:S,className:"dc-contract-card__take-profit",children:v?(0,l.jsx)(e7.Z,{amount:v,currency:s}):(0,l.jsx)("strong",{children:"-"})}),(0,l.jsx)(tj,{header:E,className:"dc-contract-card__stop-loss",children:b?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("strong",{children:"-"}),(0,l.jsx)(e7.Z,{amount:b,currency:s})]}):(0,l.jsx)("strong",{children:"-"})}),(f||g)&&(0,l.jsx)(tA,{contract_id:t.contract_id,getCardLabels:n,is_valid_to_cancel:g,should_show_cancellation_warning:_,toggleCancellationWarning:x,...m})]})]}),(0,l.jsxs)(tj,{className:"dc-contract-card-item__total-profit-loss",header:A,is_crypto:(0,u.oS6)(s),is_loss:N<0,is_won:N>0,children:[(0,l.jsx)(e7.Z,{amount:Math.abs(N),currency:s}),!c&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:N})]})]})};tO.propTypes={addToast:ez().func,contract_info:ez().object,contract_update:ez().object,currency:ez().string,current_focus:ez().string,error_message_alignment:ez().string,getCardLabels:ez().func,getContractById:ez().func,is_mobile:ez().bool,is_sold:ez().bool,onMouseLeave:ez().func,progress_slider:ez().node,removeToast:ez().func,setCurrentFocus:ez().func,should_show_cancellation_warning:ez().bool,toggleCancellationWarning:ez().func,totalProfit:ez().number.isRequired,has_progress_slider:ez().bool};let tM=i.memo(tO),tL=i.memo(e=>{let{contract_info:t,contract_update:a,currency:s,getCardLabels:n,is_sold:r,progress_slider_mobile_el:o,...d}=e,{bid_price:c,buy_price:_,profit:x,barrier:m,entry_spot_display_value:h,limit_order:p={},sell_price:j}=t,{take_profit:v}=(0,u.gNN)(a||p),b=(0,u.iBr)(t),y=r?j:c,{BARRIER:g,CONTRACT_VALUE:f,ENTRY_SPOT:N,TAKE_PROFIT:C,TOTAL_PROFIT_LOSS:k,STAKE:w}=n();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:M()("dc-contract-card-items-wrapper dc-contract-card--turbos"),children:[(0,l.jsx)(tj,{className:"dc-contract-card__buy-price",is_crypto:(0,u.oS6)(s),header:w,children:(0,l.jsx)(e7.Z,{amount:_,currency:s})}),(0,l.jsxs)(tj,{header:f,className:"dc-contract-card__contract-value",children:[(0,l.jsx)("div",{className:M()({"dc-contract-card--profit":Number(x)>0,"dc-contract-card--loss":0>Number(x)}),children:(0,l.jsx)(e7.Z,{amount:y,currency:s})}),!r&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:j||y})]}),(0,l.jsx)(tj,{header:N,is_crypto:(0,u.oS6)(s),className:"dc-contract-card__entry-spot",children:(0,u.oC5)(h)}),(0,l.jsx)("div",{className:"dc-contract-card__limit-order-info",children:(0,l.jsxs)(tj,{header:C,className:"dc-contract-card__take-profit",children:[v?(0,l.jsx)(e7.Z,{amount:v,currency:s}):(0,l.jsx)("strong",{children:"-"}),b&&(0,l.jsx)(tA,{contract_id:t.contract_id,getCardLabels:n,is_turbos:!0,...d})]})}),(0,l.jsx)(tj,{header:g,className:"dc-contract-card__barrier-level",children:(0,u.oC5)(m)}),(0,l.jsx)(eK.Z,{children:(0,l.jsx)("div",{className:"dc-contract-card__status",children:r?(0,l.jsx)(tp,{getCardLabels:n,is_contract_won:!!x&&x>0}):o})})]}),(0,l.jsxs)(tj,{className:"dc-contract-card-item__total-profit-loss",header:k,is_crypto:(0,u.oS6)(s),is_loss:0>Number(x),is_won:Number(x)>0,children:[(0,l.jsx)(e7.Z,{amount:x,currency:s}),!r&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:x})]})]})}),tD=i.memo(e=>{let{contract_info:t,currency:a,getCardLabels:s,is_sold:n,progress_slider:r}=e,{buy_price:o,bid_price:d,entry_spot_display_value:c,barrier:_,sell_price:x,profit:m}=t,h=n?x:d,{CONTRACT_VALUE:p,ENTRY_SPOT:j,STAKE:v,STRIKE:b,TOTAL_PROFIT_LOSS:y}=s();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)(ts.Z,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper",children:[(0,l.jsx)(tj,{header:v,children:(0,l.jsx)(e7.Z,{amount:o,currency:a})}),(0,l.jsxs)(tj,{className:"dc-contract-card-item__contract-value",header:p,children:[(0,l.jsx)("div",{className:M()({"dc-contract-card--profit":Number(m)>0,"dc-contract-card--loss":0>Number(m)}),children:(0,l.jsx)(e7.Z,{amount:h,currency:a})}),!n&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:x||h})]}),(0,l.jsx)(tj,{header:j,children:c&&(0,u.oC5)(c)}),(0,l.jsx)(tj,{header:b,children:_&&(0,u.oC5)(_)})]}),(0,l.jsxs)(tj,{className:"dc-contract-card-item__total-profit-loss",header:y,is_crypto:(0,u.oS6)(a),is_loss:0>Number(m),is_won:Number(m)>0,children:[(0,l.jsx)(e7.Z,{amount:m,currency:a}),!n&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:m})]})]}),(0,l.jsx)(eK.Z,{children:(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper--mobile",children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper-group",children:[(0,l.jsx)(tj,{header:v,children:(0,l.jsx)(e7.Z,{amount:o,currency:a})}),(0,l.jsx)(tj,{header:j,children:c&&(0,u.oC5)(c)})]}),(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper-group",children:[(0,l.jsxs)(tj,{header:p,children:[(0,l.jsx)("div",{className:M()({"dc-contract-card--profit":Number(m)>0,"dc-contract-card--loss":0>Number(m)}),children:(0,l.jsx)(e7.Z,{amount:h,currency:a})}),!n&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:x||h})]}),(0,l.jsx)(tj,{header:b,children:_&&(0,u.oC5)(_)})]}),n?(0,l.jsx)(tp,{getCardLabels:s,is_contract_won:"won"===(0,u.efd)(t)}):r,(0,l.jsxs)(tj,{className:"dc-contract-card-item__total-profit-loss",header:y,is_crypto:(0,u.oS6)(a),is_loss:0>Number(m),is_won:Number(m)>0,children:[(0,l.jsx)(e7.Z,{amount:m,currency:a}),!n&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:m})]})]})})]})}),tU=e=>{let{contract_info:t,getCardLabels:a,is_sell_requested:s,onClickSell:n}=e,r=(0,u.iBr)(t),o=((0,u._mr)(t)||(0,u.s0r)((null==t?void 0:t.shortcode)??"",t.purchase_time))&&(0,u.FJ7)(t);return o?(0,l.jsx)(i.Fragment,{children:r?(0,l.jsx)(tg.z,{className:M()("dc-btn--sell",{"dc-btn--loading":s}),"data-testid":"dt_contract_card_sell",disabled:s,onClick:e=>{null==n||n(t.contract_id),e.stopPropagation(),e.preventDefault()},variant:"outlined",children:a().SELL}):(0,l.jsx)("div",{className:"dc-contract-card__no-resale-msg",children:a().RESALE_NOT_OFFERED})}):null},tF=e=>{let{className:t,contract_info:a,getCardLabels:s,is_sell_requested:n,onClickCancel:r,onClickSell:o,server_time:d}=e,{contract_id:c,cancellation:{date_expiry:_}={},profit:x}=a,m=(0,u.Dlf)(a);return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(tg.z,{id:`dc_contract_card_${c}_button`,className:M()(t,{"dc-btn--loading":n}),disabled:n||0>Number(x)&&m,onClick:e=>{o(c),e.stopPropagation(),e.preventDefault()},variant:"outlined",children:s().CLOSE}),m&&(0,l.jsxs)(tg.z,{id:`dc_contract_card_${c}_cancel_button`,className:"dc-btn--cancel",disabled:Number(x)>=0,onClick:e=>{r(c),e.stopPropagation(),e.preventDefault()},variant:"outlined",children:[s().CANCEL,_&&(0,l.jsx)(tc,{end_time:_,format:"mm:ss",getCardLabels:s,start_time:d})]})]})},tZ=e=>{let{current_tick:t,getCardLabels:a,ticks_count:s}=e,n=Array.from(Array(s).keys());return(0,l.jsxs)("div",{className:"dc-progress-slider__ticks",children:[(0,l.jsxs)(V.Z,{styles:{lineHeight:"18px"},size:"xxs",className:"dc-progress-slider__ticks-caption",children:[a().TICK," ",t]}),(0,l.jsx)("div",{className:"dc-progress-slider__ticks-wrapper",children:n.map(e=>(0,l.jsx)("div",{className:M()("dc-progress-slider__ticks-step",{"dc-progress-slider__ticks-step--marked":e+1<=Number(t)})},e))})]})},tz=e=>{let{className:t,current_tick:a,expiry_time:s,getCardLabels:n,is_loading:r,server_time:o,start_time:d,ticks_count:c}=e,_=(0,u.dq6)(o,Number(d),Number(s));return(0,l.jsx)("div",{className:M()("dc-progress-slider",t),children:c?(0,l.jsx)(tZ,{current_tick:a,getCardLabels:n,ticks_count:c}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(V.Z,{size:"xxxs",className:"dc-progress-slider__remaining-time",children:(0,l.jsx)(tc,{end_time:s,getCardLabels:n,start_time:o})}),r||_<1?(0,l.jsx)("div",{className:"dc-progress-slider__infinite-loader",children:(0,l.jsx)("div",{className:"dc-progress-slider__infinite-loader--indeterminate"})}):(0,l.jsx)("div",{className:"dc-progress-slider__track",children:(0,l.jsx)("div",{className:M()("dc-progress-slider__line",{"dc-progress-slider__line--green":_>=50,"dc-progress-slider__line--yellow":_<50&&_>=20,"dc-progress-slider__line--red":_<20}),style:{width:`${_}%`}})})]})})},tP=e=>{let{displayed_trade_param:t,getContractTypeDisplay:a,is_high_low:s,is_multipliers:n,is_turbos:i,type:r=""}=e,o="";return s&&(o="CALL"===r?"HIGHER":"LOWER"),(0,l.jsxs)("div",{className:"dc-contract-type",children:[(0,l.jsx)("div",{className:"dc-contract-type__type-wrapper",children:(0,l.jsx)(Y,{type:s&&!(0,u.Yeo)(r)?o:r,className:"category-type",size:"md"})}),(0,l.jsxs)("div",{className:M()("dc-contract-type__type-label",{"dc-contract-type__type-label--smarttrader-contract":(0,u.xGd)(r),"dc-contract-type__type-label--lookbacks-contract":(0,u.vxy)(r),"dc-contract-type__type-label--multipliers":n}),children:[(0,l.jsx)("div",{children:a(r,{isHighLow:s,showMainTitle:n||i})||""}),t&&(0,l.jsx)("div",{className:"dc-contract-type__type-label-trade-param",children:t})]})]})},tB=i.memo(e=>{let{current_tick:t,label:a}=e;return(0,l.jsx)("div",{className:"dc-tick-counter-bar__container",children:(0,l.jsx)("div",{className:"dc-tick-counter-bar__track",children:(0,l.jsx)(V.Z,{size:"xxs",weight:"bold",align:"center",color:"profit-success",className:"dc-tick-counter-bar__text",children:`${t} ${a}`})})})}),tX=e=>{let{currency:t,contract_id:a,getCardLabels:s,getContractPath:n,is_positions:r,is_visible:o,onClickRemove:d,payout_info:c,result:_}=e,u="won"===_;return(0,l.jsx)(i.Fragment,{children:(0,l.jsx)(eS.Z,{in:o,timeout:250,classNames:{enter:"dc-contract-card__result--enter",enterDone:"dc-contract-card__result--enter-done",exit:"dc-contract-card__result--exit"},unmountOnExit:!0,children:(0,l.jsxs)("div",{id:`dc_contract_card_${a}_result`,className:M()("dc-contract-card__result",{"dc-result__positions-overlay":r,"dc-contract-card__result--won":u,"dc-contract-card__result--lost":!u}),children:[r&&(0,l.jsx)("span",{id:`dc_contract_card_${a}_result_close_icon`,className:"dc-result__close-btn",onClick:()=>{a&&(null==d||d(a))}}),n&&(0,l.jsx)(e_.OL,{className:"dc-result__caption-wrapper",to:n(a)}),(0,l.jsxs)("div",{className:"dc-result__content",children:[(0,l.jsx)(tp,{getCardLabels:s,is_contract_won:u}),(0,l.jsx)(V.Z,{weight:"bold",size:"s",lineHeight:"2xl",color:u?"profit-success":"loss-danger",children:(0,l.jsx)(e7.Z,{amount:c,currency:t,has_sign:!0,show_currency:!0})})]})]})})})},t$=e=>{let{children:t,contract_info:a,getCardLabels:s,getContractPath:n,is_multiplier:r,is_positions:o,onClickRemove:d,profit_loss:c,result:_,should_show_result_overlay:u}=e,x=r?(0,ta.vM)(a):c;return(0,l.jsxs)(i.Fragment,{children:[u&&(0,l.jsx)(ts.Z,{children:(0,l.jsx)(tX,{contract_id:a.contract_id,currency:a.currency,getCardLabels:s,getContractPath:n,is_multiplier:r,is_visible:!!a.is_sold,onClickRemove:d,payout_info:x,result:_||(c>=0?"won":"lost"),is_positions:o})}),t]})};t$.Header=e=>{var t;let{contract_info:a,display_name:s,getCardLabels:n,getContractTypeDisplay:r,has_progress_slider:o,id:d,is_sell_requested:c,is_sold:_,is_valid_to_sell:x,onClickSell:m,server_time:h}=e,p=a.tick_count?(0,u.v3q)(a):null,{growth_rate:j,underlying:v,multiplier:b,contract_type:y,shortcode:f,purchase_time:N,date_expiry:C,tick_count:k,tick_passed:w}=a,T=!!a.is_sold||_,E=(0,u.XtD)(y),S=(0,u.xGd)(y),{isMobile:A}=(0,g.F)(),I=(0,u.MOe)(y),R=(0,u.L8o)(y),O=(0,u.CY$)({shortcode:f}),L=(null===(t=i.useMemo(()=>[{is_param_displayed:R,displayed_param:`${r(y??"",{isHighLow:O})} x${b}`.trim()},{is_param_displayed:E,displayed_param:`${(0,u.dR9)(j||0)}%`},{is_param_displayed:I,displayed_param:(0,u.Lp7)(y)}],[y,j,b,E,R,I,O]).find(e=>e.is_param_displayed))||void 0===t?void 0:t.displayed_param)||"";return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:M()("dc-contract-card__grid","dc-contract-card__grid-underlying-trade",{"dc-contract-card__grid-underlying-trade--trader":false,"dc-contract-card__grid-underlying-trade--trader--accumulator":false,"dc-contract-card__grid-underlying-trade--trader--sold":(E||I||R)&&T}),children:[(0,l.jsxs)("div",{id:"dc-contract_card_underlying_label",className:M()("dc-contract-card__underlying-name",{"dc-contract-card__underlying-name--accumulator":E}),children:[(0,l.jsx)(z,{type:v??"",size:"md"}),(0,l.jsx)(V.Z,{size:"xxs",className:M()("dc-contract-card__symbol",{"dc-contract-card__symbol--smarttrader-contract":S}),weight:"bold",children:s||a.display_name})]}),(0,l.jsx)("div",{id:"dc-contract_card_type_label",className:M()("dc-contract-card__type",{"dc-contract-card__type--accumulators":E}),children:(0,l.jsx)(tP,{displayed_trade_param:L,getContractTypeDisplay:r,is_high_low:O,is_multipliers:R,is_turbos:I,type:y})}),(0,l.jsx)(eK.Z,{children:x?(0,l.jsx)(eS.Z,{in:!!x,timeout:250,classNames:{enter:"dc-contract-card__sell-button--enter",enterDone:"dc-contract-card__sell-button--enter-done",exit:"dc-contract-card__sell-button--exit"},unmountOnExit:!0,children:(0,l.jsx)("div",{className:"dc-contract-card__sell-button-mobile",children:(0,l.jsx)(tg.z,{id:`dc_contract_card_${d}_button`,className:M()("dc-btn--sell",{"dc-btn--loading":c}),disabled:!x||c,onClick:()=>m(d),variant:"outlined",children:n().SELL})})}):null})]}),!T&&E&&(0,l.jsx)(tB,{current_tick:w,label:n().TICKS}),(0,l.jsx)(eK.Z,{children:(0,l.jsx)("div",{className:"dc-progress-slider--completed"})}),(0,l.jsxs)(ts.Z,{children:[(!o||!!T)&&(0,l.jsx)("div",{className:"dc-progress-slider--completed"}),o&&!T&&!E&&(0,l.jsx)(tz,{current_tick:p,expiry_time:C,getCardLabels:n,is_loading:!1,server_time:h,start_time:N,ticks_count:k})]})]})},t$.Body=e=>{let t,{addToast:a,contract_info:s,contract_update:n,currency:r,current_focus:o,error_message_alignment:d,getCardLabels:c,getContractById:_,has_progress_slider:x,is_accumulator:m,is_mobile:h,is_multiplier:p,is_positions:j,is_sold:v,is_turbos:b,is_vanilla:y,is_lookbacks:g,onMouseLeave:f,removeToast:N,server_time:C,setCurrentFocus:k,should_show_cancellation_warning:w,toggleCancellationWarning:T}=e,E=(0,u.Kq_)(s),{buy_price:S,sell_price:A,payout:I,profit:R,tick_count:O,date_expiry:L,purchase_time:D}=s,U=O?(0,u.v3q)(s):null,{CONTRACT_VALUE:F,POTENTIAL_PAYOUT:Z,TOTAL_PROFIT_LOSS:z,STAKE:P}=c(),B=(0,l.jsx)(tm,{current_tick:U,expiry_time:L,getCardLabels:c,is_loading:!1,server_time:C,start_time:D,ticks_count:O}),X={addToast:a,current_focus:o,error_message_alignment:d,getContractById:_,onMouseLeave:f,removeToast:N,setCurrentFocus:k,totalProfit:p&&!isNaN(Number(R))?(0,u.vMw)(s):Number(R)};return t=p?(0,l.jsx)(tM,{contract_info:s,contract_update:n,currency:r,getCardLabels:c,has_progress_slider:x,progress_slider:B,is_mobile:h,is_sold:v,should_show_cancellation_warning:w,toggleCancellationWarning:T,...X}):m?(0,l.jsx)(tI,{contract_info:s,contract_update:n,currency:r,getCardLabels:c,indicative:E,is_sold:v,is_positions:j,...X}):b?(0,l.jsx)(tL,{contract_info:s,contract_update:n,currency:r,getCardLabels:c,is_sold:v,progress_slider_mobile_el:B,...X}):y?(0,l.jsx)(tD,{contract_info:s,currency:r,getCardLabels:c,is_sold:v,progress_slider:B}):g?(0,l.jsx)(tR,{contract_info:s,currency:r,is_sold:v,indicative:E,progress_slider_mobile_el:B}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"dc-contract-card-items-wrapper",children:[(0,l.jsxs)(tj,{header:z,is_crypto:(0,u.oS6)(r),is_loss:0>Number(R),is_won:Number(R)>0,children:[(0,l.jsx)(e7.Z,{amount:R,currency:r}),!v&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:R})]}),(0,l.jsxs)(tj,{header:F,children:[(0,l.jsx)("div",{className:M()({"dc-contract-card--profit":Number(R)>0,"dc-contract-card--loss":0>Number(R)}),children:(0,l.jsx)(e7.Z,{currency:r,amount:Number(A||E)})}),!v&&(0,l.jsx)(ti,{className:"dc-contract-card__indicative--movement",value:Number(A||E)})]}),(0,l.jsx)(tj,{header:P,children:(0,l.jsx)(e7.Z,{amount:S,currency:r})}),(0,l.jsx)(tj,{header:Z,children:(0,l.jsx)(e7.Z,{currency:r,amount:I})})]}),(0,l.jsx)(eK.Z,{children:(0,l.jsx)("div",{className:"dc-contract-card__status",children:v?(0,l.jsx)(tp,{getCardLabels:c,is_contract_won:"won"===(0,u.efd)(s)}):B})})]}),(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(tr,{currency:r}),(0,l.jsx)(ts.Z,{children:t}),(0,l.jsx)(eK.Z,{children:(0,l.jsx)("div",{className:M()("dc-contract-card__separatorclass",{"dc-contract-card__body-wrapper":!p&&!b&&!g}),children:t})})]})},t$.Footer=e=>{let{contract_info:t,getCardLabels:a,is_multiplier:s,is_positions:n,is_sell_requested:r,is_lookbacks:o,onClickCancel:d,onClickSell:c,onFooterEntered:_,server_time:x,should_show_transition:m}=e,{in_prop:h}=(0,u.hwq)(!!m),p=(0,u.Dlf)(t),j=(0,u._mr)(t)&&(0,u.FJ7)(t),v=o&&(0,u.iBr)(t)&&j;return j?(0,l.jsx)(eS.Z,{in:h,timeout:m?250:0,classNames:m?{enter:"dc-contract-card__sell-button--enter",enterDone:"dc-contract-card__sell-button--enter-done",exit:"dc-contract-card__sell-button--exit"}:{},onEntered:_,unmountOnExit:!0,children:(0,l.jsx)("div",{className:"dc-contract-card-item__footer",children:s?(0,l.jsx)("div",{className:M()("dc-contract-card__sell-button",{"dc-contract-card__sell-button--has-cancel-btn":p,"dc-contract-card__sell-button--positions":n}),children:(0,l.jsx)(tF,{className:"dc-btn--sell",contract_info:t,getCardLabels:a,is_sell_requested:r,onClickCancel:d,onClickSell:c,server_time:x})}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:M()("dc-contract-card__sell-button",{"dc-contract-card__sell-button--positions":n}),children:(0,l.jsx)(tU,{contract_info:t,is_sell_requested:r,getCardLabels:a,onClickSell:c})}),v&&(0,l.jsx)(V.Z,{as:"div",size:"xxxs",color:"less-prominent",lineHeight:"s",className:"lookbacks--note",children:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Note:</0> Contract will be sold at the prevailing market price when the request is received by our servers. This price may differ from the indicated price.",components:[(0,l.jsx)("strong",{},0)]})})]})})}):null},t$.Loader=tt,t$.ContractTypeCell=tP,t$.MultiplierCloseActions=tF,t$.Sell=tU;let tH=(0,r.Pi)(e=>{let{contract_info:t,is_contract_loading:a,is_bot_running:s}=e,{summary_card:n,run_panel:r,ui:o,common:d}=(0,h.oR)(),{is_contract_completed:c,is_contract_inactive:_,is_multiplier:x,is_accumulator:m,setIsBotRunning:p}=n,{onClickSell:j,is_sell_requested:v,contract_stage:b}=r,{addToast:f,current_focus:N,removeToast:C,setCurrentFocus:k}=o,{server_time:w}=d,{isDesktop:T}=(0,g.F)();i.useEffect(()=>p(),[a]);let E=(0,l.jsx)(t$.Header,{contract_info:t,getCardLabels:u.gk9,getContractTypeDisplay:e4.h8,has_progress_slider:!x,is_sold:c,server_time:w}),S=(0,l.jsx)(t$.Body,{addToast:f,contract_info:t,currency:(null==t?void 0:t.currency)??"",current_focus:N,error_message_alignment:"left",getCardLabels:u.gk9,getContractById:()=>n,is_mobile:!T,is_multiplier:x,is_accumulator:m,is_sold:c,removeToast:C,server_time:w,setCurrentFocus:k}),A=(0,l.jsx)(t$.Footer,{contract_info:t,getCardLabels:u.gk9,is_multiplier:x,is_sell_requested:v,onClickSell:j}),I=(0,l.jsxs)(i.Fragment,{children:[E,S,A]});return(0,l.jsxs)("div",{className:M()("db-summary-card",{"db-summary-card--mobile":!T,"db-summary-card--inactive":_&&!a&&!t,"db-summary-card--completed":c,"db-summary-card--completed-mobile":c&&!T,"db-summary-card--delayed-loading":s}),"data-testid":"dt_mock_summary_card",children:[a&&!s&&(0,l.jsx)(tt,{speed:2}),s&&(0,l.jsx)(tt,{speed:2,contract_stage:b}),!a&&t&&!s&&(0,l.jsx)(t$,{contract_info:t,getCardLabels:u.gk9,is_multiplier:x,profit_loss:t.profit,should_show_result_overlay:!0,children:(0,l.jsx)("div",{className:M()("dc-contract-card",{"dc-contract-card--green":t.profit>0,"dc-contract-card--red":t.profit<0}),children:I})}),!a&&!t&&!s&&(0,l.jsxs)(V.Z,{as:"p",align:"center",lineHeight:"s",size:"xs",children:[(0,y.NC)("When youre ready to trade, hit "),(0,l.jsx)("strong",{className:"summary-panel-inactive__strong",children:(0,y.NC)("Run")}),(0,y.NC)(". Youll be able to track your bots performance here.")]})]})}),tV=(0,r.Pi)(e=>{let{is_drawer_open:t}=e,{dashboard:a,summary_card:s}=(0,h.oR)(),{is_contract_loading:n,contract_info:i,is_bot_running:r}=s,{active_tour:o}=a,{isDesktop:d}=(0,g.F)();return(0,l.jsx)("div",{className:M()({"run-panel-tab__content":d,"run-panel-tab__content--mobile":!d&&t,"run-panel-tab__content--summary-tab":d&&t||o}),"data-testid":"mock-summary",children:(0,l.jsx)(ed.Z,{className:M()({summary:!n&&!i||r,"summary--loading":!d&&n||!d&&!n&&i}),children:(0,l.jsx)(tH,{is_contract_loading:n,contract_info:i,is_bot_running:r})})})});var tq=a("71766"),tG=a("54176");let tY=e=>{let{profit:t}=e,a=t>=0;return(0,l.jsx)("div",{className:M()("db-contract-card__result",{"db-contract-card__result--won":a,"db-contract-card__result--lost":!a}),children:(0,l.jsx)(V.Z,{weight:"bold",className:"db-contract-card__result-caption",children:a?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(y.Xx,{i18n_default_text:"Won"}),(0,l.jsx)(tq.Z,{className:"db-contract-card__result-icon",color:"green"})]}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(y.Xx,{i18n_default_text:"Lost"}),(0,l.jsx)(tG.Z,{className:"db-contract-card__result-icon",color:"red"})]})})})};var tK=a("24335"),tW=a("16854"),tJ=a("67109"),tQ=a("89057");let t0=e=>{let{className:t}=e;return(0,l.jsxs)("div",{className:M()("circular-wrapper",t),children:[(0,l.jsx)("span",{className:"static-circle"}),(0,l.jsx)("span",{className:"dynamic-circle"})]})},t1=Object.freeze({NOT_RUNNING:"Bot is not running",STARTING:"Bot is starting",RUNNING:"Bot running",PURCHASE_SENT:"Buying contract",PURCHASE_RECEIVED:"Contract bought",IS_STOPPING:"Bot is stopping",CONTRACT_CLOSED:"Contract closed"}),t3=e=>{let{contract_stage:t}=e;switch(void 0!==t?t:el.K.NOT_RUNNING){case el.K.STARTING:return(0,l.jsx)(y.Xx,{i18n_default_text:t1.STARTING});case el.K.RUNNING:return(0,l.jsx)(y.Xx,{i18n_default_text:t1.RUNNING});case el.K.PURCHASE_SENT:return(0,l.jsx)(y.Xx,{i18n_default_text:t1.PURCHASE_SENT});case el.K.PURCHASE_RECEIVED:return(0,l.jsx)(y.Xx,{i18n_default_text:t1.PURCHASE_RECEIVED});case el.K.IS_STOPPING:return(0,l.jsx)(y.Xx,{i18n_default_text:t1.IS_STOPPING});case el.K.CONTRACT_CLOSED:return(0,l.jsx)(y.Xx,{i18n_default_text:t1.CONTRACT_CLOSED});case el.K.NOT_RUNNING:default:return(0,l.jsx)(y.Xx,{i18n_default_text:t1.NOT_RUNNING})}};var t8=a("65464");let t5=(0,r.Pi)(e=>{let{className:t,should_show_overlay:a}=e,{dashboard:s,run_panel:n,summary_card:r,blockly_store:o}=(0,h.oR)(),{client:d}=(0,h.oR)(),{active_tab:c}=s,{has_active_bot:_,has_saved_bots:u}=o,{isMobile:x}=(0,g.F)(),{is_contract_completed:m,profit:p}=r,{contract_stage:j,is_stop_button_visible:v,is_stop_button_disabled:b,onRunButtonClick:f,onStopBotClick:N,performSelfExclusionCheck:C}=n,{account_status:k}=d,w=null==k?void 0:k.cashier_validation,[T,E]=i.useState(!1),S=null==w?void 0:w.includes("WithdrawServiceUnavailableForPA");i.useEffect(()=>{C()},[]);let{load_modal:A}=(0,h.oR)(),{dashboard_strategies:I,is_delete_modal_open:R}=A,O=i.useRef(R);i.useEffect(()=>{(async()=>{await o.checkForSavedBots()})()},[I,R,v]),i.useEffect(()=>{O.current&&!R&&(async()=>{await new Promise(e=>setTimeout(e,100)),await o.checkForSavedBots(),!v&&(E(!0),setTimeout(()=>E(!1),0))})(),O.current=R},[R,v]),i.useEffect(()=>{T&&setTimeout(()=>{E(!1)},1e3)},[T,v]);let L=["","",""],D=j===el.K.PURCHASE_SENT,U=j===el.K.PURCHASE_RECEIVED,F=j-(D||U?2:3);if(F>=0){F<L.length&&(L[F]="active"),m&&(F+=1);for(let e=0;e<F-1;e++)L[e]="completed"}let Z=!_&&!u,z=c===tK.ve.BOT_BUILDER,P=!v&&(T||Z&&!z),B=!v&&!z&&Z,X=i.useMemo(()=>v&&!b?{id:"db-animation__stop-button",class:"animation__stop-button",text:(0,l.jsx)(y.Xx,{i18n_default_text:"Stop"}),icon:(0,l.jsx)(tW.Z,{fill:"#fff"})}:{id:"db-animation__run-button",class:"animation__run-button",text:(0,l.jsx)(y.Xx,{i18n_default_text:"Run"}),icon:(0,l.jsx)(tJ.Z,{fill:"#fff"})},[v]),$=a&&m,H="number"==typeof c?c:0;return t8.P.emit("trade.animation",{contract_stage:j,progress_status:F}),(0,l.jsxs)("div",{className:M()("animation__wrapper",t),children:[B?(0,l.jsxs)("div",{className:"run__button_wrapper",children:[(0,l.jsx)(tN,{alignment:(()=>{if(x)return"top";try{let e=document.querySelector(".run__button_wrapper");if(e){let t=e.getBoundingClientRect(),a="number"==typeof t.bottom?t.bottom:0,s="number"==typeof window.innerHeight?window.innerHeight:0;return a>s-150?"top":"left"}}catch(e){console.error("Error determining tooltip position:",e)}return"left"})(),message:(0,y.NC)("The Run button is disabled because no Bot has been created yet."),icon:"info",className:"qs__tooltip"}),(0,l.jsx)("div",{style:{opacity:.5,marginLeft:"8px"},children:(0,l.jsx)(eO.Z,{is_disabled:!0,className:X.class,id:X.id,icon:X.icon,onClick:()=>{},has_effect:!0,...v||!S?{primary:!0}:{green:!0},children:X.text})})]}):(0,l.jsx)(eO.Z,{is_disabled:P&&!S||3===j,className:X.class,id:X.id,icon:X.icon,onClick:()=>{if(E(!0),v){N();return}f(),(0,tQ.GE)({subpage_name:H})},has_effect:!0,...v||!S?{primary:!0}:{green:!0},children:X.text}),(0,l.jsxs)("div",{className:M()("animation__container",t,{"animation--running":j>0,"animation--completed":$,"animation--disabled":P}),children:[$&&(0,l.jsx)(tY,{profit:p}),(0,l.jsx)("span",{className:"animation__text",children:(0,l.jsx)(t3,{contract_stage:j})}),(0,l.jsxs)("div",{className:"animation__progress",children:[(0,l.jsx)("div",{className:"animation__progress-line",children:(0,l.jsx)("div",{className:`animation__progress-bar animation__progress-${j}`})}),L.map((e,t)=>(0,l.jsx)(t0,{className:e},`status_class-${e}-${t}`))]})]})]})}),t7=i.memo(e=>{var t,a;let{className:s,column:n,is_footer:i,passthrough:r,row:o}=e;if(!n)return null;let{col_index:d,title:c}=n,_=null==o?void 0:o[d],x=(0,u.MOe)(null==o?void 0:null===(t=o.contract_info)||void 0===t?void 0:t.contract_type),m=(0,u.Yeo)(null==o?void 0:null===(a=o.contract_info)||void 0===a?void 0:a.contract_type);return(0,l.jsxs)("div",{className:M()(s,n.col_index),children:[!i&&(0,l.jsx)("div",{className:M()(`${n.col_index}__row-title`,"data-list__row-title"),children:n.renderHeader?n.renderHeader({title:c,is_vanilla:m}):c}),(0,l.jsx)("div",{className:"data-list__row-content",children:n.renderCellContent?n.renderCellContent({cell_value:_,is_footer:i,passthrough:r,row_obj:o,is_vanilla:m,is_turbos:x}):_})]})}),t2=i.memo(e=>{let{action_desc:t,destination_link:a,row_gap:s,row_key:n,rowRenderer:r,measure:o,is_dynamic_height:d,...c}=e,[_,x]=i.useState(!1),m=(0,u.tmR)(),h=ex(()=>x(!1),5e3),p=()=>{t&&(x(!_),h())},j=e=>{(0,u.K9$)(p,e)};return i.useEffect(()=>{m()&&d&&(null==o||o())},[_,d,o]),(0,l.jsx)("div",{className:"data-list__row--wrapper",style:{paddingBottom:`${s||0}px`},children:a?(0,l.jsx)(e_.OL,{className:"data-list__item--wrapper",id:`dt_reports_contract_${n}`,to:{pathname:a,state:{from_table_row:!0}},children:(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})}):(0,l.jsx)("div",{className:M()("data-list__item--wrapper",{"data-list__item--dynamic-height-wrapper":d}),children:t?(0,l.jsx)("div",{className:"data-list__item",onClick:j,onKeyDown:j,children:_?(0,l.jsx)("div",{className:"data-list__desc--wrapper",children:t.component&&(0,l.jsx)("div",{children:t.component})}):r({measure:o,...c})}):(0,l.jsx)("div",{className:"data-list__item",children:r({measure:o,...c})})})})}),t4=eo.aV,t9=eo.qj,t6=eo.Z8,ae=i.memo(e=>{let{children:t,className:a,data_source:s,footer:n,getRowSize:r,keyMapper:o,onRowsRendered:d,onScroll:c,setListRef:_,overscanRowCount:x,...m}=e,[h,p]=i.useState(!0),[j,v]=i.useState(!1),[b,y]=i.useState(0),g=i.useRef(),f=i.useRef(null),N=i.useRef({}),C=i.useRef(null);C.current=s;let k=!r,w=i.useCallback(()=>{s.forEach((e,t)=>{let a=(null==o?void 0:o(e))||`${t}-0`;N.current[a]=!0})},[s,o]);i.useEffect(()=>{k&&(g.current=new eo.t1({fixedWidth:!0,keyMapper:e=>(null==C?void 0:C.current)&&e<(null==C?void 0:C.current.length)&&(null==o?void 0:o(C.current[e]))||e})),w(),p(!1)},[]),i.useEffect(()=>{if(k){var e,t;null===(t=f.current)||void 0===t||null===(e=t.recomputeGridSize)||void 0===e||e.call(t,{columnIndex:0,rowIndex:0})}w()},[s,k,w]);let T=e=>{let{style:t,index:a,key:n,parent:i}=e,{getRowAction:r,passthrough:d,row_gap:c}=m,_=s[a],{action_type:x,shortcode:h,purchase_time:p,transaction_time:v,id:b}=_;if((0,u.JIr)(x,h,p||v)){let e=!!(null==s?void 0:s.find(e=>"sell"===e.action_type&&e.id===b));_={..._,is_sold:e}}let y=r&&r(_),f="string"==typeof y?y:void 0,C="object"==typeof y?y:void 0,w=(null==o?void 0:o(_))||n,T=function(){let{measure:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,l.jsx)(t2,{action_desc:C,destination_link:f,is_new_row:!N.current[w],is_scrolling:j,measure:e,passthrough:d,row_gap:c,row_key:w,row:_,rowRenderer:m.rowRenderer,is_dynamic_height:k})};return k&&g.current?(0,l.jsx)(t6,{cache:g.current,columnIndex:0,rowIndex:a,parent:i,children:e=>{let{measure:a}=e;return(0,l.jsx)("div",{style:t,children:T({measure:a})})}},w):(0,l.jsx)("div",{style:t,children:T()},w)},E=e=>{let t;clearTimeout(t),!j&&v(!0),t=setTimeout(()=>{!h&&v(!1)},200),y(e.target.scrollTop),"function"==typeof c&&c(e)},S=e=>{f.current=e,null==_||_(e)};return h?(0,l.jsx)("div",{}):(0,l.jsxs)("div",{"data-testid":"dt_data_list",className:M()(a,"data-list",{[`${a}__data-list`]:a}),children:[(0,l.jsxs)("div",{className:"data-list__body-wrapper",children:[(0,l.jsx)("div",{className:M()("data-list__body",{[`${a}__data-list-body`]:a}),children:(0,l.jsx)(t9,{children:e=>{var t,n;let{width:i,height:o}=e;return(0,l.jsx)(er.Z,{style:{height:o,width:i},children:(0,l.jsx)(ed.Z,{onScroll:E,autohide:!0,is_bypassed:(0,u.tqC)(),children:(0,l.jsx)(t4,{className:a,deferredMeasurementCache:null==g?void 0:g.current,height:o,onRowsRendered:d,overscanRowCount:x||1,ref:e=>S(e),rowCount:s.length,rowHeight:k&&(null==g?void 0:null===(t=g.current)||void 0===t?void 0:t.rowHeight)?null==g?void 0:null===(n=g.current)||void 0===n?void 0:n.rowHeight:r||0,rowRenderer:T,scrollingResetTimeInterval:0,width:i,...(0,u.nIE)()?{scrollTop:b,autoHeight:!0}:{onScroll:e=>E({target:e})}})})})}})}),t]}),n&&(0,l.jsx)("div",{className:M()("data-list__footer",{[`${a}__data-list-footer`]:a}),children:(0,l.jsx)(i.Fragment,{children:m.rowRenderer({row:n,is_footer:!0})})})]})});ae.displayName="DataList",ae.Cell=t7;let at=Object.freeze({QUICK_STRATEGY:99999,TOOLBAR:100,TRANSACTION:10,SUMMARY_TOOLTIPS:5,RUN_PANEL:8});var aa=a("62017"),as=a("49355");let an=e=>{let{icon:t,title:a,message:s,className:n}=e;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(q,{className:M()(n,"transactions__icon"),alignment:(0,F.rK)()?"right":"left",message:a,zIndex:at.TRANSACTION.toString(),children:t}),s]})},al=()=>(0,l.jsx)(L.ZP,{className:"transactions__loader-text",height:10,width:80,speed:3,backgroundColor:"var(--general-section-2)",foregroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"})}),ai=()=>(0,l.jsx)(L.ZP,{className:"transactions__loader-icon",speed:3,width:24,height:24,backgroundColor:"var(--general-section-1)",foregroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"5",ry:"5",width:"24",height:"24"})}),ar=e=>{let{icon:t,title:a,children:s}=e;return(0,l.jsxs)("div",{className:"transactions__popover-item",children:[t&&(0,l.jsx)("div",{className:"transaction__popover-icon",children:t}),(0,l.jsxs)("div",{className:"transactions__popover-details",children:[(0,l.jsx)("div",{className:"transactions__popover-title",children:a}),s]})]})},ao=e=>{let{contract:t}=e;return(0,l.jsxs)("div",{className:"transactions__popover-content",children:[t.transaction_ids&&(0,l.jsxs)(ar,{title:(0,l.jsx)(y.Xx,{i18n_default_text:"Reference IDs"}),children:[t.transaction_ids.buy&&(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.transaction_ids.buy} ${(0,y.NC)("(Buy)")}`}),t.transaction_ids.sell&&(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.transaction_ids.sell} ${(0,y.NC)("(Sell)")}`})]}),t.tick_count&&(0,l.jsx)(ar,{title:(0,y.NC)("Duration"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.tick_count} ${(0,y.NC)("ticks")}`})}),t.barrier&&(0,l.jsx)(ar,{title:(0,y.NC)("Barrier"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:t.barrier})})||t.high_barrier&&t.low_barrier&&(0,l.jsxs)(ar,{title:(0,y.NC)("Barriers"),children:[(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.high_barrier} ${(0,y.NC)("(High)")}`}),(0,l.jsx)("div",{className:"transactions__popover-value",children:`${t.low_barrier} ${(0,y.NC)("(Low)")}`})]}),t.date_start&&(0,l.jsx)(ar,{title:(0,y.NC)("Start time"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:(0,u.fcq)(t.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")})}),t.entry_tick&&(0,l.jsxs)(ar,{title:(0,y.NC)("Entry spot"),children:[(0,l.jsx)("div",{className:"transactions__popover-value",children:t.entry_tick}),t.entry_tick_time&&(0,l.jsx)("div",{className:"transactions__popover-value",children:(0,u.fcq)(t.entry_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")})]}),t.exit_tick&&t.exit_tick_time&&(0,l.jsxs)(ar,{title:(0,y.NC)("Exit spot"),children:[(0,l.jsx)("div",{className:"transactions__popover-value",children:t.exit_tick}),(0,l.jsx)("div",{className:"transactions__popover-value",children:(0,u.fcq)(t.exit_tick_time,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")})]})||t.exit_tick&&(0,l.jsx)(ar,{title:(0,y.NC)("Exit time"),children:(0,l.jsx)("div",{className:"transactions__popover-value",children:t.exit_tick})})]})},ad=e=>{var t;let{contract:a,active_transaction_id:s,onClickTransaction:n}=e;return(0,l.jsx)(q,{zIndex:at.TRANSACTION.toString(),alignment:(0,F.rK)()?"right":"left",className:"transactions__item-wrapper",is_open:!!(a&&s===(null==a?void 0:null===(t=a.transaction_ids)||void 0===t?void 0:t.buy)),message:a&&(0,l.jsx)(ao,{contract:a}),children:(0,l.jsxs)("div",{"data-testid":"dt_transactions_item",className:"transactions__item",onClick:()=>{var e;return n&&n((null==a?void 0:null===(e=a.transaction_ids)||void 0===e?void 0:e.buy)||null)},children:[(0,l.jsxs)("div",{className:"transactions__cell transactions__trade-type",children:[(0,l.jsx)("div",{className:"transactions__loader-container",children:a?(0,l.jsx)(an,{icon:(0,l.jsx)(z,{type:a.underlying}),title:a.display_name||""}):(0,l.jsx)(ai,{})}),(0,l.jsx)("div",{className:"transactions__loader-container",children:a?(0,l.jsx)(an,{icon:(0,l.jsx)(Y,{type:a.contract_type||"",size:"sm"}),title:(0,U.getContractTypeName)(a)}):(0,l.jsx)(ai,{})})]}),(0,l.jsx)("div",{className:"transactions__cell transactions__entry-spot",children:(0,l.jsx)(an,{icon:(0,l.jsx)(aa.Z,{height:10,width:10}),title:(0,y.NC)("Entry spot"),message:(null==a?void 0:a.entry_tick)??(0,l.jsx)(al,{})})}),(0,l.jsx)("div",{className:"transactions__cell transactions__exit-spot",children:(0,l.jsx)(an,{icon:(0,l.jsx)(as.C,{height:10,width:10}),title:(0,y.NC)("Exit spot"),message:(null==a?void 0:a.exit_tick)??(0,l.jsx)(al,{})})}),(0,l.jsx)("div",{className:"transactions__cell transactions__stake",children:a?(0,l.jsx)(e7.Z,{amount:a.buy_price,currency:a.currency,show_currency:!0}):(0,l.jsx)(al,{})}),(0,l.jsx)("div",{className:"transactions__cell transactions__profit",children:(null==a?void 0:a.is_completed)?(0,l.jsx)("div",{className:M()({"transactions__profit--win":(null==a?void 0:a.profit)&&(null==a?void 0:a.profit)>=0,"transactions__profit--loss":(null==a?void 0:a.profit)&&(null==a?void 0:a.profit)<0}),children:(0,l.jsx)(e7.Z,{amount:Math.abs(a.profit||0),currency:a.currency,show_currency:!0})}):(0,l.jsx)(al,{})})]})})},ac=e=>{let{row:t=!1,onClickTransaction:a,active_transaction_id:s}=e;switch(t.type){case D.i.CONTRACT:{let{data:e}=t;return(0,l.jsx)(ad,{contract:e,onClickTransaction:a,active_transaction_id:s})}case D.i.DIVIDER:return(0,l.jsx)("div",{className:"transactions__divider",children:(0,l.jsx)("div",{className:"transactions__divider-line"})});default:return null}},a_=(0,r.Pi)(e=>{let{is_drawer_open:t}=e,[a,s]=i.useState(null),{run_panel:n,transactions:r}=(0,h.oR)(),{contract_stage:o}=n,{transactions:d,toggleTransactionDetailsModal:c,recoverPendingContracts:_}=r,{isDesktop:u}=(0,g.F)();i.useEffect(()=>(window.addEventListener("click",x),_(),()=>{window.removeEventListener("click",x)}),[]),i.useEffect(()=>{a&&s(null)},[null==d?void 0:d.length]);let x=e=>{!((null==e?void 0:e.composedPath())||[]).some(e=>{var t;return null===(t=e.classList)||void 0===t?void 0:t.contains("transactions__item-wrapper")})&&s(null)},m=e=>{e&&a===e?s(null):s(e)};return(0,l.jsxs)("div",{className:M()("transactions",{"run-panel-tab__content":u,"run-panel-tab__content--mobile":!u&&t}),children:[(0,l.jsxs)("div",{className:"download__container transaction-details__button-container",children:[(0,l.jsx)(eM,{tab:"transactions"}),(0,l.jsx)(eO.Z,{id:"download__container__view-detail-button",className:"download__container__view-detail-button",disabled:!(null==d?void 0:d.length),onClick:()=>{c(!0)},secondary:!0,children:(0,l.jsx)(y.Xx,{i18n_default_text:"View Detail"})})]}),(0,l.jsxs)("div",{className:"transactions__header",children:[(0,l.jsx)("span",{className:"transactions__header-column transactions__header-type",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Type"})}),(0,l.jsx)("span",{className:"transactions__header-column transactions__header-spot",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Entry/Exit spot"})}),(0,l.jsx)("span",{className:"transactions__header-column transactions__header-profit",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Buy price and P/L"})})]}),(0,l.jsx)("div",{className:M()({transactions__content:u,"transactions__content--mobile":!u}),children:(0,l.jsx)("div",{className:"transactions__scrollbar",children:(null==d?void 0:d.length)?(0,l.jsx)(ae,{className:"transactions",data_source:d,rowRenderer:e=>(0,l.jsx)(ac,{onClickTransaction:m,active_transaction_id:a,...e}),keyMapper:e=>{switch(e.type){case D.i.CONTRACT:return e.data.transaction_ids.buy;case D.i.DIVIDER:return e.data;default:return null}},getRowSize:e=>{let{index:t}=e;switch((null==d?void 0:d[t]).type){case D.i.CONTRACT:return 50;case D.i.DIVIDER:return 21;default:return 0}}}):(0,l.jsx)(l.Fragment,{children:o>=el.K.STARTING?(0,l.jsx)(ad,{contract:null}):(0,l.jsx)(ed.Z,{children:(0,l.jsx)("div",{className:"transactions-empty-box",children:(0,l.jsxs)("div",{className:"transactions-empty",children:[(0,l.jsx)("div",{className:"transactions-empty__icon-box",children:(0,l.jsx)(ei.Z,{height:"64px",width:"64px",className:"transactions-empty__icon icon-general-fill-g-path",color:"secondary",fill:"var(--text-general)"})}),(0,l.jsx)(V.Z,{as:"h4",size:"xs",weight:"bold",align:"center",color:"less-prominent",lineHeight:"xxs",className:"transactions-empty__header",children:(0,l.jsx)(y.Xx,{i18n_default_text:"There are no transactions to display"})}),(0,l.jsxs)("div",{className:"transactions-empty__message",children:[(0,l.jsx)(V.Z,{size:"xxs",color:"less-prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Here are the possible reasons:"})}),(0,l.jsxs)("ul",{className:"transactions-empty__list",children:[(0,l.jsx)("li",{children:(0,l.jsx)(V.Z,{size:"xs",color:"less-prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The bot is not running"})})}),(0,l.jsx)("li",{children:(0,l.jsx)(V.Z,{size:"xs",color:"less-prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The stats are cleared"})})})]})]})]})})})})})})]})}),au=e=>{let{content:t,contentClassName:a,title:s}=e;return(0,l.jsxs)("div",{className:"run-panel__tile",children:[(0,l.jsx)("div",{className:"run-panel__tile-title",children:s}),(0,l.jsx)("div",{className:M()("run-panel__tile-content",a),children:t})]})},ax=e=>{let{currency:t,is_mobile:a,lost_contracts:s,number_of_runs:n,total_stake:i,total_payout:r,toggleStatisticsInfoModal:o,total_profit:d,won_contracts:c}=e;return(0,l.jsxs)("div",{className:M()("run-panel__stat",{"run-panel__stat--mobile":a}),children:[(0,l.jsx)("div",{className:"run-panel__stat--info",onClick:o,children:(0,l.jsx)("div",{className:"run-panel__stat--info-item",children:(0,l.jsx)(y.Xx,{i18n_default_text:"What's this?"})})}),(0,l.jsxs)("div",{className:"run-panel__stat--tiles",children:[(0,l.jsx)(au,{title:(0,y.NC)("Total stake"),alignment:"top",content:(0,l.jsx)(e7.Z,{amount:i,currency:t,show_currency:!0})}),(0,l.jsx)(au,{title:(0,y.NC)("Total payout"),alignment:"top",content:(0,l.jsx)(e7.Z,{amount:r,currency:t,show_currency:!0})}),(0,l.jsx)(au,{title:(0,y.NC)("No. of runs"),alignment:"top",content:n}),(0,l.jsx)(au,{title:(0,y.NC)("Contracts lost"),alignment:"bottom",content:s}),(0,l.jsx)(au,{title:(0,y.NC)("Contracts won"),alignment:"bottom",content:c}),(0,l.jsx)(au,{title:(0,y.NC)("Total profit/loss"),content:(0,l.jsx)(e7.Z,{amount:d,currency:t,has_sign:!0,show_currency:!0}),alignment:"bottom",contentClassName:M()("run-panel__stat-amount",{"run-panel__stat-amount--positive":d>0,"run-panel__stat-amount--negative":d<0})})]})]})},am=e=>{let{is_clear_stat_disabled:t,is_mobile:a,is_drawer_open:s,onClearStatClick:n}=e;return a&&s&&(0,l.jsx)(eO.Z,{id:"db-run-panel__clear-button",className:"run-panel__clear-button",disabled:t,text:(0,y.NC)("Reset"),onClick:n,secondary:!0})},ah=e=>{let{active_index:t,is_drawer_open:a,active_tour:s,setActiveTabIndex:n,...r}=e,{isDesktop:o}=(0,g.F)();return i.useEffect(()=>(!o&&a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(e2.Z,{active_index:t,onTabItemClick:n,top:!0,children:[(0,l.jsx)("div",{id:"db-run-panel-tab__summary",label:(0,l.jsx)(y.Xx,{i18n_default_text:"Summary"}),children:(0,l.jsx)(tV,{is_drawer_open:a})}),(0,l.jsx)("div",{id:"db-run-panel-tab__transactions",label:(0,l.jsx)(y.Xx,{i18n_default_text:"Transactions"}),children:(0,l.jsx)(a_,{is_drawer_open:a})}),(0,l.jsx)("div",{id:"db-run-panel-tab__journal",label:(0,l.jsx)(y.Xx,{i18n_default_text:"Journal"}),children:(0,l.jsx)(eU,{})})]}),(a&&2!==t||s)&&(0,l.jsx)(ax,{...r})]})},ap=e=>{let{is_clear_stat_disabled:t,onClearStatClick:a}=e;return(0,l.jsx)("div",{className:"run-panel__footer",children:(0,l.jsx)(eO.Z,{id:"db-run-panel__clear-button",className:"run-panel__footer-button",disabled:t,onClick:a,has_effect:!0,secondary:!0,children:(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Reset"})})})})},aj=()=>(0,l.jsx)("div",{className:"controls__section",children:(0,l.jsx)("div",{className:"controls__buttons",children:(0,l.jsx)(t5,{className:"controls__animation",should_show_overlay:!0})})}),av=e=>{let{is_mobile:t,is_statistics_info_modal_open:a,toggleStatisticsInfoModal:s}=e;return(0,l.jsx)(f.Z,{className:M()("statistics__modal",{"statistics__modal--mobile":t}),title:(0,y.NC)("What's this?"),is_open:a,toggleModal:s,width:"440px",children:(0,l.jsx)(f.Z.Body,{children:(0,l.jsx)("div",{className:M()("statistics__modal-body",{"statistics__modal-body--mobile":t}),children:(0,l.jsxs)(ed.Z,{className:"statistics__modal-scrollbar",children:[(0,l.jsx)(V.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content no-margin",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Total stake"})}),(0,l.jsx)(V.Z,{as:"p",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Total stake since you last cleared your stats."})}),(0,l.jsx)(V.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Total payout"})}),(0,l.jsx)(V.Z,{as:"p",children:(0,y.NC)("Total payout since you last cleared your stats.")}),(0,l.jsx)(V.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(y.Xx,{i18n_default_text:"No. of runs"})}),(0,l.jsx)(V.Z,{as:"p",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The number of times your bot has run since you last cleared your stats. Each run includes the execution of all the root blocks."})}),(0,l.jsx)(V.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Contracts lost"})}),(0,l.jsx)(V.Z,{as:"p",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The number of contracts you have lost since you last cleared your stats."})}),(0,l.jsx)(V.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Contracts won"})}),(0,l.jsx)(V.Z,{as:"p",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The number of contracts you have won since you last cleared your stats."})}),(0,l.jsx)(V.Z,{as:"p",weight:"bold",className:"statistics__modal-body--content",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Total profit/loss"})}),(0,l.jsx)(V.Z,{as:"p",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Your total profit/loss since you last cleared your stats. It is the difference between your total payout and your total stake."})})]})})})})},ab=(0,r.Pi)(()=>{let{run_panel:e,dashboard:t,transactions:a}=(0,h.oR)(),{client:s}=(0,h.oR)(),{isDesktop:n}=(0,g.F)(),{currency:r}=s,{active_index:o,is_drawer_open:d,is_statistics_info_modal_open:c,is_clear_stat_disabled:_,onClearStatClick:u,onMount:x,onRunButtonClick:m,onUnmount:p,setActiveTabIndex:j,toggleDrawer:v,toggleStatisticsInfoModal:b}=e,{statistics:y}=a,{active_tour:f,active_tab:N}=t,{total_payout:C,total_profit:k,total_stake:w,won_contracts:T,lost_contracts:E,number_of_runs:S}=y,{BOT_BUILDER:A,CHART:I}=tK.ve;i.useEffect(()=>(x(),()=>p()),[x,p]),i.useEffect(()=>{!n&&v(!1)},[]);let R=(0,l.jsx)(ah,{active_index:o,currency:r,is_drawer_open:d,is_mobile:!n,lost_contracts:E,number_of_runs:S,setActiveTabIndex:j,toggleStatisticsInfoModal:b,total_payout:C,total_profit:k,total_stake:w,won_contracts:T,active_tour:f}),O=(0,l.jsx)(ap,{is_clear_stat_disabled:_,onClearStatClick:u}),L=(0,l.jsx)(am,{is_clear_stat_disabled:_,is_mobile:!n,is_drawer_open:d,onClearStatClick:u});return!([A,I].includes(N)||f)&&n||"bot_builder"===f?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:!n&&d?"run-panel__container--mobile":"run-panel",children:[(0,l.jsx)(e5,{anchor:"right",className:M()("run-panel",{"run-panel__container":n,"run-panel__container--tour-active":n&&f}),contentClassName:"run-panel__content",header:L,footer:n&&O,is_open:d,toggleDrawer:v,width:366,zIndex:at.RUN_PANEL,children:R}),!n&&(0,l.jsx)(aj,{})]}),(0,l.jsx)(e1,{onRunButtonClick:m}),(0,l.jsx)(av,{is_mobile:!n,is_statistics_info_modal_open:c,toggleStatisticsInfoModal:b})]})}),ay=e=>{let{body_className:t,className:a,should_header_stick_body:s,header:n,header_background_color:r,height_offset:o="0px",is_flex:d,is_popup:c,is_modal_open:_,onClickClose:u,renderPageFooterChildren:x,page_footer_className:m,page_footer_parent:h,page_footer_parent_className:p,page_header_className:j,page_header_text:v,renderPageHeaderTrailingIcon:b,pageHeaderReturnFn:y,renderPageHeader:g,renderPageHeaderElement:f,children:N,container_children:C}=e;return(0,l.jsx)(eV,{is_visible:_,className:M()("dc-mobile-full-page-modal",a),keyname:`${a}__wrapper`,children:(0,l.jsx)(eQ,{header:n,onClickClose:u,children:(0,l.jsxs)(eP.Z,{className:M()("dc-mobile-full-page-modal",{"dc-mobile-full-page-modal--flex":d,"dc-mobile-full-page-modal--popup":c}),height_offset:o,children:[(g||v||f)&&(0,l.jsxs)("div",{className:M()("dc-mobile-full-page-modal__header",{"dc-mobile-full-page-modal__header--border-bottom":!s,...j?{[j]:!!j}:{}}),style:{background:r},children:[y&&(0,l.jsx)("div",{className:"dc-mobile-full-page-modal__header-return",children:(0,l.jsx)(eJ.Z,{onClick:y,"data-testid":"dt_mobile_full_page_return_icon"})}),g&&g(),(0,l.jsx)("div",{className:"dc-mobile-full-page-modal__header-text",children:f??(0,l.jsx)(V.Z,{as:"p",color:"prominent",lineHeight:"m",size:"s",weight:"bold",children:v})}),b&&(0,l.jsx)("div",{className:"dc-mobile-full-page-modal__header-trailing-icon",children:b()})]}),(0,l.jsx)("div",{className:M()("dc-mobile-full-page-modal__body",t),children:N}),x&&(0,l.jsxs)(i.Fragment,{children:[h&&(0,l.jsx)("div",{className:M()("dc-mobile-full-page-modal__footer-parent",p),children:h}),(0,l.jsx)("div",{className:M()("dc-mobile-full-page-modal__footer",m),children:x()})]}),C]})})})},ag="transaction-details-modal-mobile",af=()=>(0,l.jsx)(L.ZP,{className:"transactions__loader-text","data-testid":"transaction_details_card_cell_loader",height:10,width:80,speed:3,foregroundColor:"var(--general-section-2)",backgroundColor:"var(--general-hover)",children:(0,l.jsx)("rect",{x:"0",y:"0",rx:"0",ry:"0",width:"100",height:"12"})}),aN=e=>{let{label:t="",large_title:a=!1,right_aligned:s=!1,title:n="",loader:i=!1}=e;return(0,l.jsxs)("div",{className:M()(`${ag}__card__column`,{[`${ag}__right-align`]:s}),children:[n&&(0,l.jsx)("div",{className:M()({[`${ag}__small-title`]:!a,[`${ag}__large-title`]:a}),children:(0,y.NC)(n)}),(0,l.jsx)("div",{className:`${ag}__label`,children:i?(0,l.jsx)(af,{}):t})]})},aC=e=>{let{message:t,icon:a}=e;return(0,l.jsx)("div",{className:M()(`${ag}__table-cell`,`${ag}__table-cell__icon-wrapper`),children:t&&(0,l.jsx)(q,{alignment:(0,F.rK)()?"left":"right",message:t,zIndex:"7",children:a})})};function ak(e){var t;let{transaction:a}=e;return(0,l.jsxs)("div",{className:`${ag}__card`,"data-testid":"dt_mobile_transaction_card",children:[(0,l.jsx)("div",{className:`${ag}__card__row`,children:(0,l.jsx)(aN,{label:(0,l.jsxs)("div",{className:`${ag}__icon-wrapper`,children:[(0,l.jsx)(aC,{message:null==a?void 0:a.display_name,icon:(0,l.jsx)(z,{type:null==a?void 0:a.underlying,size:"md"})}),(0,l.jsx)(aC,{message:(0,U.getContractTypeName)(a),icon:(0,l.jsx)(Y,{type:null==a?void 0:a.contract_type,size:"md"})})]})})}),(0,l.jsx)("div",{className:`${ag}__card__row`,children:(0,l.jsx)(aN,{title:"Ref. ID",label:null==a?void 0:null===(t=a.transaction_ids)||void 0===t?void 0:t.buy})}),(0,l.jsxs)("div",{className:`${ag}__card__row`,children:[(0,l.jsx)(aN,{title:"Timestamp",label:(0,u.fcq)(null==a?void 0:a.date_start,"YYYY-M-D HH:mm:ss [GMT]","YYYY-MM-DD HH:mm:ss [GMT]")}),(0,l.jsx)(aN,{title:"Entry Spot",label:null==a?void 0:a.entry_tick,right_aligned:!0,loader:!a.entry_tick})]}),(0,l.jsxs)("div",{className:`${ag}__card__row`,children:[(0,l.jsx)(aN,{title:"Buy Price",label:Math.abs((null==a?void 0:a.buy_price)??0).toFixed(2)}),(0,l.jsx)(aN,{title:"Exit Spot",label:null==a?void 0:a.exit_tick,right_aligned:!0,loader:!a.exit_tick})]}),(0,l.jsxs)("div",{className:`${ag}__card__row`,children:[(0,l.jsx)(aN,{title:"Profit / Loss",large_title:!0}),(0,l.jsx)(aN,{label:(0,l.jsx)("div",{className:M()({[`${ag}__card__profit--win`]:(null==a?void 0:a.profit)>0,[`${ag}__card__profit--loss`]:(null==a?void 0:a.profit)<0}),children:Math.abs((null==a?void 0:a.profit)??0).toFixed(2)}),right_aligned:!0,loader:!a.is_completed})]})]})}let aw=(0,r.Pi)(()=>{let{client:e}=(0,h.oR)(),{transactions:t,run_panel:a}=(0,h.oR)(),{toggleTransactionDetailsModal:s,is_transaction_details_modal_open:n,transactions:i,statistics:r}=t,{toggleStatisticsInfoModal:o}=a;return(0,l.jsxs)(ay,{is_modal_open:n,className:"transaction-details-modal-mobile",header:(0,y.NC)("Transactions detailed summary"),onClickClose:()=>{s(!1)},height_offset:"80px",children:[(0,l.jsx)("div",{className:"transaction-details-modal-mobile__wrapper","data-testid":"transaction_details_cards",children:null==i?void 0:i.map(e=>{var t;let{data:a,type:s}=e;return s===D.i.CONTRACT?(0,l.jsx)(ak,{transaction:a},null==a?void 0:null===(t=a.transaction_ids)||void 0===t?void 0:t.buy):(0,l.jsx)("div",{className:"transaction-details-modal-mobile__divider",children:(0,l.jsx)("div",{className:"transactions__divider-line"})},`transaction-row-divider-${a}`)})}),(0,l.jsx)("div",{className:"transaction-details-modal-mobile__card__footer",children:(0,l.jsx)(ax,{is_mobile:!0,currency:null==e?void 0:e.currency,lost_contracts:(null==r?void 0:r.lost_contracts)??0,number_of_runs:(null==r?void 0:r.number_of_runs)??0,total_payout:(null==r?void 0:r.total_payout)??0,total_profit:(null==r?void 0:r.total_profit)??0,total_stake:(null==r?void 0:r.total_stake)??0,won_contracts:(null==r?void 0:r.won_contracts)??0,toggleStatisticsInfoModal:o})})]})}),aT=(0,r.Pi)(()=>{let{isDesktop:e}=(0,g.F)();return(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(d.a,{}),children:e?(0,l.jsx)(en,{}):(0,l.jsx)(aw,{})})});var aE=a("87383"),aS=a("89064"),aA=a("83571"),aI=a("12838"),aR=JSON.parse('{"cs_chat_livechat":true,"cs_chat_whatsapp":true,"marketing_growthbook":true,"passkeys":true,"tracking_GTM":true,"tracking_datadog":true,"tracking_hotjar":true,"tracking_rudderstack":true}');let aO=async function(){let e="https://app-config-prod.firebaseio.com/remote_config/deriv-app.json",t=await fetch(e);if(!t.ok)throw Error("Remote Config Server is out of reach!");return t.json()},aM=function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],[t,a]=(0,i.useState)(aR);return(0,i.useEffect)(()=>{e&&aO().then(async e=>{let s=await aI.gb.hashObject(e);s!==await aI.gb.hashObject(t)&&a(e)}).catch(e=>{console.error("Remote Config error: ",e)})},[e]),{data:t}},aL=()=>{let[e,t]=(0,i.useState)(!1),{data:a}=aM(!0),[s,n]=(0,i.useState)(!0);return(0,i.useEffect)(()=>{let e;if(null==a?void 0:a.marketing_growthbook){let a=0;e=setInterval(()=>{var s;if(a>20){clearInterval(e),n(!1);return}a+=1,(null===aA.Analytics||void 0===aA.Analytics?void 0:null===(s=aA.Analytics.getInstances())||void 0===s?void 0:s.ab)&&(t(!0),clearInterval(e))},500)}else n(!1);return()=>{clearInterval(e)}},[a.marketing_growthbook]),{isGBLoaded:e,isGBAvailable:s}},aD=e=>{let{featureFlag:t,defaultValue:a}=e,s=void 0!==a&&a,[n,l]=(0,i.useState)((null===aA.Analytics||void 0===aA.Analytics?void 0:aA.Analytics.getFeatureValue(t,s))??s),{isGBLoaded:r}=aL(),o=(0,eu.tm)();return"undefined"!=typeof window&&(window.Analytics=aA.Analytics),(0,i.useEffect)(()=>{if(r){var e,a,n,i;if(null===aA.Analytics||void 0===aA.Analytics?void 0:null===(e=aA.Analytics.getInstances())||void 0===e?void 0:e.ab){let e=()=>{let e=null===aA.Analytics||void 0===aA.Analytics?void 0:aA.Analytics.getFeatureValue(t,s);o()&&l(e)};e(),null===aA.Analytics||void 0===aA.Analytics||null===(i=aA.Analytics.getInstances())||void 0===i||null===(n=i.ab)||void 0===n||null===(a=n.GrowthBook)||void 0===a||a.setRenderer(()=>{e()})}}},[r,s,t,o]),{featureFlagValue:n,isGBLoaded:r}},aU=e=>{let{featureFlagValue:t}=aD({featureFlag:"enable_intercom_dbot"}),a=(0,eu.Gq)(t?"https://static.deriv.com/scripts/intercom/v1.0.2.js":null);(0,i.useEffect)(()=>{var s;let n;if(!!t&&"ready"===a&&!!(null===(s=window)||void 0===s?void 0:s.DerivInterCom))return window.DerivInterCom.initialize({hideLauncher:!0,token:e}),n=setInterval(()=>{var e;(null===(e=window)||void 0===e?void 0:e.Intercom)&&clearInterval(n)},500),()=>{clearInterval(n)}},[t,a,e])};var aF=a("6388");let{TRACKJS_TOKEN:aZ}={TRANSLATIONS_CDN_URL:void 0,R2_PROJECT_NAME:void 0,CROWDIN_BRANCH_NAME:void 0,TRACKJS_TOKEN:void 0,APP_ENV:void 0,REF_NAME:void 0,REMOTE_CONFIG_URL:void 0,GD_CLIENT_ID:void 0,GD_APP_ID:void 0,GD_API_KEY:void 0,DATADOG_SESSION_REPLAY_SAMPLE_RATE:void 0,DATADOG_SESSION_SAMPLE_RATE:void 0,DATADOG_APPLICATION_ID:void 0,DATADOG_CLIENT_TOKEN:void 0,RUDDERSTACK_KEY:void 0,GROWTHBOOK_CLIENT_KEY:void 0,GROWTHBOOK_DECRYPTION_KEY:void 0},az=()=>({initTrackJS:e=>{try{if(!aF.t.isInstalled()){var t;aF.t.install({application:"standalone-deriv-bot",dedupe:!1,enabled:!1,token:aZ,userId:e,version:(null===(t=document.querySelector("meta[name=version]"))||void 0===t?void 0:t.content)??"undefined"})}}catch(e){console.error("Failed to initialize TrackJS",e)}}});a("99702");let aP=e=>{};var aB=a("72755");let aX=e=>{!function(t,a,s,n){t.hj=t.hj||function(){(t.hj.q=t.hj.q||[]).push(arguments)},t._hjSettings={hjid:3050531,hjsv:6};let l=a.getElementsByTagName("head")[0],i=a.createElement("script");i.async=1,i.src=s+t._hjSettings.hjid+n+t._hjSettings.hjsv,l.appendChild(i);let r=e.loginid,o=e.is_virtual?"Demo":"Real",d=e.account_open_date?(0,aB.vk)(e.account_open_date):void 0;window.hj("identify",r,{"Account created":d?(0,aB.gb)(d).format("YYYY-MM-DD"):"","Account type":o,"User country":e.clients_country})}(window,document,"https://static.hotjar.com/c/hotjar-",".js?sv=")};var a$=a("47494");let aH=()=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("audio",{id:"announcement","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/announcement.mp3`}),(0,l.jsx)("audio",{id:"earned-money","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/coins.mp3`}),(0,l.jsx)("audio",{id:"job-done","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/job-done.mp3`}),(0,l.jsx)("audio",{id:"error","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/out-of-bounds.mp3`}),(0,l.jsx)("audio",{id:"severe-error","aria-label":"audio",src:`${window.__webpack_public_path__}assets/media/i-am-being-serious.mp3`})]}),aV=(0,r.Pi)(()=>{let{blockly_store:e}=(0,h.oR)(),{is_loading:t}=e;return(0,l.jsx)(l.Fragment,{children:t&&(0,l.jsxs)("div",{className:"bot__loading","data-testid":"blockly-loader",children:[(0,l.jsx)(d.a,{}),(0,l.jsx)("div",{children:"Loading Blockly..."})]})})});var aq=a("10434");let aG=(0,r.Pi)(()=>{let{dashboard:e}=(0,h.oR)(),{is_web_socket_intialised:t}=e,a=()=>{location.reload()};return(0,l.jsxs)(aq.Z,{is_visible:!t,is_mobile_full_width:!0,className:"dc-dialog bot-stopped-dialog",cancel_button_text:(0,y.NC)("Go to Reports"),confirm_button_text:(0,y.NC)("Back to Bot"),onCancel:()=>window.location.href=u.xOw.positions,onConfirm:()=>location.reload(),children:[(0,l.jsxs)("div",{className:"dc-dialog__content__header",children:[(0,l.jsx)(V.Z,{"data-testid":"data-title",weight:"bold",as:"p",align:"left",size:"s",color:"prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"You're back online"})}),(0,l.jsx)("div",{"data-testid":"data-close-button",onClick:a,onKeyDown:e=>{"Enter"===e.key&&a()},tabIndex:0,children:(0,l.jsx)(w.Z,{height:"20px",width:"20px",fill:"var(--text-general)"})})]}),(0,l.jsx)(V.Z,{as:"p",align:"left",size:"xs",color:"prominent",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The bot has stopped, but your trade may still be running. You can check it on the Reports page."})})]})});var aY=a("64736"),aK=a("59462"),aW=a("49985"),aJ=a("13617");let aQ=e=>{let{load_strategy_tab:t}=e;aA.Analytics.trackEvent("ce_bot_form",{action:aJ.om.SWITCH_LOAD_STRATEGY_TAB,form_name:aJ.oH,load_strategy_tab:t,subform_name:"load_strategy",subpage_name:"bot_builder"})};var a0=a("66062"),a1=a("31865"),a3=a("97909");let a8=(0,r.Pi)(()=>{let{google_drive:e,load_modal:t}=(0,h.oR)(),{is_authorised:a,signIn:s,signOut:n}=e,{is_open_button_loading:r,onDriveOpen:o}=t,{isDesktop:d}=(0,g.F)(),c=d?"128":"96";return(0,l.jsx)("div",{className:"load-strategy__container","data-testid":"dt_google_drive",children:(0,l.jsxs)("div",{className:"load-strategy__google-drive",children:[(0,l.jsx)(a3.Z,{className:M()("load-strategy__google-drive-icon",{"load-strategy__google-drive-icon--disabled":!a}),height:c,width:c}),(0,l.jsx)("div",{className:"load-strategy__google-drive-connected-text",children:a?(0,l.jsx)(y.Xx,{i18n_default_text:"You are connected to Google Drive"}):"Google Drive"}),a?(0,l.jsxs)(eO.Z.Group,{children:[(0,l.jsx)(eO.Z,{onClick:()=>{n(),(0,tQ.z9)()},has_effect:!0,secondary:!0,large:!0,children:(0,l.jsx)(y.Xx,{i18n_default_text:"Disconnect"})}),(0,l.jsx)(eO.Z,{onClick:()=>{o()},is_loading:r,has_effect:!0,primary:!0,large:!0,children:(0,l.jsx)(y.Xx,{i18n_default_text:"Open"})})]}):(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"load-strategy__google-drive-terms",children:[(0,l.jsx)("div",{className:"load-strategy__google-drive-text",children:(0,l.jsx)(y.Xx,{i18n_default_text:"To import your bot from your Google Drive, you'll need to sign in to your Google account."})}),(0,l.jsx)("div",{className:"load-strategy__google-drive-text",children:(0,l.jsx)(y.Xx,{i18n_default_text:"To know how Google Drive handles your data, please review Derivs <0>Privacy policy.</0>",components:[(0,l.jsx)(a1.Z,{className:"link",href:"tnc/security-and-privacy.pdf",is_document:!0},0)]})})]}),(0,l.jsx)(eO.Z,{onClick:()=>{s(),(0,tQ.df)()},has_effect:!0,primary:!0,large:!0,children:(0,l.jsx)(y.Xx,{i18n_default_text:"Sign in"})})]})]})})});var a5=a("81593"),a7=a("73446"),a2=a("91047");let a4=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,h.oR)(),{is_open_button_loading:a,is_open_button_disabled:s,loadStrategyOnBotBuilder:n,setLoadedLocalFile:r,saveStrategyToLocalStorage:o,toggleLoadModal:d}=e,{setOpenSettings:c,setPreviewOnPopup:_}=t,{isDesktop:u}=(0,g.F)(),x=u?i.Fragment:eO.Z.Group;return(0,l.jsxs)(x,{children:[!u&&(0,l.jsx)(eO.Z,{text:(0,y.NC)("Cancel"),onClick:()=>r(null),has_effect:!0,secondary:!0,large:!0}),(0,l.jsx)(eO.Z,{text:(0,y.NC)("Open"),onClick:()=>{n(),o(),r(null),d(),_(!1),c(aK.tx.BOT_IMPORT)},is_loading:a,has_effect:!0,primary:!0,large:!0,disabled:s})]})}),a9=e=>{let{icon:t,message:a,className:s}=e;return(0,l.jsxs)("div",{className:s,children:[t&&(0,l.jsx)("span",{className:"icon",children:t}),(0,l.jsx)("span",{className:"text",children:(0,l.jsx)(V.Z,{size:"xs",children:a})})]})};var a6=a("19405"),se=a("83533");let st=(0,r.Pi)(e=>{let{mockZoomInOut:t}=e,{dashboard:a}=(0,h.oR)(),{onZoomInOutClick:s}=a;return(0,l.jsxs)("div",{className:"load-strategy__preview-workspace-controls",children:[(0,l.jsx)(a6.Z,{className:"load-strategy__preview-workspace-icon",onClick:()=>{t?t(!0):s(!0)},"data-testid":"zoom-in",fill:"var(--text-general)"}),(0,l.jsx)(se.Z,{className:"load-strategy__preview-workspace-icon",onClick:()=>{t?t(!1):s(!1)},"data-testid":"zoom-out",fill:"var(--text-general)"})]})}),sa=(0,r.Pi)(()=>{let{dashboard:e,load_modal:t,blockly_store:a}=(0,h.oR)(),{active_tab:s,active_tour:n}=e,{handleFileChange:r,loaded_local_file:o,setLoadedLocalFile:d,imported_strategy_type:c,is_open_button_loading:_}=t,u=i.useRef(null),[x,m]=i.useState(!0),{isDesktop:p}=(0,g.F)(),{is_loading:j}=a;return(i.useEffect(()=>{o&&x&&"pending"!==c&&!j&&"old"===c&&(0,aY.J)((0,aK.xG)().strategy_conversion,void 0,{closeButton:!1})},[o,x,c,_,j]),o&&x)?(0,l.jsxs)("div",{className:"load-strategy__container load-strategy__container--has-footer",children:[(0,l.jsxs)("div",{className:M()("load-strategy__local-preview",{"load-strategy__local-preview--active":1===s&&n}),children:[(0,l.jsx)("div",{className:"load-strategy__title",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Preview"})}),(0,l.jsx)("div",{className:"load-strategy__preview-workspace",children:(0,l.jsxs)("div",{id:"load-strategy__blockly-container",style:{height:"100%"},children:[(0,l.jsx)("div",{className:"load-strategy__local-preview-close",children:(0,l.jsx)(w.Z,{onClick:()=>{d(null)},"data-testid":"dt_load-strategy__local-preview-close",height:"20px",width:"20px"})}),(0,l.jsx)(st,{})]})})]}),!p&&(0,l.jsx)("div",{className:"load-strategy__local-footer",children:(0,l.jsx)(a4,{})})]}):(0,l.jsx)("div",{className:"load-strategy__container",children:(0,l.jsxs)("div",{className:"load-strategy__local-dropzone",children:[(0,l.jsx)("input",{type:"file",ref:u,accept:"application/xml, text/xml",style:{display:"none"},onChange:e=>{let t=r(e,!1);t||(0,aY.J)((0,aK.xG)().xml_import_error,void 0,{className:"error-toast"}),m(t)},"data-testid":"dt-load-strategy-file-input"}),(0,l.jsx)(a9,{message:(0,y.NC)("Importing XML files from Binary Bot and other third-party platforms may take longer."),icon:(0,l.jsx)(a2.Z,{fill:"#e18d00",iconSize:"xs"}),className:"load-strategy__section_message"}),(0,l.jsxs)("div",{"data-testid":"dt__local-dropzone-area",className:"load-strategy__local-dropzone-area",onDrop:e=>{r(e,!1)},children:[p?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(a7.Z,{height:"128px",width:"128px",className:"load-strategy__local-icon"}),(0,l.jsx)("div",{className:"load-strategy__local-title",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Drag your XML file here"})}),(0,l.jsx)("div",{className:"load-strategy__local-description",children:(0,l.jsx)(y.Xx,{i18n_default_text:"or, if you prefer..."})})]}):(0,l.jsx)(a5.Z,{height:"96px",width:"96px",className:"load-strategy__local-icon"}),(0,l.jsx)(eO.Z,{text:x?(0,y.NC)("Select an XML file from your device"):(0,y.NC)("Please upload an XML file"),"data-testid":"dt_load-strategy__local-upload",onClick:()=>{var e;return null==u?void 0:null===(e=u.current)||void 0===e?void 0:e.click()},has_effect:!0,primary:!0,large:!0})]})]})})});var ss=a("45845"),sn=a("30810"),sl=a("39590");let si=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||"string"==typeof e?({[sn.R.UNSAVED]:(0,l.jsx)(sl.Z,{iconSize:"xs",fill:"var(--text-general)",className:"icon-general-fill-g-path"}),[sn.R.LOCAL]:(0,l.jsx)(a7.Z,{height:"16px",width:"16px",fill:"var(--text-general)"}),[sn.R.GOOGLE_DRIVE]:(0,l.jsx)(a3.Z,{className:t,height:"16px",width:"16px",fill:"var(--text-general)"})})[e]:(0,l.jsx)(sl.Z,{iconSize:"xs",fill:"var(--text-general)"})},sr=(0,r.Pi)(e=>{let{workspace:t}=e,{load_modal:a,blockly_store:s}=(0,h.oR)(),{setLoading:n}=s,{getSaveType:i,loadStrategyOnModalRecentPreview:r,selected_strategy_id:o,updateXmlValuesOnStrategySelection:d}=a;return(0,l.jsxs)("div",{className:M()("load-strategy__recent-item",{"load-strategy__recent-item--selected":o===t.id}),onClick:()=>{o!==t.id&&(n(!0),r(t.id),d())},"data-testid":"dt_recent_workspace_item",children:[(0,l.jsxs)("div",{className:"load-strategy__recent-item-text",children:[(0,l.jsx)("div",{className:"load-strategy__recent-item-title",title:t.name,children:t.name}),(0,l.jsx)("div",{className:"load-strategy__recent-item-time",children:(0,U.timeSince)(t.timestamp)})]}),(0,l.jsxs)("div",{className:"load-strategy__recent-item-location",children:[si(t.save_type,"load-strategy__recent-icon--active"),(0,l.jsx)("div",{className:"load-strategy__recent-item-saved",children:i(t.save_type)})]})]},t.id)}),so=(0,r.Pi)(()=>{let{load_modal:e}=(0,h.oR)(),{is_explanation_expand:t,recent_strategies:a,toggleExplanationExpand:s}=e;return a.length?(0,l.jsx)("div",{className:"load-strategy__container load-strategy__container--has-footer",children:(0,l.jsxs)("div",{className:"load-strategy__recent",children:[(0,l.jsx)("div",{className:"load-strategy__recent__files",children:a.map(e=>(0,l.jsx)(sr,{workspace:e},e.id))}),(0,l.jsxs)("div",{className:"load-strategy__recent__preview",children:[(0,l.jsx)("div",{className:"load-strategy__title load-strategy__recent-preview-title",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Preview"})}),(0,l.jsx)("div",{className:"load-strategy__preview-workspace",children:(0,l.jsx)("div",{id:"load-strategy__blockly-container",style:{height:"100%"},children:(0,l.jsx)(st,{})})})]})]})}):(0,l.jsx)("div",{className:"load-strategy__container",children:(0,l.jsxs)("div",{className:"load-strategy__recent__empty","data-testid":"dt-load-strategy__recent__empty",children:[(0,l.jsx)("div",{className:"load-strategy__recent__empty-icon",children:(0,l.jsx)(ss.Z,{height:"128px",width:"128px"})}),(0,l.jsx)("div",{className:"load-strategy__recent__empty-title",children:(0,l.jsx)(y.Xx,{i18n_default_text:"You do not have any recent bots"})}),(0,l.jsx)("div",{className:"load-strategy__recent__empty-description",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Create one or upload one from your local drive or Google Drive."})}),(0,l.jsx)("div",{tabIndex:0,className:"load-strategy__recent__empty-expand","data-testid":"dt-load-strategy__recent__empty-expand",onClick:s,onKeyDown:e=>{"Enter"===e.key&&s()},children:(0,l.jsx)(y.Xx,{i18n_default_text:"Why can't I see my recent bots?"})}),(0,l.jsxs)("div",{"data-testid":t?"dt-empty-explanation-list--open":"dt-empty-explanation-list--close",className:M()("load-strategy__recent__empty-explanation",{"load-strategy__recent__empty-explanation--show":t}),children:[(0,l.jsx)("div",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"If you've recently used bots but don't see them in this list, it may be because you:"})}),(0,l.jsxs)("ol",{className:"load-strategy__recent__empty-explanation-list",children:[(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"1. Logged in from a different device"})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"2. Logged in from a different browser"})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"3. Cleared your browser cache"})})]})]})]})})}),sd=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,h.oR)(),{is_open_button_loading:a,is_open_button_disabled:s,loadStrategyOnBotBuilder:n,toggleLoadModal:i}=e,{setOpenSettings:r}=t;return(0,l.jsx)(eO.Z,{text:(0,y.NC)("Open"),onClick:()=>{n(),i(),r(aK.tx.BOT_IMPORT)},is_loading:a,has_effect:!0,primary:!0,large:!0,disabled:s})}),sc=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,h.oR)(),{active_index:a,is_load_modal_open:s,loaded_local_file:n,onEntered:i,recent_strategies:r,setActiveTabIndex:o,toggleLoadModal:d,tab_name:c}=e,{setPreviewOnPopup:_}=t,{isDesktop:u}=(0,g.F)(),x=(0,y.NC)("Load strategy"),m=e=>{o(e),aQ({load_strategy_tab:a0.yO[e+(u?0:1)]})};if(!u)return(0,l.jsx)(ay,{is_modal_open:s,className:"load-strategy__wrapper",header:x,onClickClose:()=>{_(!1),d(),(0,tQ._W)({subform_name:"load_strategy",load_strategy_tab:a0.yO[a+1]})},height_offset:"80px",page_overlay:!0,children:(0,l.jsxs)(e2.Z,{active_index:a,onTabItemClick:m,top:!0,children:[(0,l.jsx)("div",{label:(0,y.NC)("Local"),children:(0,l.jsx)(sa,{})}),(0,l.jsx)("div",{label:"Google Drive",children:(0,l.jsx)(a8,{})})]})});let p=!!n&&c===aW.y.TAB_LOCAL,j=r.length>0&&c===aW.y.TAB_RECENT;return(0,l.jsxs)(f.Z,{title:x,className:"load-strategy",width:"1000px",height:"80vh",is_open:s,toggleModal:()=>{d(),(0,tQ._W)({subform_name:"load_strategy",load_strategy_tab:a0.yO[a+(u?0:1)]})},onEntered:i,elements_to_ignore:[document.querySelector(".injectionDiv")],children:[(0,l.jsx)(f.Z.Body,{children:(0,l.jsxs)(e2.Z,{active_index:a,onTabItemClick:m,top:!0,header_fit_content:!0,children:[(0,l.jsx)("div",{label:(0,y.NC)("Recent"),children:(0,l.jsx)(so,{})}),(0,l.jsx)("div",{label:(0,y.NC)("Local"),children:(0,l.jsx)(sa,{})}),(0,l.jsx)("div",{label:"Google Drive",children:(0,l.jsx)(a8,{})})]})}),j&&(0,l.jsx)(f.Z.Footer,{has_separator:!0,children:(0,l.jsx)(sd,{})}),p&&(0,l.jsx)(f.Z.Footer,{has_separator:!0,children:(0,l.jsx)(a4,{})})]})}),s_=e=>{let{children:t,should_wrap_items:a}=e;return a?(0,l.jsx)("div",{className:"dc-radio-group__item-wrapper",children:t}):(0,l.jsx)(i.Fragment,{children:t})},su=e=>{let{className:t,name:a,onToggle:s,required:n,selected:r,should_wrap_items:o,children:d}=e,[c,_]=i.useState(r);i.useEffect(()=>{_(r)},[r]);let u=e=>{_(e.target.value),s(e)};return(0,l.jsx)("div",{className:M()("dc-radio-group",t),children:Array.isArray(d)&&d.filter(e=>!e.props.hidden).map(e=>(0,l.jsx)(s_,{should_wrap_items:o,children:(0,l.jsxs)("label",{className:M()("dc-radio-group__item",t,{"dc-radio-group__item--selected":c===e.props.value}),children:[(0,l.jsx)("input",{id:e.props.id,name:a,className:"dc-radio-group__input",type:"radio",value:e.props.value,checked:c===e.props.value,onChange:u,disabled:e.props.disabled,required:n}),(0,l.jsx)("span",{className:M()("dc-radio-group__circle",{"dc-radio-group__circle--selected":c===e.props.value,"dc-radio-group__circle--disabled":e.props.disabled,"dc-radio-group__circle--error":e.props.has_error})}),(0,l.jsx)(V.Z,{size:"xs",className:M()("dc-radio-group__label",{"dc-radio-group__label--disabled":e.props.disabled,"dc-radio-group__label--error":e.props.has_error}),children:e.props.label})]})},e.props.value))})};su.Item=e=>{let{children:t,hidden:a=!1,...s}=e;return(0,l.jsx)("div",{hidden:a,...s,children:t})};let sx=e=>{let{icon:t,text:a,google_drive_connected:s}=e,n="Google Drive"===a;return(0,l.jsx)("div",{className:"save-type__container",children:(0,l.jsxs)("div",{className:"save-type__radio",children:[t&&i.cloneElement(t,{className:M()("save-type__icon",{"save-type__icon--active":n&&s,"save-type__icon--disabled":n&&!s},t.props.className)}),(0,l.jsx)(V.Z,{as:"p",align:"center",size:"xxs",color:n&&!s?"disabled":"prominent",lineHeight:"s",className:"save-type__radio-text",children:(0,y.NC)(a)})]})})},sm=e=>{let{bot_name:t,button_status:a,is_authorised:s,onConfirmSave:n,onDriveConnect:i,validateBotName:r,toggleSaveModal:o,is_mobile:d,is_onscreen_keyboard_active:c,setCurrentFocus:_}=e;return(0,l.jsx)(eF.J9,{initialValues:{is_local:!0,save_as_collection:!1,bot_name:t===(0,U.config)().default_file_name?"":t},validate:r,onSubmit:n,children:e=>{let{values:{is_local:t},setFieldValue:n,touched:r,errors:u}=e;return(0,l.jsx)(ed.Z,{height:d?"calc(100%)":"500px",autohide:!0,children:(0,l.jsxs)(eF.l0,{className:M()({"form--active-keyboard":c}),children:[(0,l.jsxs)("div",{className:"modal__content",children:[(0,l.jsxs)(V.Z,{size:"xs",lineHeight:"l",children:[(0,y.NC)("Enter your bot name, choose to save on your computer or Google Drive, and hit "),(0,l.jsx)("strong",{children:(0,y.NC)("Save.")})]}),(0,l.jsx)("div",{className:"modal__content-row",children:(0,l.jsx)(eF.gN,{name:"bot_name",children:e=>{let{field:t}=e;return(0,l.jsx)(eY,{className:"save-type__input",type:"text",placeholder:(0,y.NC)("Untitled Strategy"),error:r[t.name]&&u[t.name],label:(0,y.NC)("Bot name"),onFocus:e=>_(e.currentTarget.value),onBlur:()=>_(""),...t,max_characters:25})}})}),(0,l.jsx)("div",{className:"modal__content-row",children:(0,l.jsxs)(su,{className:"radio-group__save-type",name:"is_local",selected:()=>s&&!t?U.save_types.GOOGLE_DRIVE:U.save_types.LOCAL,onToggle:()=>n("is_local",!t),children:[(0,l.jsx)(su.Item,{id:"local",label:(0,l.jsx)(sx,{text:(0,y.NC)("Local"),icon:d?(0,l.jsx)(a5.Z,{height:"48px",width:"48px"}):(0,l.jsx)(a7.Z,{height:"48px",width:"48px"})}),value:U.save_types.LOCAL}),(0,l.jsx)(su.Item,{id:"drive",label:(0,l.jsx)(sx,{text:"Google Drive",icon:(0,l.jsx)(a3.Z,{height:"48px",width:"48px"}),google_drive_connected:s,onDriveConnect:i}),value:U.save_types.GOOGLE_DRIVE,disabled:!s,className:M()({"dc-radio-group__item-disabled":!s})})]})})]}),(0,l.jsxs)("div",{className:M()("modal__footer",{"modal__footer--active-keyboard":c}),children:[(0,l.jsx)(eO.Z,{type:"button",className:"modal__footer--button",text:(0,y.NC)("Cancel"),onClick:o,secondary:!0}),(0,l.jsx)(eO.Z,{className:"modal__footer--button",type:"submit",is_loading:1===a,is_submit_success:2===a,text:(0,y.NC)("Save"),primary:!0})]})]})})}})},sh=(0,r.Pi)(()=>{let{save_modal:e,google_drive:t,dashboard:a,load_modal:s,ui:n}=(0,h.oR)(),{dashboard_strategies:r}=s,{button_status:o,bot_name:d,is_save_modal_open:c,onConfirmSave:_,toggleSaveModal:u,updateBotName:x,validateBotName:m}=e,{is_authorised:p,onDriveConnect:j}=t,{is_onscreen_keyboard_active:v,setCurrentFocus:b}=n,{isMobile:N}=(0,g.F)(),{active_tab:C}=a;return(0,i.useEffect)(()=>{if(1===C){var e;x((null==r?void 0:null===(e=r[0])||void 0===e?void 0:e.name)??"")}},[C,r,x]),N?(0,l.jsx)(ay,{is_modal_open:c,className:"save-modal__wrapper",header:(0,y.NC)("Save strategy"),onClickClose:u,height_offset:"80px",page_overlay:!0,children:(0,l.jsx)(sm,{bot_name:d,button_status:o,is_authorised:p,onConfirmSave:_,onDriveConnect:j,validateBotName:m,toggleSaveModal:u,is_mobile:N,is_onscreen_keyboard_active:v,setCurrentFocus:b})}):(0,l.jsx)(f.Z,{title:(0,y.NC)("Save strategy"),className:"modal--save",width:"32.8rem",height:"50rem",is_open:c,toggleModal:u,children:(0,l.jsx)(sm,{bot_name:d,button_status:o,is_authorised:p,onConfirmSave:_,onDriveConnect:j,validateBotName:m,toggleSaveModal:u,setCurrentFocus:b})})});var sp=a("58902"),sj=a("13323");let sv={fontWeight:"700",fontSize:"1.4rem",height:"4rem",padding:"1rem 1.6rem"},sb=e=>{let{steps:t,styles:a,handleCallback:s,...n}=e;return(0,l.jsx)(sj.ZP,{steps:t,continuous:!0,callback:s,locale:{back:(0,y.NC)("Previous"),next:(0,y.NC)("Next")},...n,styles:{options:{arrowColor:"var(--general-main-2)",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)",spotlightShadow:"0 0 15px rgba(0, 0, 0, 0.5)",width:440},buttonBack:{border:"0.2rem solid var(--text-less-prominent)",marginInlineEnd:"1rem",borderRadius:"0.4rem",color:"var(--text-general)",...sv},buttonNext:{...sv},buttonClose:{insetInlineEnd:"0px",right:"unset"},overlay:{height:"100%"},...a}})},sy=(0,r.Pi)(()=>{let{dashboard:e}=(0,h.oR)(),{is_tour_dialog_visible:t,setTourDialogVisibility:a}=e,{isDesktop:s}=(0,g.F)();return(0,l.jsx)("div",{children:(0,l.jsxs)(aq.Z,{is_visible:t,confirm_button_text:(0,y.NC)("OK"),onConfirm:()=>{a(!1)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1,children:[(0,l.jsx)("div",{className:"dc-dialog__content__header",children:(0,l.jsx)(V.Z,{weight:"bold",color:"prominent",size:s?"s":"xs",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Congratulations"})})}),(0,l.jsx)("div",{className:"dc-dialog__content__description",children:(0,l.jsx)(V.Z,{size:s?"xs":"xxs",color:"prominent",children:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"dc-dialog__content__description__text","data-testid":"tour-success-message",children:(0,l.jsx)(y.Xx,{i18n_default_text:"You have successfully created your bot using a simple strategy."},0)}),(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Now, <0>run the bot</0> to test out the strategy.",components:[(0,l.jsx)("strong",{},0)]},0)}),(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Note: If you wish to learn more about the Bot Builder, you can proceed to the <0>Tutorials</0> tab.",components:[(0,l.jsx)("strong",{},0)]},0)})]})})})]})})});var sg=a("21995"),sf=a("63430"),sN=a("39338");let sC=(0,r.Pi)(e=>{let{content:t,media:a,label:s,step_index:n,has_localize_component:r=!1,show_actions:o=!0}=e;return(0,l.jsx)(i.Fragment,{children:(0,l.jsxs)("div",{className:"onboard",children:[o&&(0,l.jsx)("div",{className:"onboard__header",children:(0,l.jsxs)(V.Z,{color:"less-prominent",lineHeight:"l",children:[n,"/6"]})}),(0,l.jsxs)("div",{className:"onboard__steps",children:[(0,l.jsx)("div",{className:"onboard__label",children:(0,l.jsx)(V.Z,{as:"p",lineHeight:"l",weight:"bold",children:s})}),a&&(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",style:{width:"100%"},src:a}),(0,l.jsx)("div",{className:"onboard__content",children:(0,l.jsx)(l.Fragment,{children:t.map(e=>r?e:(0,l.jsx)("div",{className:"onboard__content__block",children:(0,l.jsx)(V.Z,{align:"left",as:"p",size:"xs",lineHeight:"l",children:e})},`onboard--${(0,sN.Fs)()}`))})})]})]})})}),sk={showProgress:!1,spotlightClicks:!1,disableBeacon:!0,disableOverlay:!0,disableCloseOnEsc:!0},sw=[{target:"#id-bot-builder",content:(0,l.jsx)(sC,{label:(0,l.jsx)(y.Xx,{i18n_default_text:"Build from scratch"}),content:[(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Create your bot using our drag-and-drop blocks or click Quick Strategy to choose from the ready-to-use bot templates."})}),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(y.Xx,{i18n_default_text:"We also provide a guide on the Tutorial tab to show you how you can build and execute a simple strategy."})})],media:"/assets/videos/dbot-onboarding-tour-step-1.mp4",step_index:1}),...sk,disableOverlay:!1},{target:"#id-charts",content:(0,l.jsx)(sC,{label:(0,l.jsx)(y.Xx,{i18n_default_text:"Monitor the market"}),content:[(0,l.jsx)(y.Xx,{i18n_default_text:"View the market price of your favourite assets."},"view the market")],media:"/assets/videos/dbot-onboarding-tour-step-2.mp4",step_index:2}),...sk,disableOverlay:!1},{target:"#id-tutorials",content:(0,l.jsx)(sC,{label:(0,l.jsx)(y.Xx,{i18n_default_text:"Learn more with our tutorials"}),content:[(0,l.jsx)(y.Xx,{i18n_default_text:"Explore the video guides and FAQs to build your bot in the tutorials tab."},"explore tutorials")],media:"/assets/videos/dbot-onboarding-tour-step-3.mp4",step_index:3}),...sk,disableOverlay:!1},{target:"#tab__dashboard__table__tiles",content:(0,l.jsx)(sC,{label:(0,l.jsx)(y.Xx,{i18n_default_text:"Use these shortcuts"}),content:[(0,l.jsx)(y.Xx,{i18n_default_text:"You can also import or build your bot using any of these shortcuts."},"use shortcuts")],step_index:4}),placement:(0,F.rK)()?"left":"right",...sk,disableOverlay:!1},{target:".dc-drawer__container",content:(0,l.jsx)(sC,{label:(0,l.jsx)(y.Xx,{i18n_default_text:"Check your bots performance"}),content:[(0,l.jsx)(y.Xx,{i18n_default_text:"See how your bot is doing in real-time."},"check bot performance")],media:"/assets/videos/dbot-onboarding-tour-step-5.mp4",step_index:5}),placement:(0,F.rK)()?"right":"left",...sk,disableOverlay:!1},{target:".animation__wrapper",content:(0,l.jsx)(sC,{label:(0,l.jsx)(y.Xx,{i18n_default_text:"Run your bot"}),content:[(0,l.jsx)(y.Xx,{i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[(0,l.jsx)("strong",{},0)]},"run your bot")],media:"/assets/videos/dbot-onboarding-tour-step-6.mp4",step_index:6}),...sk,disableOverlay:!1},{target:"#id-tutorials",content:(0,l.jsx)(sC,{label:(0,l.jsx)(y.Xx,{i18n_default_text:"Want to retake the tour?"}),content:[(0,l.jsx)(V.Z,{as:"p",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Head to the Tutorials tab to do so."})},"0-id-tutorials")],step_index:7,show_actions:!1,has_localize_component:!0}),locale:{last:(0,y.NC)("Got it, thanks!")},...sk,hideBackButton:!0,disableOverlay:!1}],sT=[{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 1 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"First, set the <0>Trade parameters</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left joyride-content__sub-title",children:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>1. Trade parameters:<0>",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"First, set <0>Market</0> to Derived > Continuous Indices > Volatility 100 (1s) Index.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Then, set <0>Trade type</0> to Up/Down > Rise/Fall.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"For <0>Contract type,</0> set it to Both.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"For <0>Default candle interval,</0> set it to 1 minute",components:[(0,l.jsx)("strong",{},0)]})})]})})]})},{show_label:!0}),placement:(0,F.rK)()?"bottom":"right",...sk},{target:".animation__wrapper",content:(0,l.jsx)(()=>(0,l.jsxs)("div",{className:"joyride-content",children:[(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"For <0>Trade options</0>, set it as below:",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Duration</0>: Ticks 1",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Stake: USD</0> 10 (min: 0.35 - max: 50000)",components:[(0,l.jsx)("strong",{},0)]})})]})})]}),{}),placement:(0,F.rK)()?"bottom":"right",...sk},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 2 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Then, set the <0>Purchase conditions</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left joyride-content__sub-title",children:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>2. Purchase conditions</0>:",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)("ul",{children:(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Purchase</0>: Rise",components:[(0,l.jsx)("strong",{},0)]})})})})]})},{show_label:!0}),placement:(0,F.rK)()?"bottom":"right",...sk},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left joyride-content__left__step-three",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 3 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The third block is <0>optional</0>. You may use this block if you want to sell your contract before it expires. For now, leave the block as it is. ",components:[(0,l.jsx)("strong",{},0)]})})]})},{show_label:!0}),placement:(0,F.rK)()?"bottom":"right",...sk},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 4 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Next, go to <0>Utility tab</0> under the Blocks menu. Tap the drop-down arrow and hit <0>Loops</0>.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsxs)("div",{className:"joyride-content__left",children:[(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Look for the <0>Repeat While/Until</0>, and click the + icon to add the block to the workspace area.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Choose <0>until</0> as the repeat option.",components:[(0,l.jsx)("strong",{},0)]})})]}),(0,l.jsxs)("div",{className:"joyride-content__left joyride-content__with-icon",children:[(0,l.jsx)("div",{className:"joyride-content__with-icon__left",children:(0,l.jsx)(sf.Z,{className:"db-contract-card__result-icon",fill:"#4bb4b3"})}),(0,l.jsx)("div",{className:"joyride-content__with-icon__right",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Pro tip: You can also click and drag out the desired block",components:[(0,l.jsx)("strong",{},0)]})})]})]}),(0,l.jsx)("div",{children:(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload",children:(0,l.jsx)("source",{src:"/assets/videos/bot-builder-tour-step-4.mp4",type:"video/mp4"})})})]})},{show_label:!0}),placement:(0,F.rK)()?"bottom":"right",...sk},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 5 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Now, tap the <0>Analysis</0> drop-down arrow and hit <0>Contract</0>.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsxs)("ul",{children:[(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Go to the <0>Last trade result</0> block and click + icon to add the <0>Result is Win</0> block to the workspace.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Then, drag the <0>Result is win</0> into the empty slot next to <0>repeat until</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Now, go to the <0>Restart trading conditions</0> block.",components:[(0,l.jsx)("strong",{},0)]})}),(0,l.jsx)("li",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Drag the <0>Trade again</0> block and add it into the <0>do</0> part of the <0>Repeat until</0> block.",components:[(0,l.jsx)("strong",{},0)]})})]})}),(0,l.jsx)("div",{children:(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,playsInline:!0,preload:"auto",disablePictureInPicture:!0,controlsList:"nodownload",children:(0,l.jsx)("source",{src:"/assets/videos/bot-builder-tour-step-5.mp4",type:"video/mp4"})})})]})},{show_label:!0}),placement:(0,F.rK)()?"bottom":"right",...sk},{target:".animation__wrapper",content:(0,l.jsx)(e=>{let{show_label:t=!1}=e;return(0,l.jsxs)("div",{className:"joyride-content",children:[t&&(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 6 :"})}),(0,l.jsx)("div",{className:"joyride-content__left",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Finally, drag and add the whole <0>Repeat</0> block to the <0>Restart trading conditions</0> block.",components:[(0,l.jsx)("strong",{},0)]})})]})},{show_label:!0}),locale:{last:(0,y.NC)("Next")},...sk}],sE=[{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 1"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"First, click the Import icon on the tool bar."},"step-1")},"step-1-wrapper")],tour_step_key:1},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 2"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Next, import your bot directly from your mobile device or from Google Drive."},"step-2")},"step-2-wrapper")],tour_step_key:2},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Step 3"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Once imported, you will see a preview of the bot on the workspace. Click run to start trading with this bot."},"step-3")},"step-3-wrapper")],tour_step_key:3}],sS=[{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Welcome to Deriv Bot"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Lets take a quick tour to discover how Deriv Bot works. Press <0>Start</0> to begin.",components:[(0,l.jsx)("strong",{},0)]},"get-started-on-deriv-bot")},"get-started-on-deriv-bot-wrapper")],tour_step_key:1},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Import or choose your bot"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Import your bot or tap Quick Strategies to choose from the ready-to-use bot templates."},"import-or-choose-your-bot")},"import-or-choose-your-bot-wrapper")],media:"/assets/videos/dbot-mobile-onboarding-step-1.mp4",tour_step_key:2},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Monitor the market"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"View the market price of your favourite assets."},"monitor-the-market")},"monitor-the-market-wrapper")],media:"/assets/videos/dbot-mobile-onboarding-step-2.mp4",tour_step_key:3},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Learn more with our tutorials"}),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Explore the video guides and FAQs to build your bot in the tutorials tab."},"learn-more-with-our-tutorials")},"learn-more-with-our-tutorials-wrapper")],media:"/assets/videos/dbot-mobile-onboarding-step-3.mp4",tour_step_key:4},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Use these shortcuts"}),img:(0,sg.oY)("dbot-mobile-onboarding-step-4.png"),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"You can also import or build your bot using any of these shortcuts."},"use-these-shortcuts")},"use-these-shortcuts-wrapper")],tour_step_key:5},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Check your bots performance"}),media:"/assets/videos/dbot-mobile-onboarding-step-5.mp4",content:[(0,l.jsxs)("span",{children:[(0,l.jsx)(y.Xx,{i18n_default_text:"See how your bot is doing in real-time."},"check-your-bots-performance"),","]},"check-your-bots-performance-wrapper")],tour_step_key:6},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Run your bot"}),media:"/assets/videos/dbot-mobile-onboarding-step-6.mp4",content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Click <0>Run</0> when you want to start trading, and click <0>Stop</0> when you want to stop.",components:[(0,l.jsx)("strong",{},0)]},"run-your-bot")},"run-your-bot-wrapper")],tour_step_key:7},{header:(0,l.jsx)(y.Xx,{i18n_default_text:"Want to retake the tour?"}),img:(0,sg.oY)("dbot-mobile-onboarding-step-7.png"),content:[(0,l.jsx)("span",{children:(0,l.jsx)(y.Xx,{i18n_default_text:"Head to the Tutorials tab to do so."},"want-to-retake-the-tour")},"want-to-retake-the-tour-wrapper")],tour_step_key:8}],sA=e=>e?(0,l.jsx)(y.Xx,{i18n_default_text:"Heres a quick guide on how to use Deriv Bot on the go."},"tour-dialog-info-mobile"):(0,l.jsx)(y.Xx,{i18n_default_text:"Learn how to build a bot with a simple strategy."},"tour-dialog-info-desktop"),sI=e=>e?(0,l.jsx)(y.Xx,{i18n_default_text:"You can import a bot from your mobile device or from Google drive, see a preview in the bot builder, and start trading by running the bot."},"tour-dialog-action-mobile"):"",sR=(0,l.jsx)(y.Xx,{i18n_default_text:"Welcome to Deriv Bot"},"onboarding-tour-header"),sO=e=>e?(0,l.jsx)(y.Xx,{i18n_default_text:"Bot Builder guide"},"tour_header-mobile"):(0,l.jsx)(y.Xx,{i18n_default_text:"Let's build a Bot!"},"tour_header-desktop");var sM=a("84006");let sL=(0,r.Pi)(()=>{let{dashboard:e}=(0,h.oR)(),{active_tab:t,is_tour_dialog_visible:a,setTourDialogVisibility:s,setActiveTour:n,setShowMobileTourDialog:r}=e,{isDesktop:o}=(0,g.F)(),d=0===t?"onboard_tour_token":"bot_builder_token",c=()=>{!o&&r(!1),s(!1),n(""),(0,sM.X7)(new Date().getTime(),d)},_=t===tK.ve.DASHBOARD,u=sA(!o),x=sI(!o),[m,j]=i.useState(!1),v=p();i.useEffect(()=>{v?j(!1):a?j(!0):j(!1)},[v,a]);let b=0===t?sR:sO(!o);return(0,l.jsx)("div",{children:(0,l.jsxs)(aq.Z,{is_visible:m,cancel_button_text:(0,y.NC)("Skip"),onCancel:()=>c(),confirm_button_text:(0,y.NC)("Start"),onConfirm:()=>{n(sM.TJ[t]),!o&&r(!1),s(!1),(0,sM.X7)(new Date().getTime(),d)},is_mobile_full_width:!0,className:"dc-dialog tour-dialog",has_close_icon:!1,portal_element_id:"modal_root",children:[(0,l.jsx)("div",{className:"dc-dialog__content__header",children:(0,l.jsx)(V.Z,{weight:"bold",color:"prominent",size:o?"s":"xs",children:b})}),(0,l.jsx)("div",{className:"dc-dialog__content__description",children:(0,l.jsx)(V.Z,{size:o?"xs":"xxs",color:"prominent",children:(0,l.jsx)(l.Fragment,{children:_?(0,l.jsx)("div",{children:(0,l.jsx)(y.Xx,{i18n_default_text:`Lets take a quick tour to discover how Deriv Bot works. Press <0>Start</0> to begin.`,components:[(0,l.jsx)("strong",{},0)]},0)}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:u}),x&&(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:x}),(0,l.jsx)("div",{className:"dc-dialog__content__description__text",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Note: You can find this tutorial in the <0>Tutorials</0> tab.",components:[(0,l.jsx)("strong",{},0)]},0)})]})})})})]})})}),sD=()=>{let[e,t]=(0,i.useState)(!1),[a,s]=(0,i.useState)(!1);return{is_finished:e,handleJoyrideCallback:e=>{let{action:a,status:n}=e;"finished"===n?t(!0):("close"===a||"skip"===a)&&s(!0)},setIsFinished:t,is_close_tour:a,setIsCloseTour:s}},sU=(0,r.Pi)(()=>{let{is_close_tour:e,is_finished:t,handleJoyrideCallback:a,setIsCloseTour:s}=sD(),{dashboard:n,load_modal:r}=(0,h.oR)(),{active_tab:o,active_tour:d,setActiveTour:c,setTourDialogVisibility:_}=n,{is_load_modal_open:u}=r;return!(0,sp.$8)("bot_builder_token")&&1===o&&_(!0),i.useEffect(()=>{t?(_(!0),c("")):e&&(c(""),s(!1))},[e,t,c,s,_]),(0,l.jsxs)(l.Fragment,{children:[t?(0,l.jsx)(sy,{}):u?null:(0,l.jsx)(sL,{}),d&&(0,l.jsx)(sb,{handleCallback:a,steps:sT,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClose:!0,styles:{options:{arrowColor:"transparent",backgroundColor:"var(--general-main-2)",primaryColor:"var(--brand-red-coral)",textColor:"var(--text-general)"}}})]})}),sF=e=>{let{step:t,steps_list:a,is_transition:s=!1,onStepChange:n}=e;return(0,l.jsx)("div",{className:"dc-progress-bar-tracker",children:a.map((e,a)=>{let i=t===a+1;return(0,l.jsx)("div",{onClick:()=>{n(a+1)},className:M()({"dc-progress-bar-tracker-rectangle":i,"dc-progress-bar-tracker-circle":!i,"dc-progress-bar-tracker-transition":s})},e)})})},sZ=e=>{let{label:t,type:a="default",...s}=e;return t?(0,l.jsx)("button",{className:a,...s,children:(0,l.jsx)(V.Z,{color:"prominent",align:"center",weight:"bold",as:"span",lineHeight:"s",size:"xs",children:t})}):null},sz=(0,r.Pi)(()=>{let{dashboard:e,load_modal:t,quick_strategy:a}=(0,h.oR)(),{toggleTourLoadModal:s}=t,{onTourEnd:n,setTourActiveStep:r,active_tour:o,show_mobile_tour_dialog:d,active_tab:c,setShowMobileTourDialog:_,setTourDialogVisibility:u}=e,{is_open:x}=a,[m,p]=i.useState(1),j=sE.find(e=>{let{tour_step_key:t}=e;return t===m}),v=3===m?"finish-bot-builder-tour":"next-bot-builder-tour";i.useEffect(()=>{r(m),d||(0,sM._y)(o,m),2===m?s(!0):""!==o&&s(!1),!(0,sp.$8)("bot_builder_token")&&1===c&&(x?u(!1):u(!0),_(!0))},[m,d]);let b=3===m?(0,y.NC)("Finish"):(0,y.NC)("Next"),g="onboarding"===o;return(0,l.jsxs)(l.Fragment,{children:[d&&(0,l.jsx)(sL,{}),o&&!d&&(0,l.jsxs)("div",{"data-testid":"botbuilder-tour-mobile",className:"dbot-slider dbot-slider__bot-builder-tour",children:[(0,l.jsx)("div",{className:"dbot-slider__label",children:(0,l.jsx)(V.Z,{as:"span",size:"xs",weight:"bold",children:null==j?void 0:j.header})}),(0,l.jsx)("div",{className:"dbot-slider__content",children:(0,l.jsx)(V.Z,{as:"span",lineHeight:"s",size:"xs",children:null==j?void 0:j.content})}),(0,l.jsxs)("div",{className:"dbot-slider__status",children:[(0,l.jsx)("div",{className:"dbot-slider__progress-bar",children:(0,l.jsx)(sF,{step:m,steps_list:sE.map(e=>e.tour_step_key.toString()),onStepChange:p})}),(0,l.jsxs)("div",{className:"dbot-slider__button-group",children:[1!==m&&(0,l.jsx)(sZ,{onClick:()=>{p(m-1)},label:(0,y.NC)("Previous"),"data-testid":"prev-bot-builder-tour"}),(0,l.jsx)(sZ,{type:"danger",onClick:()=>{p(m+1),n(m,g)},label:b,"data-testid":v})]})]})]})]})}),sP=(0,r.Pi)(e=>{let{is_mobile:t}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)(sz,{}):(0,l.jsx)(sU,{})})});var sB=a("16310");let sX=e=>{let{form_values:t,selected_strategy:a}=e;aA.Analytics.trackEvent("ce_bot_form",{action:aJ.om.RUN_QUICK_STRATEGY,form_name:aJ.oH,subform_name:"quick_strategy",strategy_name:(0,a0.gc)(a),...(0,a0.qc)({form_values:t,selected_strategy:a})})},s$=e=>{let{form_values:t,selected_strategy:a}=e;aA.Analytics.trackEvent("ce_bot_form",{action:aJ.om.EDIT_QUICK_STRATEGY,form_name:aJ.oH,subform_name:"quick_strategy",strategy_name:(0,a0.gc)(a),...(0,a0.qc)({form_values:t,selected_strategy:a})})};var sH=a("85414"),sV=a("53890"),sq=a("27529");var sG=((n={})[n.StrategySelect=0]="StrategySelect",n[n.StrategyVerified=1]="StrategyVerified",n[n.StrategyCompleted=2]="StrategyCompleted",n);let sY=Object.freeze({ALL:0,ACCUMULATORS:1,OPTIONS:2}),sK=[(0,y.NC)("All"),(0,y.NC)("Accumulators"),(0,y.NC)("Options")],sW=[{name:"MARTINGALE",display_name:(0,sH.j)().MARTINGALE.label,id:0,parent:[(0,y.NC)("Options")]},{name:"D_ALEMBERT",display_name:(0,sH.j)().D_ALEMBERT.label,id:1,parent:[(0,y.NC)("Options")]},{name:"REVERSE_MARTINGALE",display_name:(0,sH.j)().REVERSE_MARTINGALE.label,id:2,parent:[(0,y.NC)("Options")]},{name:"REVERSE_D_ALEMBERT",display_name:(0,sH.j)().REVERSE_D_ALEMBERT.label,id:3,parent:[(0,y.NC)("Options")]},{name:"OSCARS_GRIND",display_name:(0,sH.j)().OSCARS_GRIND.label,id:4,parent:[(0,y.NC)("Options")]},{name:"STRATEGY_1_3_2_6",display_name:(0,sH.j)().STRATEGY_1_3_2_6.label,id:5,parent:[(0,y.NC)("Options")]},{name:"ACCUMULATORS_MARTINGALE",display_name:(0,sH.j)().ACCUMULATORS_MARTINGALE.label,id:6,parent:[(0,y.NC)("Accumulators")]},{name:"ACCUMULATORS_MARTINGALE_ON_STAT_RESET",display_name:(0,sH.j)().ACCUMULATORS_MARTINGALE_ON_STAT_RESET.label,id:7,parent:[(0,y.NC)("Accumulators")]},{name:"ACCUMULATORS_DALEMBERT",display_name:(0,sH.j)().ACCUMULATORS_DALEMBERT.label,id:8,parent:[(0,y.NC)("Accumulators")]},{name:"ACCUMULATORS_DALEMBERT_ON_STAT_RESET",display_name:(0,sH.j)().ACCUMULATORS_DALEMBERT_ON_STAT_RESET.label,id:9,parent:[(0,y.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_MARTINGALE",display_name:(0,sH.j)().ACCUMULATORS_REVERSE_MARTINGALE.label,id:10,parent:[(0,y.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET",display_name:(0,sH.j)().ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET.label,id:11,parent:[(0,y.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_DALEMBERT",display_name:(0,sH.j)().ACCUMULATORS_REVERSE_DALEMBERT.label,id:12,parent:[(0,y.NC)("Accumulators")]},{name:"ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET",display_name:(0,sH.j)().ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET.label,id:13,parent:[(0,y.NC)("Accumulators")]}],sJ=e=>{let{current_step:t,is_mobile:a=!1}=e,s=t===sG.StrategyCompleted?100:50;return a?(0,l.jsx)(sq.D,{percentage:s,label:"",danger_limit:101,is_loading:!1,warning_limit:0}):(0,l.jsx)("div",{className:"qs-stepper",children:(0,l.jsx)(sV.t,{currentStep:t,labels:[(0,y.NC)("Default"),(0,y.NC)("Strategy template"),(0,y.NC)("Trade parameters")]})})};var sQ=a("17009"),s0=a("95975"),s1=a("35371"),s3=a("51667");let s8=e=>{let{title:t,items:a,onSelectStrategy:s}=e;return a.length>0?(0,l.jsxs)("div",{className:"strategy-template-picker__strategy",children:[(0,l.jsx)("div",{className:"strategy-template-picker__title",children:(0,l.jsx)(V.Z,{size:"xs",weight:"bold",children:t})}),a.map((e,a)=>(0,l.jsx)("div",{className:"strategy-template-picker__links",children:(0,l.jsx)(v.r,{hasChevron:!0,size:"sm",onClick:()=>s(e.name,t),children:e.display_name})},a))]}):null},s5=e=>{let{selector_chip_value:t,search_value:a,is_searching:s,onSelectStrategy:n}=e,i=[],r=!1,o=e=>(r=e.toLowerCase().includes(a.toLowerCase()),s&&r||!s);sW.filter(e=>e.parent.some(e=>o(e))||e.display_name.toLowerCase().includes(a.toLowerCase())).forEach(e=>{let t={...e};if(s&&""!==a){if(e.display_name.toLowerCase().includes(a.toLowerCase()))t.parent=[...e.parent];else{let s=t.parent.filter(e=>e.toLowerCase().includes(a.toLowerCase()));t.parent=s.length>0?s:e.parent}}else t.parent=[...e.parent];i.push(t)});let d=i.filter(e=>e.parent.includes(sK[sY.OPTIONS])),c=i.filter(e=>e.parent.includes(sK[sY.MULTIPLIERS])),_=i.filter(e=>e.parent.includes(sK[sY.ACCUMULATORS])),u=sK[t],x=[{type:(0,y.NC)("Accumulators"),items:_},{type:(0,y.NC)("Options"),items:d},{type:(0,y.NC)("Multipliers"),items:c}],m=e=>u===(0,y.NC)("All")||u===e,h=x.filter(e=>{let{type:t}=e;return m(t)}),p=h.some(e=>{let{items:t}=e;return t.length>0});return i.length>0&&p?(0,l.jsx)("div",{className:"strategy-template-picker__strategies",children:h.map(e=>{let{type:t,items:a}=e;return(0,l.jsx)(s8,{title:t,items:a,onSelectStrategy:n},t)})}):(0,l.jsx)("div",{className:"no-results",children:(0,l.jsx)(V.Z,{size:"xs",children:(0,y.NC)("No results found")})})},s7=(0,r.Pi)(e=>{let{setCurrentStep:t,setSelectedTradeType:a}=e,{dashboard:s,quick_strategy:n}=(0,h.oR)(),{setActiveTabTutorial:r,setActiveTab:o,setFAQSearchValue:d,filterTuotrialTab:c}=s,{setFormVisibility:_,setSelectedStrategy:u}=n,[x,m]=i.useState(0),[p,j]=i.useState(!1),[v,b]=i.useState(""),g=e=>{m(e)};return(0,l.jsxs)("div",{className:"strategy-template-picker",children:[(0,l.jsxs)("div",{className:"strategy-template-picker__panel",children:[(0,l.jsx)(s1.U,{onChange:e=>{b(e.target.value),j(!0),d(e.target.value),c(e.target.value)},placeholder:(0,y.NC)("Search"),type:"text",value:v,inputSize:"sm"}),(0,l.jsx)("button",{className:"strategy-template-picker__icon",onClick:()=>{o(tK.ve.TUTORIAL),r(2),_(!1),setTimeout(()=>{let e=document.getElementById("id-tutorials");e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})},100)},children:(0,l.jsx)(s0.Z,{iconSize:"sm"})})]}),(0,l.jsx)("div",{className:"strategy-template-picker__chips",children:sK.map((e,t)=>(0,l.jsx)(s3.A.Selectable,{onClick:()=>g(t),selected:t==x,size:"sm",label:e},t))}),(0,l.jsx)(s5,{selector_chip_value:x,search_value:v,is_searching:p,onSelectStrategy:(e,s)=>{u(e),a(s),t(sG.StrategyVerified)}})]})}),s2=()=>{let{client:e}=(0,h.oR)(),{currency:t,balance:a,is_logged_in:s}=e,{submitForm:n,setFieldValue:l,values:i,isValid:r,validateForm:o}=(0,eF.u6)(),{quick_strategy:d,run_panel:c}=(0,h.oR)(),{toggleStopBotDialog:_,setLossThresholdWarningData:u,loss_threshold_warning_data:x,onSubmit:m}=d,p=async()=>{c.is_running?(await l("action","EDIT"),o(),n(),_()):(await l("action","RUN"),o(),n().then(e=>{r&&e&&m(e)}))};return{handleSubmit:async()=>{var e;let n=Number((null==i?void 0:i.loss)??0),l=Number((null==i?void 0:i.profit)??0),r=JSON.parse((null===(e=localStorage)||void 0===e?void 0:e.getItem("qs-dont-show-loss-threshold-warning"))??"false");!x.already_shown&&(n>.5*Number(a??0)||n>2*l)&&s&&!r?u({show:!0,loss_amount:n,currency:t,already_shown:!0}):p()},proceedFormSubmission:p}},s4=e=>{let{selected_trade_type:t,selected_startegy_label:a,children:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"qs__selected-options",children:[(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(V.Z,{size:"xs",lineHeight:"s",children:(0,y.NC)("Trade type")}),(0,l.jsx)(V.Z,{size:"xs",weight:"bold",lineHeight:"s",children:t})]}),(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(V.Z,{size:"xs",lineHeight:"s",children:(0,y.NC)("Strategy")}),(0,l.jsx)(V.Z,{className:"qs__selected-options__item__description",weight:"bold",lineHeight:"s",children:a})]})]}),(0,l.jsx)(sQ.Z,{formfields:s,active_tab:"TRADE_PARAMETERS"})]})},s9=(0,r.Pi)(e=>{let{children:t,current_step:a,setCurrentStep:s,onClickClose:n,selected_trade_type:r,setSelectedTradeType:o}=e,d=i.useRef(null),{submitForm:c,isValid:_,setFieldValue:u,validateForm:x,values:m}=(0,eF.u6)(),{quick_strategy:p}=(0,h.oR)(),{selected_strategy:j,onSubmit:v,is_stop_bot_dialog_open:b}=p,{handleSubmit:g}=s2(),f=(0,sH.j)()[j].label,N=a===sG.StrategySelect;i.useEffect(()=>{_&&a===sG.StrategyVerified&&s(sG.StrategyCompleted),!_&&a===sG.StrategyCompleted&&s(sG.StrategyVerified)},[_,a]),i.useEffect(()=>{x()},[j,x]);let C=async()=>{await u("action","EDIT"),x(),c().then(e=>{_&&e&&(s$({form_values:m,selected_strategy:j}),v(e))})},k=()=>{g()},T=i.useCallback(()=>{switch(a){case sG.StrategySelect:return(0,l.jsx)(s7,{setCurrentStep:s,setSelectedTradeType:o});case sG.StrategyVerified:case sG.StrategyCompleted:return(0,l.jsx)(s4,{selected_trade_type:r,selected_startegy_label:f,children:t});default:return null}},[a,r,f,t,s,o]);return!b&&(0,l.jsxs)("div",{className:"qs",children:[(0,l.jsxs)("div",{className:"qs__head",children:[(0,l.jsx)("div",{className:"qs__head__title",children:(0,l.jsx)(V.Z,{weight:"bold",children:(0,y.NC)("Quick Strategy")})}),(0,l.jsx)("div",{className:"qs__head__action",children:(0,l.jsx)("span",{"data-testid":"qs-desktop-close-button",onClick:n,tabIndex:0,onKeyDown:e=>{"Enter"===e.key&&n()},children:(0,l.jsx)(w.Z,{height:"20px",width:"20px"})})})]}),(0,l.jsxs)("div",{className:"qs__body",children:[(0,l.jsxs)("div",{className:"qs__body__sidebar",children:[(0,l.jsx)("div",{className:"qs__body__sidebar__subtitle",children:(0,l.jsx)(V.Z,{size:"xs",children:(0,y.NC)("Choose a template below and set your trade parameters.")})}),(0,l.jsx)(sJ,{current_step:a})]}),(0,l.jsxs)("div",{className:"qs__body__content",children:[(0,l.jsx)(ed.Z,{className:"qs__form__container qs__form__container--footer",autohide:!1,refSetter:d,children:T()}),!N&&(0,l.jsxs)("div",{className:"qs__body__content__footer",children:[(0,l.jsx)(eO.Z,{transparent:!0,classNameSpan:"qs__body__content__footer--back",disabled:N,onClick:()=>{s(sG.StrategySelect)},children:(0,y.NC)("Back")}),(0,l.jsx)(eO.Z,{secondary:!0,disabled:!_,onClick:C,children:(0,y.NC)("Load")}),(0,l.jsx)(eO.Z,{"data-testid":"qs-run-button",primary:!0,onClick:e=>{e.preventDefault(),k()},disabled:!_,children:(0,y.NC)("Run")})]})]})]})]})}),s6=i.memo(s9),ne=(0,r.Pi)(e=>{let{children:t,current_step:a,selected_trade_type:s,setCurrentStep:n,setSelectedTradeType:r}=e,{isValid:o,validateForm:d}=(0,eF.u6)(),{quick_strategy:c}=(0,h.oR)(),{selected_strategy:_}=c,u=(0,sH.j)()[_].label,x=a===sG.StrategyVerified||a===sG.StrategyCompleted,m=a===sG.StrategySelect;return i.useEffect(()=>{d()},[_,d]),i.useEffect(()=>{o&&a===sG.StrategyVerified&&n(sG.StrategyCompleted),!o&&a===sG.StrategyCompleted&&n(sG.StrategyVerified)},[o,a]),(0,l.jsx)("div",{className:"qs",children:(0,l.jsx)("div",{className:"qs__body",children:(0,l.jsx)("div",{className:"qs__body__content",children:(0,l.jsxs)(ed.Z,{className:M()("qs__form__container qs__form__container--footer",{"qs__form__container--template":m}),autohide:!1,children:[(0,l.jsx)(sJ,{setCurrentStep:n,current_step:a,isValid:o,is_mobile:!0}),m&&(0,l.jsx)(s7,{setSelectedTradeType:r,setCurrentStep:n}),x&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"qs__selected-options",children:[(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(V.Z,{size:"xs",children:(0,y.NC)("Trade type")}),(0,l.jsx)(V.Z,{size:"xs",weight:"bold",children:s})]}),(0,l.jsxs)("div",{className:"qs__selected-options__item",children:[(0,l.jsx)(V.Z,{size:"xs",children:(0,y.NC)("Strategy")}),(0,l.jsx)(V.Z,{className:"qs__selected-options__item__description",size:"xs",weight:"bold",children:u})]})]}),(0,l.jsx)(sQ.Z,{formfields:t,active_tab:"TRADE_PARAMETERS"})]})]})})})})}),nt=(0,r.Pi)(e=>{let{current_step:t,setCurrentStep:a}=e,{quick_strategy:s}=(0,h.oR)(),{selected_strategy:n}=s,{isValid:i,values:r}=(0,eF.u6)(),{handleSubmit:o}=s2(),d=t===sG.StrategyVerified||t===sG.StrategyCompleted,c=t===sG.StrategySelect,_=()=>{sX({form_values:r,selected_strategy:n}),o()};return(0,l.jsx)(l.Fragment,{children:d&&(0,l.jsxs)("div",{className:"qs__body__content__footer",children:[(0,l.jsx)(eO.Z,{secondary:!0,disabled:c,onClick:()=>{a(sG.StrategySelect)},children:(0,y.NC)("Back")}),(0,l.jsx)(eO.Z,{primary:!0,"data-testid":"qs-run-button",type:"submit",onClick:e=>{e.preventDefault(),_()},disabled:!i,children:(0,y.NC)("Run")})]})})}),na="loss-threshold-warning-dialog",ns=(0,r.Pi)(()=>{let{quick_strategy:e}=(0,h.oR)(),{loss_threshold_warning_data:t,setLossThresholdWarningData:a,initializeLossThresholdWarningData:s}=e,{proceedFormSubmission:n}=s2();return(0,l.jsxs)(aq.Z,{portal_element_id:"modal_root",title:(0,y.NC)("Are you sure you want to continue?"),is_visible:t.show,confirm_button_text:(0,y.NC)("Yes, continue"),onConfirm:()=>{s(),n()},cancel_button_text:(0,y.NC)("Edit the amount"),onCancel:()=>{a({show:!1,highlight_field:["loss"]})},is_mobile_full_width:!1,has_close_icon:!1,className:na,children:[(0,l.jsx)("div",{className:`${na}__body-text`,children:(0,l.jsx)(y.Xx,{i18n_default_text:"Please confirm that your loss threshold amount is {{loss_amount}} {{currency}}.",values:{loss_amount:null==t?void 0:t.loss_amount,currency:null==t?void 0:t.currency}})}),(0,l.jsx)(ef,{defaultChecked:!1,label:(0,y.NC)("Do not show this message again."),onChange:()=>{var e,t;let a=JSON.parse((null===(e=localStorage)||void 0===e?void 0:e.getItem("qs-dont-show-loss-threshold-warning"))??"false");null===(t=localStorage)||void 0===t||t.setItem("qs-dont-show-loss-threshold-warning",`${!a}`)}})]})});var nn=a("67026"),nl=a("63069");let ni=e=>{let{parent_rect:t,child_height:a=0}=e;return((null==t?void 0:t.top)||0)+((null==t?void 0:t.height)||0)+a},nr=e=>{let{parent_rect:t,child_height:a=0}=e;return Number(null==t?void 0:t.top)-a},no=e=>{let{preferred_alignment:t="bottom",child_el:a,parent_el:s,should_consider_parent_height:n=!0}=e,l=null==s?void 0:s.getBoundingClientRect(),i=null==a?void 0:a.clientHeight,r=document.body.getBoundingClientRect(),{top:o,bottom:d,left:c,width:_}=l||{top:0,bottom:0,left:0,width:0},u=ni({parent_rect:l,child_height:i}),x={bottom:r.bottom-(n?o:d)+8,insetInlineStart:c,width:_,transformOrigin:"bottom"},m={top:n?d:o,insetInlineStart:c,width:_,transformOrigin:"top"};if("bottom"===t&&u<=r.height)return{style:m,placement:"bottom"};let h=nr({parent_rect:l,child_height:i});return"top"===t&&h>=0?{style:x,placement:"top"}:u-r.height<0-h?{style:m,placement:"bottom"}:{style:x,placement:"top"}};var nd=a("46677");let nc=e=>{i.useEffect(()=>{if(!e)return;let t=e=>e?e.classList.contains("dc-themed-scrollbars")&&e.scrollHeight>e.clientHeight?e:t(e.parentElement):null,a=t(e.current),s=navigator.userAgent.indexOf("Firefox")>-1;return a&&(a.style.overflow="hidden",a.style.width=s?"100%":"calc(100% - 5px)"),()=>{a&&(a.style.removeProperty("overflow"),a.style.removeProperty("width"))}},[e])};var n_=a("33716"),nu=a("40150");let nx=e=>{let{is_active:t,is_disabled:a,index:s,item:n,child_ref:i,onItemSelection:r,setActiveIndex:o}=e;return(0,l.jsx)("div",{ref:i,onMouseDown:e=>{e.stopPropagation(),r(n),o(s)},className:M()("dc-dropdown-list__item",{"dc-dropdown-list__item--active":t,"dc-dropdown-list__item--disabled":a}),children:"object"==typeof n?n.component||n.text:n})},nm=i.forwardRef((e,t)=>{let{active_index:a,list_items:s,is_object_list:n,onItemSelection:r,setActiveIndex:o,not_found_text:d}=e;if(null==s?void 0:s.some(e=>"object"==typeof e&&!!e.group)){let e={};s.forEach(t=>{let a="object"==typeof t&&t.group||"?";!e[a]&&(e[a]=[]),e[a].push(t)});let d=Object.keys(e),c=-1;return(0,l.jsx)(l.Fragment,{children:d.map((s,_)=>{let u=e[s],x=!!d[_+1];return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"dc-dropdown-list__group-header",children:s}),u.map(e=>(c++,(0,l.jsx)(nx,{item:e,index:c,is_active:c===a,onItemSelection:r,setActiveIndex:o,is_object_list:n,is_disabled:"object"==typeof e&&"DISABLED"===e.disabled,child_ref:c===a?t:null},c))),x&&(0,l.jsx)("div",{className:"dc-dropdown-list__separator"})]},`group${_}`)})})}return(0,l.jsx)(l.Fragment,{children:(null==s?void 0:s.length)?s.map((e,s)=>(0,l.jsx)(nx,{item:e,index:s,is_active:s===a,onItemSelection:r,is_object_list:n,setActiveIndex:o,child_ref:s===a?t:null},s)):(0,l.jsx)("div",{className:"dc-dropdown-list__item dc-dropdown-list__item--not-found",children:d})})});nm.displayName="ListItems";let nh=e=>{let{dropdown_ref:t,list_item_ref:a,list_wrapper_ref:s}=e.dropdown_refs||{},{active_index:n,is_visible:i,list_items:r,list_height:o,onScrollStop:d,onItemSelection:c,setActiveIndex:_,style:u,not_found_text:x,portal_id:m}=e;if((null==r?void 0:r.length)&&"string"!=typeof r[0]&&"object"!=typeof r[0])throw Error("Dropdown received wrong data structure");let h=!Array.isArray(r)&&"object"==typeof r,p=(null==r?void 0:r.length)&&"string"==typeof r[0],j=(0,l.jsx)(eS.Z,{appear:i,in:i,timeout:100,classNames:{enter:"dc-dropdown-list--enter",enterDone:"dc-dropdown-list--enter-done",exit:"dc-dropdown-list--exit"},unmountOnExit:!0,children:(0,l.jsx)("div",{style:u,className:"dc-dropdown-list",ref:s,children:(0,l.jsx)(nu.Z,{height:o||"220px",refSetter:t,onScroll:d,children:h?Object.keys(r).map((e,t)=>(0,l.jsx)(nm,{not_found_text:x,active_index:n,list_items:r[e],ref:a,onItemSelection:c,setActiveIndex:_},t)):(0,l.jsx)(nm,{not_found_text:x,active_index:n,list_items:r,ref:a,onItemSelection:c,is_object_list:!p,setActiveIndex:_})})})});if(m){let e=document.getElementById(m);return e&&eW.createPortal(j,e)}return j};nh.displayName="DropdownList";let np={ENTER:13,ESCAPE:27,TAB:9,KEYDOWN:40,KEYUP:38},nj=e=>"string"==typeof e,nv=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=e.toLowerCase();return t.filter(e=>(nj(e)?e.toLowerCase():(e.text||"").toLowerCase()).includes(s)).sort((e,t)=>{let a=(nj(e)?e:e.text||"").toLowerCase().indexOf(s);return a-(nj(t)?t:t.text||"").toLowerCase().indexOf(s)}).filter(t=>{let s=nj(t)?t:t.text||"",n=s.toLowerCase(),l=(0,nd._v)(n);return a?(0,nd.pp)(s,e):l.includes(e)||n.includes(e)})},nb=i.memo(e=>{let t;let a=(0,nl.Re)(),{autoComplete:s,className:n,data_testid:r,dropdown_offset:o,error:d,has_updating_list:c=!0,hide_list:_=!1,historyValue:u,input_id:x,is_alignment_top:m,is_list_visible:h=!1,list_items:p,list_portal_id:j,not_found_text:v=a,onHideDropdownList:b,onItemSelection:y,onSearch:g,onScrollStop:f,onShowDropdownList:N,should_filter_by_char:C,show_list:k=!1,value:w,...T}=e,E=i.useRef(null),S=i.useRef(null),A=i.useRef(null),I=i.useRef(null),[R,O]=i.useState(!1),[L,D]=i.useState(""),[U,F]=i.useState(-1),[Z,z]=i.useState(p),[P,B]=i.useState({});nc(j&&R?I:void 0);let X=null;i.useEffect(()=>{if(c){let e=[];if(z(e=h?"function"==typeof g?g(w.toLowerCase(),p):nv(w.toLowerCase(),p):p),u){let t=e.findIndex(e=>("object"==typeof e?e.text:e)===u);D(u),F(t)}else D(""),F(-1)}},[p,c,u]),i.useEffect(()=>{h&&F(Z.findIndex(e=>("object"==typeof e?e.text:e)===u))},[Z]),i.useEffect(()=>{if(k&&G(),_&&Y(),R&&A.current){var e;let t=A.current.offsetTop;null===(e=E.current)||void 0===e||e.scrollTo({top:t,behavior:"smooth"})}},[k,_,R,A]),i.useEffect(()=>{S.current&&j&&R&&B(no({preferred_alignment:m?"top":"bottom",parent_el:I.current,child_el:S.current}).style)},[R,m,j,null==Z?void 0:Z.length]);let $=()=>{if(-1!==U){var e,t,a,s,n,l,i;let r=U-1;if(r<0){let a=null===(e=E.current)||void 0===e?void 0:e.clientHeight;F(Z.length-1),null===(t=E.current)||void 0===t||t.scrollTo({top:a,behavior:"smooth"})}else{let e=Number(null===(a=A.current)||void 0===a?void 0:a.getBoundingClientRect().height);if(!H(Math.floor(Number(null===(n=A.current)||void 0===n?void 0:null===(s=n.getBoundingClientRect())||void 0===s?void 0:s.top))-e)){let t=Number(null===(l=A.current)||void 0===l?void 0:l.offsetTop)-e;null===(i=E.current)||void 0===i||i.scrollTo({top:t,behavior:"smooth"})}F(r)}}},H=e=>{var t,a,s;let n=Number(null===(t=E.current)||void 0===t?void 0:t.clientHeight),l=Math.floor(Number(null===(a=S.current)||void 0===a?void 0:a.getBoundingClientRect().top));return!(e>=Math.floor(Number(null===(s=S.current)||void 0===s?void 0:s.getBoundingClientRect().top))+n)&&e>l},V=()=>{if(-1!==U&&A.current){if("number"==typeof U){var e,t,a,s;let n=U+1;if(n>=Z.length)F(0),null===(e=E.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"});else{let e=A.current.getBoundingClientRect().height,l=Math.floor(A.current.getBoundingClientRect().top)+e+e/2,i=Number(null===(t=E.current)||void 0===t?void 0:t.clientHeight);if(!H(l)){let t=A.current.offsetTop-(i/e-2)*e;null===(s=E.current)||void 0===s||null===(a=s.scrollTo)||void 0===a||a.call(s,{top:t,behavior:"smooth"})}F(n)}}}else F(0)},q=e=>{e&&(D(("object"==typeof e?e.text:e)||""),null==y||y(e))},G=()=>{O(!0),null==N||N()},Y=()=>{O(!1),null==b||b()};return(0,l.jsxs)("div",{"data-testid":r,className:M()("dc-autocomplete",n),children:[(0,l.jsx)("div",{ref:I,className:"dc-autocomplete__input-field",children:(0,l.jsx)(eY,{...T,className:"dc-autocomplete__field",error:d,autoComplete:s,onKeyDown:e=>{switch(e.keyCode){case np.ENTER:e.preventDefault(),Y(),q(Z[U]);break;case np.TAB:R&&(Y(),q(Z[U]));break;case np.ESCAPE:e.preventDefault(),Y();break;case np.KEYDOWN:!R&&G(),V();break;case np.KEYUP:R?$():G();break;default:!R&&G()}},onInput:e=>{let t=e.target.value.toLowerCase(),a=[];!(a="function"==typeof g?g(t,p):nv(t,p,C)).length&&D(""),z(a)},input_id:x,onClick:()=>{R?Y():G()},onBlur:e=>{e.preventDefault(),Y(),!h&&z(p),""===L&&(null==y||y({text:v,value:""})),"function"==typeof T.onBlur&&T.onBlur(e)},value:"function"==typeof y?w:L,trailing_icon:T.trailing_icon?T.trailing_icon:(0,l.jsx)(n_.Z,{className:(0,nn.Z)("dc-autocomplete__trailing-icon",{"dc-autocomplete__trailing-icon--opened":R,"dc-autocomplete__trailing-icon--disabled":T.disabled}),height:"24px",width:"24px"})})}),(0,l.jsx)(nh,{dropdown_refs:{dropdown_ref:E,list_item_ref:A,list_wrapper_ref:S},active_index:U,style:{width:I.current?`${I.current.offsetWidth}px`:"100%",...P||{marginTop:o?`calc(-${o} + 8px)`:"8px"}},is_visible:R||h,list_items:Z,list_height:T.list_height,onItemSelection:q,setActiveIndex:F,onScrollStop:e=>{if(!f)return;let a=e.currentTarget;(X=a.scrollTop)===a.scrollTop&&clearTimeout(t),t=setTimeout(()=>{null==f||f()},150)},not_found_text:v,portal_id:j})]})});nb.displayName="Autocomplete";let ny=["ACCUMULATORS_MARTINGALE","ACCUMULATORS_DALEMBERT","ACCUMULATORS_MARTINGALE_ON_STAT_RESET","ACCUMULATORS_DALEMBERT_ON_STAT_RESET","ACCUMULATORS_REVERSE_MARTINGALE","ACCUMULATORS_REVERSE_MARTINGALE_ON_STAT_RESET","ACCUMULATORS_REVERSE_DALEMBERT","ACCUMULATORS_REVERSE_DALEMBERT_ON_STAT_RESET"],ng=e=>{let{symbol:t}=e;return(0,l.jsxs)("div",{className:"qs__select__option",children:[(0,l.jsx)(z,{type:t.value,size:"sm"}),(0,l.jsx)(V.Z,{className:"qs__select__option__text",size:"xs",color:"prominent",children:t.text})]},t.value)},nf=()=>{let{quick_strategy:e}=(0,h.oR)(),{isDesktop:t}=(0,g.F)(),{setValue:a,selected_strategy:s}=e,[n,r]=i.useState([]),[o,d]=(0,i.useState)(!1),[c,_]=(0,i.useState)({text:"",value:""}),[u,x]=(0,i.useState)({text:"",value:""}),{setFieldValue:m,values:p}=(0,eF.u6)(),j=ny.includes(s),v=(0,i.useMemo)(()=>n.map(e=>({component:(0,l.jsx)(ng,{symbol:e},e.text),...e})).filter(e=>{var t;return!j||(null==e?void 0:null===(t=e.group)||void 0===t?void 0:t.startsWith("Continuous Indices"))}),[n,j]);(0,i.useEffect)(()=>{var e,t,s;let{active_symbols:n}=(null===U.ApiHelpers||void 0===U.ApiHelpers?void 0:U.ApiHelpers.instance)??{},l=null==n?void 0:null===(e=n.getSymbolsForBot)||void 0===e?void 0:e.call(n);r(l),!(null==l?void 0:l.find(e=>(null==e?void 0:e.value)===(null==p?void 0:p.symbol)))&&(m("symbol",null==l?void 0:null===(t=l[0])||void 0===t?void 0:t.value),a("symbol",null==l?void 0:null===(s=l[0])||void 0===s?void 0:s.value))},[]),(0,i.useEffect)(()=>{let e=v.find(e=>e.value===p.symbol);e&&_({text:e.text,value:e.value})},[v,p.symbol,_]);let b=()=>{t&&!o&&d(!0)},y=e=>{_({...c,text:e.target.value})},f=e=>{if(null==e?void 0:e.value){let{value:t}=e;m("symbol",t),a("symbol",t),d(!1)}},N=()=>{if(t){let e=v.find(e=>e.value===p.symbol);e&&e.text!==c.text&&(_({text:e.text,value:e.value}),x({text:e.text,value:e.value}),d(!1)),!e&&(_({text:u.text,value:u.value}),d(!1))}};return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input",children:(0,l.jsx)(eF.gN,{name:"symbol",id:"asset",children:e=>{let{field:{...a}}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(nb,{...a,readOnly:!t,inputMode:"none","data-testid":"dt_qs_symbol",autoComplete:"off",className:"qs__autocomplete",value:c.text,list_items:v,onItemSelection:f,onChange:y,onFocus:b,onHideDropdownList:N,leading_icon:(0,l.jsx)(z,{type:c.value,size:"sm"})})})}},"asset")})},nN=e=>{let{trade_type:{value:t,icon:a,text:s}}=e;return(0,l.jsxs)("div",{className:"qs__select__option",children:[(null==a?void 0:a.length)?a.map((e,t)=>(0,l.jsx)(Y,{type:e,className:"qs__select__option__icon",size:"sm"},`${e}id-${t}`)):null,(0,l.jsx)(V.Z,{className:"qs__select__option__text",size:"xs",color:"prominent",children:s})]},t)},nC=()=>{let[e,t]=i.useState([]),{setFieldValue:a,values:s,validateForm:n}=(0,eF.u6)(),{quick_strategy:r}=(0,h.oR)(),{setValue:o,selected_strategy:d}=r,c=ny.includes(d);i.useEffect(()=>{if(null==s?void 0:s.symbol){let e=null==s?void 0:s.tradetype,l=c?"ACCU":"",{contracts_for:i}=(null===U.ApiHelpers||void 0===U.ApiHelpers?void 0:U.ApiHelpers.instance)??{};(async()=>{var n,r;let d=await (null==i?void 0:null===(n=i.getTradeTypesForQuickStrategy)||void 0===n?void 0:n.call(i,null==s?void 0:s.symbol,l));!(null==d?void 0:d.some(t=>t.value===e))&&(null==d?void 0:null===(r=d[0])||void 0===r?void 0:r.value)!==e&&(null==a||a("tradetype",(null==d?void 0:d[0].value)||""),o("tradetype",null==d?void 0:d[0].value)),t(d)})(),n()}},[null==s?void 0:s.symbol]);let _=i.useMemo(()=>e.map(e=>({component:(0,l.jsx)(nN,{trade_type:e},e.text),...e})),[e]);return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input qs__form__field__group-icons",children:(0,l.jsx)(eF.gN,{name:"tradetype",id:"tradetype",children:e=>{var t,s;let{field:n}=e,i=null==_?void 0:_.find(e=>e.value===n.value),r=c?"Buy":null==i?void 0:i.text;return(0,l.jsx)(nb,{...n,readOnly:!0,inputMode:"none","data-testid":"dt_qs_tradetype",autoComplete:"off",className:"qs__autocomplete",value:r||"",list_items:_,onItemSelection:e=>{let t=null==e?void 0:e.value,s=null==e?void 0:e.text;t&&s&&(null==a||a("tradetype",t),o("tradetype",t))},leading_icon:(0,l.jsxs)(V.Z,{children:[(0,l.jsx)(Y,{type:(null==i?void 0:null===(t=i.icon)||void 0===t?void 0:t[0])||"CALL",size:"sm"}),(0,l.jsx)(Y,{type:(null==i?void 0:null===(s=i.icon)||void 0===s?void 0:s[1])||"PUT",size:"sm"})]})})}},"tradetype")})},nk=(0,r.Pi)(e=>{let{name:t}=e,{isDesktop:a}=(0,g.F)(),[s,n]=i.useState([]),{quick_strategy:r}=(0,h.oR)(),{setValue:o}=r,{setFieldValue:d,values:c}=(0,eF.u6)(),{symbol:_,tradetype:u}=c;i.useEffect(()=>{if(u&&_){let e=null==c?void 0:c.type;(async()=>{var a,s,l;let{contracts_for:i}=(null===U.ApiHelpers||void 0===U.ApiHelpers?void 0:U.ApiHelpers.instance)??{},r=await (null==i?void 0:null===(a=i.getContractTypes)||void 0===a?void 0:a.call(i,u));n(r),!(null==r?void 0:r.some(t=>t.value===e))&&(null==d||d(t,null==r?void 0:null===(s=r[0])||void 0===s?void 0:s.value),o(t,null==r?void 0:null===(l=r[0])||void 0===l?void 0:l.value))})()}},[_,u]);let x=e=>{null==d||d(t,e),o(t,e)},m=`qs-contract-type-${t}`;return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input no-top-spacing",children:(0,l.jsx)(eF.gN,{name:t,id:m,children:e=>{let{field:t}=e,n=null==s?void 0:s.find(e=>(null==e?void 0:e.value)===(null==t?void 0:t.value));return a?(0,l.jsx)(nb,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_contract_type",autoComplete:"off",className:"qs__select contract-type",value:(null==n?void 0:n.text)||"",list_items:s,onItemSelection:e=>{let{value:t}=e;t&&x(t)}}):(0,l.jsx)("ul",{className:"qs__form__field__list","data-testid":"dt_qs_contract_types",children:s.map(e=>{let t=(null==n?void 0:n.value)===(null==e?void 0:e.value);return(0,l.jsx)("li",{className:M()("qs__form__field__list__item",{"qs__form__field__list__item--active":t}),onClick:()=>{x(null==e?void 0:e.value)},children:(0,l.jsx)(V.Z,{size:"xs",color:"prominent",weight:t?"bold ":"normal",children:null==e?void 0:e.text})},null==e?void 0:e.value)})})}},m)})}),nw=e=>{let{attached:t}=e,[a,s]=i.useState([]),[n,r]=i.useState(""),[o,d]=i.useState(""),{quick_strategy:c}=(0,h.oR)(),{setValue:_,setCurrentDurationMinMax:u,current_duration_min_max:x}=c,{setFieldValue:m,validateForm:p,values:j}=(0,eF.u6)(),{symbol:v,tradetype:b}=j;return i.useEffect(()=>{b&&v&&(async()=>{var e,t,a,l,i,c;let{contracts_for:x}=(null===U.ApiHelpers||void 0===U.ApiHelpers?void 0:U.ApiHelpers.instance)??{},h=await (null==x?void 0:null===(e=x.getDurations)||void 0===e?void 0:e.call(x,v,b)),p=null==h?void 0:h.map(e=>({text:e.display??"",value:e.unit??"",min:e.min,max:e.max}));s(p);let y=null==j?void 0:j.durationtype;if((null==p?void 0:p.some(e=>e.value===y))&&n===v&&o===b){let e=null==p?void 0:p.find(e=>e.value===y);u(null==e?void 0:e.min,null==e?void 0:e.max)}else u(null==h?void 0:null===(t=h[0])||void 0===t?void 0:t.min,null==h?void 0:null===(a=h[0])||void 0===a?void 0:a.max),null==m||m("durationtype",null==h?void 0:null===(l=h[0])||void 0===l?void 0:l.unit,!0),null==m||m("duration",null==h?void 0:null===(i=h[0])||void 0===i?void 0:i.min,!0),_("durationtype",(null==h?void 0:null===(c=h[0])||void 0===c?void 0:c.unit)??"");r(v),d(b)})()},[v,b]),(0,i.useEffect)(()=>{p()},[x,p]),(0,l.jsx)("div",{className:M()("qs__form__field qs__form__field__input",{"no-top-border-radius":t}),children:(0,l.jsx)(eF.gN,{name:"durationtype",id:"durationtype",children:e=>{let{field:t}=e,s=null==a?void 0:a.find(e=>e.value===t.value);return(0,l.jsx)(nb,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_durationtype",autoComplete:"off",className:"qs__select",value:(null==s?void 0:s.text)||"",list_items:a,onItemSelection:e=>{let{value:t,min:a,max:s}=e;t&&(u(a,s),null==m||m("durationtype",t),_("durationtype",t),null==m||m("duration",a).then(()=>{p()}),_("duration",a))}})}},"durationtype")})},nT=(0,r.Pi)(e=>{let{name:t,onChange:a,type:s="text",attached:n=!1,disabled:r=!1,min:o,max:d,has_currency_unit:c=!1}=e,{client:{currency:_}}=(0,h.oR)(),{quick_strategy:u}=(0,h.oR)(),{loss_threshold_warning_data:x}=u,[,m]=i.useState(!1),[p,j]=i.useState(null),{setFieldValue:v,setFieldTouched:b,values:y}=(0,eF.u6)(),g="number"===s;(0,i.useEffect)(()=>{if("max_stake"===t&&y.stake&&y.max_stake){let t=parseFloat(Number(y.stake).toFixed(2)),s=parseFloat(Number(y.max_stake).toFixed(2));if(console.log(`useEffect max_stake comparing: initial_stake=${t}, max_stake=${s}`),t>s){j("Initial stake cannot be greater than max stake");let t=document.querySelector('input[name="max_stake"]');if(t){var e,a;null===(e=t.closest(".qs__input"))||void 0===e||e.classList.add("error");let s=null===(a=t.closest(".qs__form__field__input"))||void 0===a?void 0:a.querySelector(".qs__warning-bubble");s&&s.setAttribute("data-show","true")}}else j(null)}if("stake"===t&&y.stake&&y.max_stake){let e=parseFloat(Number(y.stake).toFixed(2)),t=parseFloat(Number(y.max_stake).toFixed(2));if(console.log(`useEffect stake comparing: initial_stake=${e}, max_stake=${t}`),e>t){let e=document.querySelector('input[name="max_stake"]');if(e){let t=e.closest(".qs__input");t&&t.classList.add("error");let a=document.querySelector('[data-testid="max_stake-popover"]');if(a){a.setAttribute("data-force-show","true");let e=a.querySelector(".qs__warning-bubble div");e&&(e.textContent="Initial stake cannot be greater than max stake");let t=a.querySelector(".qs__warning-bubble");t&&(t.style.display="block",t.style.opacity="1",t.style.visibility="visible",t.style.position="absolute",t.style.zIndex="9999")}v("max_stake",y.max_stake),b("max_stake",!0,!0);let s="Initial stake cannot be greater than max stake";document.querySelectorAll('input[name="max_stake"]').forEach(e=>{e.setAttribute("data-has-error","true"),e.setAttribute("data-error-message",s);let t=new Event("blur",{bubbles:!0});e.dispatchEvent(t);let a=new Event("keyup",{bubbles:!0});e.dispatchEvent(a);let n=new CustomEvent("qs-error",{detail:{message:s},bubbles:!0});e.dispatchEvent(n)})}}}},[t,y.stake,y.max_stake]);let f=(e,s)=>{var n,l,i;if(null==e||e.preventDefault(),("tick_count"===t||"duration"===t&&(null===(n=u.form_data)||void 0===n?void 0:n.durationtype)==="t")&&(s=String(Math.floor(Number(s)))),"stake"===t){let e=(null==u?void 0:null===(l=u.additional_data)||void 0===l?void 0:l.min_stake)||.35,t=(null==u?void 0:null===(i=u.additional_data)||void 0===i?void 0:i.max_stake)||1e3;Number(s)<e?s=String(e):Number(s)>t&&(s=String(t))}a(t,s),b(t,!0,!0),v(t,s)},N=e=>{var s,n,l,i,r,o;let d=e.target.value,c=0;if(j(null),""===d||"0"===d||"0."===d){if(a(t,d),"stake"===t||"max_stake"===t){let e=(null==u?void 0:null===(n=u.additional_data)||void 0===n?void 0:n.min_stake)||.35;j(`Minimum stake allowed is ${e}`)}return}if(d.length>=12?(c=d.slice(0,12),c=g?Number(c):c):c=g?Number(d):d,g&&("tick_count"===t||"duration"===t&&(null===(s=u.form_data)||void 0===s?void 0:s.durationtype)==="t")&&!Number.isInteger(c)&&(c=Math.floor(Number(c))),g&&"number"==typeof c&&c<1&&!Number.isInteger(c)&&(c=1),"stake"===t&&g){let e=(null==u?void 0:null===(l=u.additional_data)||void 0===l?void 0:l.min_stake)||.35,t=(null==u?void 0:null===(i=u.additional_data)||void 0===i?void 0:i.max_stake)||1e3,a=Number(c);a>=e&&a<=t?j(null):a<e?j(`Minimum stake allowed is ${e}`):a>t&&j(`Maximum stake allowed is ${t}`)}if("max_stake"===t&&g){let e=(null==u?void 0:null===(r=u.additional_data)||void 0===r?void 0:r.min_stake)||.35,t=(null==u?void 0:null===(o=u.additional_data)||void 0===o?void 0:o.max_stake)||1e3,a=Number(c);a>=e&&a<=t?j(null):a<e?j(`Minimum stake allowed is ${e}`):a>t&&j(`Maximum stake allowed is ${t}`);let s=y.stake;s&&Number(s)>a&&j("Initial stake cannot be greater than max stake")}a(t,c)};return(0,l.jsx)(eF.gN,{name:t,id:t,children:e=>{var a,i,h,C,k;let{field:w,meta:T}=e,{error:E}=T;return(0,l.jsx)("div",{className:M()("qs__form__field qs__form__field__input",{"no-top-spacing":n,"no-border-top":n}),children:(0,l.jsx)("div",{"data-testid":"qs-input-container",onMouseEnter:()=>m(!0),onMouseLeave:()=>m(!1),children:(0,l.jsx)(q,{alignment:"bottom",message:E||p,is_open:!!(E||p)&&("stake"===t||"max_stake"===t||"loss"===t||"profit"===t||"take_profit"===t||"tick_count"===t||"size"===t),zIndex:"9999",classNameBubble:"qs__warning-bubble",has_error:!0,should_disable_pointer_events:!0,"data-testid":`${t}-popover`,children:(0,l.jsx)(eY,{data_testId:"qs-input",className:M()("qs__input",{error:(E||!!p)&&("stake"===t||"max_stake"===t||"loss"===t||"profit"===t||"take_profit"===t||"tick_count"===t)},{highlight:null==x?void 0:null===(a=x.highlight_field)||void 0===a?void 0:a.includes(t)}),type:s,leading_icon:g?(0,l.jsx)("button",{disabled:r||!!o&&Number(w.value)===o||"stake"===t&&Number(w.value)<=((null==u?void 0:null===(i=u.additional_data)||void 0===i?void 0:i.min_stake)||.35)||1>=Number(w.value),"data-testid":"qs-input-decrease",onClick:e=>{var a;let s=(null==u?void 0:null===(a=u.additional_data)||void 0===a?void 0:a.min_stake)||.35,n=Number(w.value),l="stake"===t?s:o||1;if(n>1){let t=n-1;f(e,String(t%1?t.toFixed(2):t));return}if(n<=1&&n>l){f(e,String(l));return}if(n<=l)return},children:"-"}):void 0,trailing_icon:g?(0,l.jsx)("button",{disabled:r||0xe8d4a50fff==w.value||!!d&&w.value>=d,"data-testid":"qs-input-increase",onClick:e=>{let t=Number(w.value)+1;f(e,String(t%1?t.toFixed(2):t))},children:"+"}):null,...w,disabled:r,onChange:e=>N(e),onBlur:e=>{if("stake"===t||"max_stake"===t){var a,s;let n=(null==u?void 0:null===(a=u.additional_data)||void 0===a?void 0:a.min_stake)||.35,l=(null==u?void 0:null===(s=u.additional_data)||void 0===s?void 0:s.max_stake)||1e3,i=e.target.value;if(""===i||"0"===i||"0."===i)j(`Minimum stake allowed is ${n}`);else{let e=Number(i);if(e<1&&!Number.isInteger(e)){v(t,1);return}e<n?j(`Minimum stake allowed is ${n}`):e>l?j(`Maximum stake allowed is ${l}`):j(null)}if("stake"===t){let e=y.max_stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;if(e&&a<t){let t=document.querySelector('input[name="max_stake"]');if(t){v("max_stake",e),b("max_stake",!0,!0);let a=new Event("blur",{bubbles:!0});t.dispatchEvent(a);let s=new Event("keyup",{bubbles:!0});t.dispatchEvent(s)}}else if(e){let e=document.querySelector('input[name="max_stake"]');if(e){let t=new Event("keyup",{bubbles:!0});e.dispatchEvent(t)}}}else if("max_stake"===t){let e=y.stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;e&&a>t?j("Initial stake cannot be greater than max stake"):j(null)}}},placeholder:c?"0.00":"",bottom_label:c?_:"",max_characters:2,maxLength:2,inputMode:"tick_count"===t||"duration"===t&&(null===(h=u.form_data)||void 0===h?void 0:h.durationtype)==="t"?"numeric":void 0,pattern:"tick_count"===t||"duration"===t&&(null===(C=u.form_data)||void 0===C?void 0:C.durationtype)==="t"?"[0-9]*":void 0,onKeyPress:"tick_count"===t||"duration"===t&&(null===(k=u.form_data)||void 0===k?void 0:k.durationtype)==="t"?e=>{"."===e.key&&e.preventDefault()}:void 0,onKeyUp:e=>{if("stake"===t||"max_stake"===t){var a,s;let n=(null==u?void 0:null===(a=u.additional_data)||void 0===a?void 0:a.min_stake)||.35,l=(null==u?void 0:null===(s=u.additional_data)||void 0===s?void 0:s.max_stake)||1e3,i=e.currentTarget.value;if(""===i||"0"===i||"0."===i){j(`Minimum stake allowed is ${n}`);return}let r=Number(i);if(r<1&&!Number.isInteger(r)){v(t,1);return}if(r>=n&&r<=l){j(null);return}if(r<n?j(`Minimum stake allowed is ${n}`):r>l&&j(`Maximum stake allowed is ${l}`),"stake"===t){let e=y.max_stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;if(e&&a<t){let t=document.querySelector('input[name="max_stake"]');if(t){v("max_stake",e),b("max_stake",!0,!0);let a=new Event("blur",{bubbles:!0});t.dispatchEvent(a);let s=new Event("keyup",{bubbles:!0});t.dispatchEvent(s)}}else if(e){let e=document.querySelector('input[name="max_stake"]');if(e){let t=new Event("keyup",{bubbles:!0});e.dispatchEvent(t)}}}else if("max_stake"===t){let e=y.stake,t=parseFloat(Number(i).toFixed(2)),a=e?parseFloat(Number(e).toFixed(2)):0;e&&a>t?j("Initial stake cannot be greater than max stake"):j(null)}}}})})})})}},t)}),nE=e=>{let{className:t,classNameButton:a,classNameLabel:s,handleToggle:n,id:r,is_enabled:o,name:d="toggle_switch"}=e;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("input",{"aria-label":d,className:M()("dc-toggle-switch",t),id:r,type:"checkbox",checked:o,onChange:n}),(0,l.jsx)("label",{className:M()("dc-toggle-switch__label",s),htmlFor:r,children:(0,l.jsx)("span",{className:M()("dc-toggle-switch__button",a)})})]})},nS=e=>{let{name:t,label:a,description:s,attached:n=!1,isEnabledToggleSwitch:i,setIsEnabledToggleSwitch:r}=e,{values:o,setFieldValue:d}=(0,eF.u6)(),c=async()=>{r(),await d(t,!(null==o?void 0:o[t]),!0),await d("max_stake",null==o?void 0:o.max_stake,!0)};return(0,l.jsx)(eF.gN,{name:t,children:()=>(0,l.jsx)("div",{className:M()("qs__form__field qs__form__field__input",{"no-border-bottom-radius":n}),children:(0,l.jsx)("div",{className:"qs__checkbox",children:(0,l.jsxs)("div",{className:"qs__checkbox__container",children:[(0,l.jsxs)("label",{className:"dc-checkbox",children:[(0,l.jsx)(V.Z,{size:"xs",className:"dc-checkbox__label",children:a}),(0,l.jsx)(V.Z,{size:"xs",children:(0,y.NC)("(optional)")})]}),(0,l.jsx)("span",{children:(0,l.jsx)(q,{classNameTargetIcon:"qs__checkbox__info",message:s,zIndex:"9999",alignment:"top",icon:"info"})}),(0,l.jsx)(nE,{id:"dt_mobile_drawer_theme_toggler",handleToggle:c,is_enabled:i,"data-testid":"qs-toggle-switch"})]})})})})},nA=e=>{let t,{label:a,description:s,additional_data:n}=e;return t="function"==typeof s?s(n):s,(0,l.jsx)("div",{className:"qs__form__field",children:(0,l.jsxs)("div",{className:"qs__input-label",children:[(0,l.jsx)(V.Z,{weight:"bold",className:"qs__input-label__wrapper",size:"xs",children:a}),(0,l.jsx)("span",{children:(0,l.jsx)(q,{message:t,zIndex:"9999",alignment:"top",icon:"info"})})]})})};var nI=a("63999");let nR=(0,r.Pi)(e=>{let{name:t}=e,{ui:a,client:s}=(0,h.oR)(),{is_desktop:n}=a,[r,o]=i.useState([]),{quick_strategy:d}=(0,h.oR)(),{setValue:c,setAdditionalData:_}=d,{setFieldValue:u,values:x,setFieldError:m,errors:p}=(0,eF.u6)(),j=i.useRef(null),v=i.useRef(null),b=i.useRef({tick_count:null,take_profit:null});i.useEffect(()=>{o([{text:"1%",value:"0.01"},{text:"2%",value:"0.02"},{text:"3%",value:"0.03"},{text:"4%",value:"0.04"},{text:"5%",value:"0.05"}]),null==u||u("tradetype","accumulator"),c("tradetype","accumulator")},[]),i.useEffect(()=>{var e,t;x.boolean_tick_count?(u("take_profit",0),m("tick_count",(null===(e=b.current)||void 0===e?void 0:e.tick_count)??void 0),m("take_profit",void 0)):(u("tick_count",0),m("take_profit",(null===(t=b.current)||void 0===t?void 0:t.take_profit)??void 0),m("tick_count",void 0))},[x,p.take_profit,p.tick_count,x.boolean_tick_count,u,m]);let g=async e=>{var t,a,n,l,i,r,o,c,x,h,p,g,f,N,C,k,w,T;let E=Number(e.growth_rate),S=Number(e.stake),A=Number(e.take_profit),I={amount:S,currency:null==s?void 0:s.currency,growth_rate:E,symbol:e.symbol,limit_order:{...!e.boolean_tick_count&&{take_profit:A}}};j.current={...I,boolean_tick_count:e.boolean_tick_count};try{let s=await (0,nI.QT)(I,U.api_base.api),d=null==s?void 0:null===(a=s.proposal)||void 0===a?void 0:null===(t=a.validation_params)||void 0===t?void 0:t.max_ticks,u=null==s?void 0:null===(l=s.proposal)||void 0===l?void 0:null===(n=l.contract_details)||void 0===n?void 0:n.maximum_stake,x=null==s?void 0:null===(r=s.proposal)||void 0===r?void 0:null===(i=r.contract_details)||void 0===i?void 0:i.minimum_stake,h="",p="";_({max_payout:v.current,max_ticks:d,max_stake:Number(u)||1e3,min_stake:Number(x)||1}),v.current=null==s?void 0:null===(c=s.proposal)||void 0===c?void 0:null===(o=c.validation_params)||void 0===o?void 0:o.max_payout;let j=Number(e.tick_count);!isNaN(j)&&j>d?(p=`Maximum tick count is: ${d}`,m("tick_count",p),b.current.tick_count=p):!isNaN(j)&&j<1?(h="Minimum tick count is: 1",m("tick_count",h),b.current.tick_count=h):(b.current.tick_count=null,m("tick_count",void 0)),b.current.take_profit=null}catch(a){let t=(null==a?void 0:a.message)??(null==a?void 0:null===(x=a.error)||void 0===x?void 0:x.message);if(e.boolean_tick_count){t.includes("Please enter a stake amount that's at least")?t=(0,y.NC)("Minimum tick count allowed is 1"):t.includes("Maximum stake allowed is")&&(t=(0,y.NC)("Maximum tick count allowed is 1000")),m("tick_count",t),b.current.tick_count=t;let a=Number(e.tick_count);a>1e3?u("tick_count",1e3):a<1&&u("tick_count",1)}else if((null==a?void 0:null===(p=a.error)||void 0===p?void 0:null===(h=p.details)||void 0===h?void 0:h.field)==="take_profit"&&(t=0===Number(e.take_profit)?null==a?void 0:null===(N=a.error)||void 0===N?void 0:N.message:`Your total payout is ${Number(e.take_profit)+Number(e.stake)}. Enter amount less than ${v.current} ${(0,y.NC)("By changing your initial stake and/or take profit.")}`),(null==a?void 0:null===(f=a.error)||void 0===f?void 0:null===(g=f.details)||void 0===g?void 0:g.field)==="stake"){let s=null==a?void 0:null===(C=a.error)||void 0===C?void 0:C.message.match(/minimum stake of (\d+\.\d+)/i),n=null==a?void 0:null===(k=a.error)||void 0===k?void 0:k.message.match(/maximum payout of (\d+\.\d+)/i);if(s&&n){let a=s[1],l=n[1],i=Number(e.take_profit)+Number(e.stake);t=(0,y.NC)(`Minimum stake of ${a} and maximum payout of ${l}. Current payout is ${i.toFixed(2)}.`)}else if(t.includes("Maximum stake allowed is")){let e=(null==d?void 0:null===(w=d.additional_data)||void 0===w?void 0:w.max_stake)||"1000";t=(0,y.NC)(`Maximum stake allowed is ${e}`)}else t=`${null==a?void 0:null===(T=a.error)||void 0===T?void 0:T.message}`;m("stake",t)}else m("take_profit",t),b.current.take_profit=t}},f=i.useCallback(k()(g,500,{trailing:!0,leading:!1}),[]);i.useEffect(()=>{var e,t,a,n,l,i,r;((null===(e=j.current)||void 0===e?void 0:e.symbol)!==x.symbol||(null===(t=j.current)||void 0===t?void 0:t.amount)!==x.stake||(null===(n=j.current)||void 0===n?void 0:null===(a=n.limit_order)||void 0===a?void 0:a.take_profit)!==x.take_profit||(null===(l=j.current)||void 0===l?void 0:l.currency)!==(null==s?void 0:s.currency)||(null===(i=j.current)||void 0===i?void 0:i.growth_rate)!==x.growth_rate||(null===(r=j.current)||void 0===r?void 0:r.boolean_tick_count)!==x.boolean_tick_count)&&f(x)},[x.take_profit,x.tick_count,x.stake,x.growth_rate,null==s?void 0:s.currency,x.boolean_tick_count,x,f]);let N=async e=>{null==u||u(t,e),c(t,e)},C=`qs-contract-type-${t}`;return(0,l.jsx)("div",{className:"qs__form__field qs__form__field__input no-top-spacing",children:(0,l.jsx)(eF.gN,{name:t,id:C,children:e=>{let{field:t}=e,a=null==r?void 0:r.find(e=>(null==e?void 0:e.value)===(null==t?void 0:t.value));return n?(0,l.jsx)(nb,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_contract_type",autoComplete:"off",className:"qs__select contract-type",value:(null==a?void 0:a.text)||"",list_items:r,onItemSelection:e=>{let{value:t}=e;t&&N(t)}}):(0,l.jsx)("ul",{className:"qs__form__field__list","data-testid":"dt_qs_contract_types",children:r.map(e=>{let t=(null==a?void 0:a.value)===(null==e?void 0:e.value);return(0,l.jsx)("li",{className:M()("qs__form__field__list__item",{"qs__form__field__list__item--active":t}),onClick:()=>{N(null==e?void 0:e.value)},onChange:()=>{N(null==e?void 0:e.value)},children:(0,l.jsx)(V.Z,{size:"xs",color:"prominent",weight:t?"bold ":"normal",children:null==e?void 0:e.text})},null==e?void 0:e.value)})})}},C)})}),nO=[{text:"Take Profit",value:"take_profit"},{text:"Tick Count",value:"tick_count"}],nM=e=>{let{attached:t}=e,{quick_strategy:a}=(0,h.oR)(),{setValue:s}=a,{setFieldValue:n,values:r}=(0,eF.u6)(),[o,d]=(0,i.useState)(r.boolean_tick_count?nO[1]:nO[0]),c=e=>{if(null==e?void 0:e.value){let{value:t}=e,a="take_profit"===t;s("boolean_tick_count",!a),null==n||n("boolean_tick_count",!a),d({...o,text:a?"Take Profit":"Tick Count"})}};return(0,l.jsx)("div",{className:M()("qs__form__field qs__form__field__input",{"no-top-border-radius":t}),children:(0,l.jsx)(eF.gN,{name:"sell_conditions",id:"sell_conditions",children:e=>{let{field:t}=e;return(0,l.jsx)(nb,{...t,readOnly:!0,inputMode:"none","data-testid":"dt_qs_sell_conditions",autoComplete:"off",className:"qs__select",value:o.text,list_items:nO,onItemSelection:c})}},"sell_conditions")})},nL=(0,r.Pi)(()=>{var e;let{quick_strategy:t}=(0,h.oR)(),{selected_strategy:a,setValue:s,form_data:n}=t,r=null===(e=(0,sH.j)()[a])||void 0===e?void 0:e.fields,{isDesktop:o}=(0,g.F)(),{values:d,setFieldTouched:c,setFieldValue:_}=(0,eF.u6)(),{current_duration_min_max:u,additional_data:x}=t,[m,p]=i.useState((null==d?void 0:d.boolean_max_stake)??!1);i.useEffect(()=>{window.addEventListener("keydown",v);let e=null;try{e=JSON.parse(localStorage.getItem("qs-fields")??"{}")}catch{e=null}return p(!!(null==e?void 0:e.boolean_max_stake)),()=>{window.removeEventListener("keydown",v)}},[]),i.useEffect(()=>{(null==d?void 0:d.boolean_max_stake)!==void 0&&p(!!d.boolean_max_stake)},[null==d?void 0:d.boolean_max_stake]),i.useEffect(()=>{!m&&(null==d?void 0:d.max_stake)&&_("max_stake",0)},[m,null==d?void 0:d.max_stake]);let j=async(e,t)=>{if(s(e,t),await c(e,!0,!0),await _(e,t,!0),"stake"===e||"max_stake"===e){if(c("stake",!0,!0),c("max_stake",!0,!0),"stake"===e){let e=document.querySelectorAll('input[name="max_stake"]');if(e.length>0){let t=new Event("keyup",{bubbles:!0});e[0].dispatchEvent(t)}}else if("max_stake"===e){let e=document.querySelectorAll('input[name="stake"]');if(e.length>0){let t=new Event("keyup",{bubbles:!0});e[0].dispatchEvent(t)}}}},v=e=>{(null==e?void 0:e.key)&&"Enter"==e.key&&(e.preventDefault(),e.stopPropagation())},b=e=>e.every(e=>{var t;let a=null==d?void 0:null===(t=d[e.key])||void 0===t?void 0:t.toString();return e.multiple?e.multiple.includes(a):d[e.key]===e.value}),y=()=>{p(e=>!e)};return(0,l.jsx)("div",{children:r.map((e,t)=>(null==e?void 0:e.length)?(0,l.jsx)("div",{className:"qs__body__content__form__group",children:e.map((e,t)=>{var a,s;let r=`${e.name||e.type} + ${t}`;if(!o&&(null===(a=e.hide)||void 0===a?void 0:a.includes("mobile"))||o&&(null===(s=e.hide)||void 0===s?void 0:s.includes("desktop")))return null;switch(e.type){case"number":{let t;if(!e.name)return null;let{should_have:a=[],hide_without_should_have:s=!1,has_currency_unit:l=!1}=e,d=b(a),c=1;"duration"===e.name&&u&&(c=u.min,t=u.max);let _=e.should_have;if(_&&"max_stake"===e.name&&isNaN(c=+(null==n?void 0:n.stake))&&(c=1),_&&"last_digit_prediction"===e.name&&((isNaN(+(null==n?void 0:n.last_digit_prediction))||1==+(null==n?void 0:n.last_digit_prediction))&&(c=0),+(null==n?void 0:n.last_digit_prediction)>0&&(c=+(null==n?void 0:n.last_digit_prediction)-1),t=9),null==a?void 0:a.length){if(!d&&(!o||s))return null;return(0,i.createElement)(nT,{...e,key:r,name:e.name,disabled:!d,onChange:j,min:c,max:t,has_currency_unit:l})}return(0,i.createElement)(nT,{...e,onChange:j,key:r,name:e.name,min:c,max:t,has_currency_unit:l})}case"label":{if(!e.label)return null;let{should_have:t=[],hide_without_should_have:a=!1}=e;if(!b(t)&&a)return null;return(0,l.jsx)(nA,{label:e.label,description:e.description?String(e.description):"",additional_data:x},r)}case"checkbox":return(0,l.jsx)(nS,{name:e.name,label:e.label,description:e.description?String(e.description):void 0,isEnabledToggleSwitch:!!m,setIsEnabledToggleSwitch:y},r);case"symbol":return(0,i.createElement)(nf,{...e,key:r});case"tradetype":return(0,i.createElement)(nC,{...e,key:r});case"durationtype":return(0,i.createElement)(nw,{...e,key:r});case"contract_type":return(0,i.createElement)(nk,{...e,key:r,name:e.name});case"growth_rate":return(0,i.createElement)(nR,{...e,key:r,name:e.name});case"sell_conditions":return(0,i.createElement)(nM,{...e,key:r});default:return null}})},t):null)})}),nD=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DEFAULT";return({DURATION:{MIN:(0,y.NC)("Minimum duration: {{ value }}",{value:t}),MAX:(0,y.NC)("Maximum duration: {{ value }}",{value:t})},LAST_DIGIT_PREDICTION:{MIN:(0,y.NC)("Enter a value from {{ value }} to 9.",{value:t}),MAX:(0,y.NC)("Enter a value from 0 to {{ value }}.",{value:t})},DEFAULT:{MIN:(0,y.NC)("The value must be equal or greater than {{ value }}",{value:t}),MAX:(0,y.NC)("The value must be equal or less than {{ value }}",{value:t})}})[a][e]},nU=(0,r.Pi)(e=>{var t;let{children:a}=e,{quick_strategy:s}=(0,h.oR)(),{selected_strategy:n,form_data:r,initializeLossThresholdWarningData:o}=s,d=null===(t=(0,sH.j)()[n])||void 0===t?void 0:t.fields,[c,_]=(0,i.useState)(sB.Ry().shape({})),u=(0,i.useRef)(!0),x=null,m=()=>{let e=null;try{e=JSON.parse(localStorage.getItem("qs-fields")??"{}")}catch{e=null}return e};i.useEffect(()=>()=>{u.current=!1},[]),i.useEffect(()=>{o()},[]);let p=e=>{let t={};d.forEach(a=>{if(!(null==a?void 0:a.length))return null;a.forEach(a=>{var n,l;if((null==a?void 0:null===(n=a.validation)||void 0===n?void 0:n.length)&&(null==a?void 0:a.name)&&a.validation.includes("number")){let n=sB.Rx().typeError((0,y.NC)("Must be a number")),i=0,o=10,d=nD("MIN",0),c=nD("MAX",o),_="",{current_duration_min_max:u}=s;"duration"===a.name&&u&&(i=u.min,o=u.max,d=nD("MIN",i,"DURATION"),c=nD("MAX",o,"DURATION"));let m=!a.should_have||(null===(l=a.should_have)||void 0===l?void 0:l.every(t=>{var a;let s=null==e?void 0:null===(a=e[t.key])||void 0===a?void 0:a.toString();return t.multiple?t.multiple.includes(s):(null==e?void 0:e[t.key])===t.value}));m&&"max_stake"===a.name&&(isNaN(i=+(null==r?void 0:r.stake))&&(i=+((null==x?void 0:x.stake)??0)),d=nD("MIN",i)),m&&"last_digit_prediction"===a.name&&(i=0,c=nD("MAX",o=9,"LAST_DIGIT_PREDICTION"),_="Enter a value from 0 to 9."),m&&a.validation.forEach(e=>{if("string"==typeof e)switch(e){case"required":n=n.required((0,y.NC)("Field cannot be empty"));break;case"min":n=n.min(i,d);break;case"max":n=n.max(o,c);break;case"ceil":n=n.round("ceil");break;case"floor":n=n.round("floor");break;case"integer":n=n.integer(_)}else if("object"==typeof e&&(null==e?void 0:e.type)){let t=e.getDynamicValue?e.getDynamicValue(s):e.value;n=n[e.type](t,(0,y.NC)(e.getMessage(t)))}}),t[a.name]=n}})}),u.current&&_(sB.Ry().shape(t))};return(0,l.jsx)(eF.J9,{initialValues:(()=>{let e=m();return x={symbol:(null==e?void 0:e.symbol)??(0,U.config)().QUICK_STRATEGY.DEFAULT.symbol,tradetype:(null==e?void 0:e.tradetype)??"",type:(null==e?void 0:e.type)??"",durationtype:(null==e?void 0:e.durationtype)??(0,U.config)().QUICK_STRATEGY.DEFAULT.durationtype,duration:(null==e?void 0:e.duration)??"1",stake:(null==e?void 0:e.stake)??"1",loss:(null==e?void 0:e.loss)??"",profit:(null==e?void 0:e.profit)??"",size:(null==e?void 0:e.size)??String((0,U.config)().QUICK_STRATEGY.DEFAULT.size),unit:(null==e?void 0:e.unit)??String((0,U.config)().QUICK_STRATEGY.DEFAULT.unit),action:(null==e?void 0:e.action)??"RUN",max_stake:(null==e?void 0:e.max_stake)??10,boolean_max_stake:(null==e?void 0:e.boolean_max_stake)??!1,last_digit_prediction:(null==e?void 0:e.last_digit_prediction)??1,growth_rate:(null==e?void 0:e.growth_rate)??"0.01",tick_count:(null==e?void 0:e.tick_count)??0,take_profit:(null==e?void 0:e.take_profit)??0,boolean_tick_count:(null==e?void 0:e.boolean_tick_count)??!1,max_payout:(null==e?void 0:e.max_payout)??0,max_ticks:(null==e?void 0:e.max_ticks)??0}})(),validationSchema:c,onSubmit:e=>{var t;return p(e),null===(t=localStorage)||void 0===t||t.setItem("qs-fields",JSON.stringify(e)),e},validate:e=>p(e),validateOnChange:!1,children:a})}),nF=(0,r.Pi)(()=>{let{quick_strategy:e}=(0,h.oR)(),{isDesktop:t}=(0,g.F)(),{is_open:a,setFormVisibility:s,form_data:n,selected_strategy:r}=e,o=(0,i.useRef)(null),[d,c]=i.useState(sG.StrategySelect),[_,u]=i.useState("");i.useEffect(()=>(a?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[a]);let x=()=>{var e,t,a;let s=(null===(a=o.current)||void 0===a?void 0:null===(t=a.querySelector(".active"))||void 0===t?void 0:null===(e=t.textContent)||void 0===e?void 0:e.toLowerCase())==="learn more"?"learn more":"trade parameters";(0,tQ._W)({subform_name:"quick_strategy",quick_strategy_tab:s,selected_strategy:r,form_values:n})},m=()=>{x(),s(!1)};return(0,l.jsx)(nU,{children:(0,l.jsxs)(eF.l0,{children:[(0,l.jsx)(ns,{}),t?(0,l.jsx)(f.Z,{className:"modal--strategy",is_open:a,width:"72rem",children:(0,l.jsx)(s6,{onClickClose:m,setCurrentStep:c,current_step:d,selected_trade_type:_,setSelectedTradeType:u,children:(0,l.jsx)(nL,{})})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ay,{is_modal_open:a,className:"quick-strategy__wrapper",header:(0,l.jsx)(V.Z,{size:"xs",weight:"bold",children:(0,y.NC)(`Step ${d===sG.StrategyCompleted?2:1}/2: Choose your strategy`)}),onClickClose:m,height_offset:"8rem",children:(0,l.jsx)(ne,{setCurrentStep:c,current_step:d,selected_trade_type:_,setSelectedTradeType:u,children:(0,l.jsx)(nL,{})})}),(0,l.jsx)(nt,{setCurrentStep:c,current_step:d})]})]})})});var nZ=a("18908"),nz=a("69103"),nP=a("27086"),nB=a("35651");let nX=(0,r.Pi)(e=>{let{block_node:t,should_hide_display_name:a}=e,{flyout:s}=(0,h.oR)(),{initBlockWorkspace:n}=s,r=i.useRef();return i.useEffect(()=>{n(r,t)},[]),(0,l.jsx)("div",{ref:e=>r=e,className:M()({"flyout__block-workspace--center":a,"flyout__block-workspace--top":!a}),"data-testid":"flyout-block-workspace"})}),n$=e=>{let{onInfoClick:t,block_node:a,is_active:s,should_hide_display_name:n}=e,i=a.getAttribute("type")||"",r=window.Blockly.Blocks[i].meta(),o="variables_get"===i,d="variables_set"===i,{display_name:c,description:_}=r,u=()=>(0,l.jsx)("div",{className:"flyout__item-buttons",children:(0,l.jsx)(eO.Z,{id:`db-flyout__add--${i}`,"data-testid":`dt_flyout__add_${i}`,className:"flyout__button-add flyout__button-add--hide",has_effect:!0,is_plus:!0,onClick:()=>window.Blockly.derivWorkspace.addBlockNode(a),type:"button",children:(0,l.jsx)(nB.Z,{height:"24px",width:"24px",fill:"var(--text-general)"})})});return(0,l.jsxs)(l.Fragment,{children:[d&&(0,l.jsx)("div",{className:"flyout__hr"}),(0,l.jsxs)("div",{className:M()("flyout__item",{"flyout__item--active":s}),children:[!n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"flyout__item-header",children:[(0,l.jsx)(V.Z,{size:o?"xs":"xsm",lineHeight:o?void 0:"xl",weight:o?void 0:"bold",children:c}),!o&&(0,l.jsx)(u,{})]}),(0,l.jsxs)("div",{className:"flyout__item-description",children:[_,t&&(0,l.jsx)("a",{id:c.replace(/\s/gi,"-"),className:"flyout__item-info",onClick:t,children:(0,l.jsx)(y.Xx,{i18n_default_text:"Learn more"})})]})]}),(0,l.jsxs)("div",{className:"flyout__block-workspace__header",children:[(0,l.jsx)(nX,{block_node:a,should_hide_display_name:!0}),o&&(0,l.jsx)(u,{})]})]})]})};var nH=a("43774");let nV=e=>{let{width:t,url:a}=e;return(0,l.jsx)("div",{className:"flyout__item","data-testid":"dt_flyout_image",children:(0,l.jsx)("img",{src:a,className:"flyout__image",style:{width:t}})})},nq=e=>{let{text:t}=e;return(0,l.jsx)(V.Z,{as:"p",size:"xs",styles:{lineHeight:"1.3em"},children:t})},nG=e=>(0,l.jsx)("div",{className:"flyout__item","data-testid":"dt_flyout_video_container",children:(0,l.jsx)("iframe",{"data-testid":"dt_flyout_video",className:"flyout__video",src:e.url,frameBorder:"0",allow:"accelerometer; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,width:"100%"})}),nY=(0,r.Pi)(()=>{let{flyout:e,flyout_help:t}=(0,h.oR)(),{block_node:a,block_type:s,examples:n,help_string:r,onBackClick:o,onSequenceClick:d,should_next_disable:c,should_previous_disable:_,title:u}=t,{is_search_flyout:x}=e,m=r&&(0,nz.S)(window.__webpack_public_path__)[s],p=0;return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsxs)("div",{className:"flyout__help-header","data-testid":"dt_flyout_help_base",children:[(0,l.jsx)("button",{className:"dc-btn flyout__button-back",onClick:o,children:(0,l.jsx)(nH.Z,{height:"16px",width:"16px",fill:"var(--text-general)"})}),(0,l.jsx)(V.Z,{weight:"bold",className:"flyout__help-title",children:u}),(0,l.jsx)("div",{className:"flyout__item-buttons",children:(0,l.jsx)(eO.Z,{className:"flyout__button-add",has_effect:!0,id:`db-flyout-help__add--${s}`,onClick:()=>window.Blockly.derivWorkspace.addBlockNode(a),primary:!0,text:(0,y.NC)("Add"),type:"button"})})]}),(0,l.jsx)("div",{className:"flyout__help-content",children:m&&m.map((e,t)=>{let{type:i,width:o,url:d,example_id:c}=e,{text:_}=r,u=n.find(e=>e.id===c);switch(i){case nz.I.TEXT:if(p<_.length)return(0,l.jsx)(nq,{text:_[p++]},`${s}_${t}`);return null;case nz.I.VIDEO:return(0,l.jsx)(nG,{url:d},`${s}_${t}`);case nz.I.IMAGE:return(0,l.jsx)(nV,{width:o,url:d},`${s}_${t}`);case nz.I.BLOCK:return(0,l.jsx)(nX,{block_node:a},`${s}_${t}`);case nz.I.EXAMPLE:if(u)return(0,l.jsx)(nX,{block_node:u.childNodes[0]},`${s}_${t}`);return null;default:return null}})}),!x&&!(_&&c)&&(0,l.jsxs)("div",{className:"flyout__help-footer",children:[(0,l.jsx)(eO.Z,{className:"flyout__button-previous",secondary:!0,onClick:()=>d(!1),text:(0,y.NC)("Previous"),type:"button",is_disabled:_,renderText:e=>_&&(0,l.jsx)(V.Z,{size:"xs",weight:"bold",align:"center",color:"disabled",children:e})}),(0,l.jsx)(eO.Z,{className:"flyout__button-next",secondary:!0,onClick:()=>d(!0),text:(0,y.NC)("Next"),type:"button",is_disabled:c,renderText:e=>c&&(0,l.jsx)(V.Z,{size:"xs",weight:"bold",align:"center",color:"disabled",children:e})})]})]})}),nK=e=>{let{search_term:t,total_result:a}=e;return(0,l.jsxs)("div",{className:"flyout__search-header",children:[(0,l.jsx)(V.Z,{weight:"bold",className:"flyout__search-header-text",children:(0,y.NC)('Results for "{{ search_term }}"',{search_term:t,interpolation:{escapeValue:!1}})}),(0,l.jsx)(V.Z,{weight:"bold",color:"profit-success",className:"flyout__search-header-text",children:`${a} ${a>1?(0,y.NC)("results"):(0,y.NC)("result")}`})]})},nW=e=>{let t=i.useRef(),{flyout_content:a,active_helper:s,setHelpContent:n,initFlyoutHelp:r,is_empty:o,is_search_flyout:d,selected_category:c,first_get_variable_block_index:_}=e;return(0,l.jsx)("div",{ref:t,className:M()("flyout__content",{"flyout__normal-content":!d}),children:(0,l.jsxs)(ed.Z,{className:"flyout__content-scrollbar",children:[(null==c?void 0:c.getAttribute("id"))==="indicators"&&(0,l.jsxs)("div",{className:"flyout__content-disclaimer",children:[(0,l.jsx)("span",{className:"flyout__content-disclaimer-icon",children:(0,l.jsx)(nP.Z,{className:"flyout__content-disclaimer__warning-icon",height:"24px",width:"24px",fill:"var(--text-general)"})}),(0,l.jsx)("span",{className:"flyout__content-disclaimer-text",children:(0,y.NC)("Indicators on the chart tab are for indicative purposes only and may vary slightly from the ones on the {{platform_name_dbot}} workspace.",{platform_name_dbot:(0,u.$Xq)("dbot").name})})]}),o?(0,l.jsx)("div",{className:"flyout__search-empty",children:(0,l.jsx)(V.Z,{as:"h2",weight:"bold",lineHeight:"xs",children:(0,y.NC)("No results found")})}):a.map((e,t)=>{switch(e.tagName.toUpperCase()){case window.Blockly.Xml.NODE_BLOCK:{var a,i,o,c;let u=e.getAttribute("type")||"";return(0,l.jsx)(n$,{id:`flyout__item-workspace--${t}`,block_node:e,should_hide_display_name:"variables_get"===u&&t!==_,onInfoClick:(0,nz.S)(window.__webpack_public_path__)[u]&&(d?()=>n(e):()=>r(e,u)),is_active:s===u},`${e.getAttribute("type")}${null===(c=window)||void 0===c?void 0:null===(o=c.Blockly)||void 0===o?void 0:null===(i=o.utils)||void 0===i?void 0:null===(a=i.idGenerator)||void 0===a?void 0:a.genUid()}`)}case window.Blockly.Xml.NODE_LABEL:return(0,l.jsx)("div",{className:"flyout__item-label-bold",children:e.getAttribute("text")},`${e.getAttribute("text")}${t}`);case window.Blockly.Xml.NODE_INPUT:return(0,l.jsx)(eY,{className:`${e.getAttribute("className")}`,type:`${e.getAttribute("type")}`,name:`${e.getAttribute("name")}`,placeholder:`${e.getAttribute("placeholder")}`,autoComplete:"off"},`${e.getAttribute("name")}${t}`);case window.Blockly.Xml.NODE_BUTTON:{let a=e.getAttribute("callbackKey"),s=e.getAttribute("id");return(0,l.jsx)("button",{id:s,className:M()("dc-btn","dc-btn-effect","dc-btn--primary",`${e.getAttribute("className")}`),onClick:e=>{let t=window.Blockly.derivWorkspace,s=t.getButtonCallback(a);e.targetWorkspace_=t,e.getTargetWorkspace=()=>e.targetWorkspace_,null==s||s(e)},children:e.getAttribute("text")},`${a}${t}`)}default:return null}})]})})},nJ=(0,r.Pi)(()=>{let{flyout:e,flyout_help:t}=(0,h.oR)(),{active_helper:a,initFlyoutHelp:s,setHelpContent:n}=t,{flyout_content:r,flyout_width:o,is_help_content:d,is_search_flyout:c,is_visible:_,onMount:u,onUnmount:x,search_term:m,selected_category:p,first_get_variable_block_index:j}=e;if(i.useEffect(()=>(u(),()=>x()),[u,x]),_&&c){var v;null===nZ.default||void 0===nZ.default||null===(v=nZ.default.pushDataLayer)||void 0===v||v.call(nZ.default,{event:"dbot_search_results",value:!0})}let b=Object.keys(r).length;return _&&(0,l.jsxs)("div",{id:"gtm-search-results",className:M()("flyout",{flyout__search:c,flyout__help:d,flyout__normal:!d&&!c}),style:{width:`${o}px`},children:[c&&!d&&(0,l.jsx)(nK,{search_term:m,total_result:b}),d?(0,l.jsx)(nY,{}):(0,l.jsx)(nW,{is_empty:0===b,flyout_content:r,active_helper:a,setHelpContent:n,initFlyoutHelp:s,is_search_flyout:c,selected_category:p,first_get_variable_block_index:j})]})}),nQ=e=>{let{is_running:t,is_multiplier:a,is_contract_dialog_open:s,is_stop_bot_dialog_open:n,closeMultiplierContract:r,onOkButtonClick:o,toggleStopBotDialog:d}=e,c=t&&a?(0,y.NC)("Keep my contract"):(0,y.NC)("Stop my bot"),_=t&&a?(0,y.NC)("Close my contract"):(0,y.NC)("Back"),x=t&&a?(0,y.NC)("Keep your current contract?"):(0,y.NC)("Stop your current bot?"),m=t&&a?r:d;return(0,l.jsx)(i.Fragment,{children:(0,l.jsx)(aq.Z,{portal_element_id:"modal_root",title:x,is_visible:t?n:s,confirm_button_text:c,onConfirm:o,cancel_button_text:_,onCancel:m,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0,children:t&&a?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(V.Z,{as:"p",lineHeight:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"},children:[(0,l.jsx)(y.Xx,{i18n_default_text:"Close your contract now or keep it running. If you decide to keep it running, you can check and close it later on the "}),(0,l.jsx)(V.Z,{weight:"bold",as:"span",lineHeight:"s",size:"xs",children:(0,l.jsx)(a1.Z,{className:"link",onClick:()=>window.location.assign(u.xOw.reports),children:(0,l.jsx)(y.Xx,{i18n_default_text:"Reports"})},0)}),(0,l.jsx)(y.Xx,{i18n_default_text:" page."})]}),(0,l.jsx)(V.Z,{as:"p",lineHeight:"s",size:"xs",children:(0,l.jsx)(y.Xx,{i18n_default_text:"The Quick Strategy you just created will be loaded to the workspace."})})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(V.Z,{as:"p",lineHeight:"s",size:"xs",styles:{paddingBottom:"2rem",paddingTop:"1rem"},children:(0,l.jsx)(y.Xx,{i18n_default_text:"Stopping the current bot will load the Quick Strategy you just created to the workspace."})}),(0,l.jsxs)(V.Z,{as:"p",lineHeight:"s",size:"xs",children:[(0,l.jsx)(y.Xx,{i18n_default_text:"Any open contracts can be viewed on the "}),(0,l.jsx)(V.Z,{weight:"bold",as:"span",lineHeight:"s",size:"xs",children:(0,l.jsx)(a1.Z,{className:"link",onClick:()=>window.location.assign(u.xOw.reports),children:(0,l.jsx)(y.Xx,{i18n_default_text:"Reports"})},0)}),(0,l.jsx)(V.Z,{as:"span",lineHeight:"s",size:"xs",styles:{paddingInlineStart:"0.4rem"},children:(0,l.jsx)(y.Xx,{i18n_default_text:" page."})})]})]})})})},n0=(0,r.Pi)(()=>{let{run_panel:e,quick_strategy:t,summary_card:a}=(0,h.oR)(),{is_contract_dialog_open:s,is_stop_bot_dialog_open:n,toggleStopBotDialog:i}=t,{is_running:r,closeMultiplierContract:o,stopMyBot:d,is_dialog_open:c}=e,{is_multiplier:_}=a;return(0,l.jsx)(nQ,{is_running:r,onOkButtonClick:d,is_contract_dialog_open:s,is_stop_bot_dialog_open:n,is_multiplier:_,closeMultiplierContract:o,is_dialog_open:c,toggleStopBotDialog:i})}),n1=e=>{let{popover_message:t,button_id:a,button_classname:s,buttonOnClick:n,icon:i,button_text:r,is_bot_running:o}=e,d=(0,l.jsx)(eO.Z,{id:a,className:s,has_effect:!0,onClick:n,icon:i,green:!0,children:r});return o?d:(0,l.jsx)(q,{alignment:"bottom",message:t,should_disable_pointer_events:!0,children:d})};var n3=a("52068"),n8=a("62705"),n5=a("48073"),n7=a("81712"),n2=a("66090"),n4=a("87348"),n9=a("79800"),n6=a("70342"),le=a("80246"),lt=a("83069");let la=e=>{let{popover_message:t,icon:a}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eK.Z,{children:a}),(0,l.jsx)(ts.Z,{children:(0,l.jsx)(q,{alignment:"bottom",message:t,zIndex:String(at.TOOLBAR),should_disable_pointer_events:!0,children:a})})]})},ls=(0,r.Pi)(()=>{let{dashboard:e,toolbar:t,load_modal:a,save_modal:s}=(0,h.oR)(),{setPreviewOnPopup:n,setChartModalVisibility:i,setTradingViewModalVisibility:r}=e,{has_redo_stack:o,has_undo_stack:d,onResetClick:c,onSortClick:_,onUndoClick:u,onZoomInOutClick:x}=t,{toggleSaveModal:m}=s,{toggleLoadModal:p}=a,{isDesktop:j}=(0,g.F)();return(0,l.jsx)("div",{className:"toolbar__wrapper",children:(0,l.jsxs)("div",{className:"toolbar__group toolbar__group-btn","data-testid":"dt_toolbar_group_btn",children:[(0,l.jsx)(la,{popover_message:(0,y.NC)("Reset"),icon:(0,l.jsx)("span",{id:"db-toolbar__reset-button",className:"toolbar__icon",onClick:c,"data-testid":"dt_toolbar_reset_button",children:(0,l.jsx)(n3.Z,{})})}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Import"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__import-button","data-testid":"dt_toolbar_import_button",onClick:()=>{n(!0),p(),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"load_strategy",load_strategy_tab:"recent"})},children:(0,l.jsx)(n8.Z,{})})}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Save"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__save-button","data-testid":"dt_toolbar_save_button",onClick:m,children:(0,l.jsx)(n5.Z,{})})}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Sort blocks"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__sort-button","data-testid":"dt_toolbar_sort_button",onClick:_,children:(0,l.jsx)(n7.Z,{})})}),j&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"vertical-divider"}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Charts"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__charts-button",onClick:()=>i(),children:(0,l.jsx)(n2.Z,{})})}),(0,l.jsx)(la,{popover_message:(0,y.NC)("TradingView Chart"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__tradingview-button",onClick:()=>r(),children:(0,l.jsx)(n4.Z,{})})})]}),(0,l.jsx)("div",{className:"vertical-divider"}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Undo"),icon:(0,l.jsx)("span",{className:M()("toolbar__icon undo",{"toolbar__icon--disabled":!d}),id:"db-toolbar__undo-button","data-testid":"dt_toolbar_undo_button",onClick:()=>u(!1),children:(0,l.jsx)(n9.Z,{})})}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Redo"),icon:(0,l.jsx)("span",{className:M()("toolbar__icon redo",{"toolbar__icon--disabled":!o}),id:"db-toolbar__redo-button","data-testid":"dt_toolbar_redo_button",onClick:()=>u(!0),children:(0,l.jsx)(n6.Z,{})})}),(0,l.jsx)("div",{className:"vertical-divider"}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Zoom in"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__zoom-in-button","data-testid":"dt_toolbar_zoom_in_button",onClick:()=>x(!0),children:(0,l.jsx)(le.Z,{})})}),(0,l.jsx)(la,{popover_message:(0,y.NC)("Zoom out"),icon:(0,l.jsx)("span",{className:"toolbar__icon",id:"db-toolbar__zoom-out","data-testid":"dt_toolbar_zoom_out_button",onClick:()=>x(!1),children:(0,l.jsx)(lt.Z,{})})})]})})}),ln=(0,r.Pi)(()=>{let{run_panel:e,toolbar:t,quick_strategy:a}=(0,h.oR)(),{isDesktop:s}=(0,g.F)(),{is_dialog_open:n,closeResetDialog:r,onResetOkButtonClick:o}=t,{is_running:d}=e,{setFormVisibility:c}=a,_=d?(0,y.NC)("Yes"):(0,y.NC)("OK"),u=d?(0,y.NC)("No"):(0,y.NC)("Cancel");return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"toolbar dashboard__toolbar","data-testid":"dt_dashboard_toolbar",children:(0,l.jsxs)("div",{className:"toolbar__section",children:[!s&&(0,l.jsx)(n1,{popover_message:(0,y.NC)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:()=>{c(!0),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"quick_strategy"})},button_text:(0,y.NC)("Quick strategy"),is_bot_running:d}),s&&(0,l.jsx)(ls,{})]})}),!s&&(0,l.jsx)(ls,{}),(0,l.jsx)(aq.Z,{portal_element_id:"modal_root",title:(0,y.NC)("Are you sure?"),is_visible:n,confirm_button_text:_,onConfirm:o,cancel_button_text:u,onCancel:r,is_mobile_full_width:!1,className:"toolbar__dialog",has_close_icon:!0,children:d?(0,l.jsx)(y.Xx,{i18n_default_text:"The workspace will be reset to the default strategy and any unsaved changes will be lost. <0>Note: This will not affect your running bot.</0>",components:[(0,l.jsx)("div",{className:"toolbar__dialog-text--second","data-testid":"dt_toolbar_dialog_text_second"},0)]}):(0,l.jsx)(y.Xx,{i18n_default_text:"Any unsaved changes will be lost."})})]})});var ll=a("88720"),li=a("16232"),lr=a("40877");let lo=(0,r.Pi)(e=>{let{search:t,is_search_loading:a,onClick:s}=e;return t?a?(0,l.jsx)("div",{className:"loader","data-testid":"loader"}):(0,l.jsx)(lr.Z,{onClick:s,height:"18px",width:"18px",fill:"var(--text-general)"}):(0,l.jsx)(li.Z,{height:"20px",width:"20px",fill:"var(--text-general)"})}),ld=e=>{let{is_search_loading:t,onSearch:a,onSearchBlur:s,onSearchClear:n,onSearchKeyUp:i}=e;return(0,l.jsx)("div",{className:"db-toolbox__search",children:(0,l.jsx)(eF.J9,{initialValues:{search:""},onSubmit:a,children:e=>{let{submitForm:a,values:{search:r},setFieldValue:o}=e;return(0,l.jsx)(eF.l0,{children:(0,l.jsx)(eF.gN,{name:"search",children:e=>{let{field:d}=e;return(0,l.jsx)(eY,{...d,className:"db-toolbox__search-field",type:"text",name:"search",placeholder:(0,y.NC)("Search"),onKeyUp:()=>i(a),onFocus:a,onBlur:s,leading_icon:(0,l.jsx)(lo,{search:r,is_search_loading:t,onClick:()=>n(o)})})}})})}})})};var lc=a("97762");let l_=e=>{let{...t}=e;return i.createElement("arg",t)},lu=e=>{let{...t}=e;return i.createElement("block",t)},lx=e=>{let{...t}=e;return i.createElement("category",t)},lm=e=>{let{...t}=e;return i.createElement("example",t)},lh=e=>{let{...t}=e;return i.createElement("examples",t)},lp=e=>{let{...t}=e;return i.createElement("field",t)},lj=e=>{let{...t}=e;return i.createElement("mutation",t)},lv=e=>{let{...t}=e;return i.createElement("next",t)},lb=e=>{let{...t}=e;return i.createElement("shadow",t)},ly=e=>{let{...t}=e;return i.createElement("statement",t)},lg=e=>{let{...t}=e;return i.createElement("value",t)},lf=e=>{let{...t}=e;return i.createElement("xml",t)},lN=()=>lc.renderToStaticMarkup((0,l.jsxs)(lf,{xmlns:"http://www.w3.org/1999/xhtml",id:"toolbox",children:[(0,l.jsxs)(lx,{id:"trade_parameters",name:(0,y.NC)("Trade parameters"),children:[(0,l.jsx)(lu,{type:"trade_definition",children:(0,l.jsx)(ly,{name:"TRADE_OPTIONS",children:(0,l.jsxs)(lu,{type:"trade_definition_market",deletable:"false",movable:"false",children:[(0,l.jsx)(lp,{name:"MARKET_LIST"}),(0,l.jsx)(lp,{name:"SUBMARKET_LIST"}),(0,l.jsx)(lp,{name:"SYMBOL_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"trade_definition_tradetype",deletable:"false",movable:"false",children:[(0,l.jsx)(lp,{name:"TRADETYPECAT_LIST"}),(0,l.jsx)(lp,{name:"TRADETYPE_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"trade_definition_contracttype",deletable:"false",movable:"false",children:[(0,l.jsx)(lp,{name:"TYPE_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"trade_definition_candleinterval",deletable:"false",movable:"false",children:[(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"60"}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"trade_definition_restartbuysell",deletable:"false",movable:"false",children:[(0,l.jsx)(lp,{name:"TIME_MACHINE_ENABLED",children:"FALSE"}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"trade_definition_restartonerror",deletable:"false",movable:"false",children:(0,l.jsx)(lp,{name:"RESTARTONERROR",children:"TRUE"})})})]})})]})})]})})]})})]})})}),(0,l.jsxs)(lu,{type:"trade_definition_tradeoptions",children:[(0,l.jsx)(lj,{has_first_barrier:"false",has_second_barrier:"false",has_prediction:"false"}),(0,l.jsx)(lp,{name:"DURATIONTYPE_LIST"}),(0,l.jsx)(lp,{name:"CURRENCY_LIST",children:"USD"}),(0,l.jsx)(lg,{name:"DURATION",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})}),(0,l.jsx)(lg,{name:"AMOUNT",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})}),(0,l.jsx)(lp,{name:"AMOUNT_LIMITS"})]}),(0,l.jsxs)(lu,{type:"trade_definition_multiplier",children:[(0,l.jsx)(lp,{name:"MULTIPLIERTYPE_LIST"}),(0,l.jsx)(lp,{name:"CURRENCY_LIST",children:"USD"}),(0,l.jsx)(lg,{name:"AMOUNT",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})}),(0,l.jsx)(lp,{name:"AMOUNT_LIMITS"})]}),(0,l.jsx)(lu,{type:"multiplier_take_profit",children:(0,l.jsx)(lg,{name:"AMOUNT",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})})}),(0,l.jsx)(lu,{type:"multiplier_stop_loss",children:(0,l.jsx)(lg,{name:"AMOUNT",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})})}),(0,l.jsxs)(lu,{type:"trade_definition_accumulator",children:[(0,l.jsx)(lp,{name:"GROWTHRATE_LIST"}),(0,l.jsx)(lp,{name:"CURRENCY_LIST",children:"USD"}),(0,l.jsx)(lg,{name:"AMOUNT",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(lu,{type:"accumulator_take_profit",children:(0,l.jsx)(lg,{name:"AMOUNT",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})})})]}),(0,l.jsxs)(lx,{id:"purchase_conditions",name:(0,y.NC)("Purchase conditions"),children:[(0,l.jsx)(lu,{type:"before_purchase"}),(0,l.jsx)(lu,{type:"purchase"})]}),(0,l.jsxs)(lx,{id:"sell_conditions",name:(0,y.NC)("Sell conditions (optional)"),children:[(0,l.jsx)(lu,{type:"during_purchase"}),(0,l.jsx)(lu,{type:"sell_at_market"})]}),(0,l.jsxs)(lx,{id:"trade_results",name:(0,y.NC)("Restart trading conditions"),children:[(0,l.jsx)(lu,{type:"after_purchase"}),(0,l.jsx)(lu,{type:"trade_again"})]}),(0,l.jsxs)(lx,{id:"analysis",name:(0,y.NC)("Analysis"),children:[(0,l.jsxs)(lx,{id:"indicators",name:(0,y.NC)("Indicators"),children:[(0,l.jsx)(lu,{type:"sma_statement",children:(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsx)(lu,{type:"smaa_statement",children:(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsxs)(lu,{type:"bb_statement",children:[(0,l.jsx)(lp,{name:"BBRESULT_LIST",children:"0"}),(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"period",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"std_dev_multiplier_up",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"UPMULTIPLIER",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"5"})})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"std_dev_multiplier_down",children:(0,l.jsx)(lg,{name:"DOWNMULTIPLIER",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"5"})})})})})]})})]})})]})})]}),(0,l.jsxs)(lu,{type:"bba_statement",children:[(0,l.jsx)(lp,{name:"BBRESULT_LIST",children:"0"}),(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"period",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"std_dev_multiplier_up",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"UPMULTIPLIER",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"5"})})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"std_dev_multiplier_down",children:(0,l.jsx)(lg,{name:"DOWNMULTIPLIER",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"5"})})})})})]})})]})})]})})]}),(0,l.jsx)(lu,{type:"ema_statement",children:(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsx)(lu,{type:"emaa_statement",children:(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsx)(lu,{type:"rsi_statement",children:(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsx)(lu,{type:"input_list",deletable:"false",movable:"false",children:(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})})})}),(0,l.jsx)(lu,{type:"rsia_statement",children:(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})]})})}),(0,l.jsxs)(lu,{type:"macda_statement",children:[(0,l.jsx)(lp,{name:"MACDFIELDS_LIST",children:"1"}),(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST"}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"fast_ema_period",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"FAST_EMA_PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"12"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"slow_ema_period",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"SLOW_EMA_PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"26"})})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"signal_ema_period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"SIGNAL_EMA_PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"9"})})})})})]})})]})})]})})]})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Tick and candle analysis"),id:"tick_analysis",children:[(0,l.jsx)(lu,{type:"tick_analysis"}),(0,l.jsx)(lu,{type:"tick"}),(0,l.jsx)(lu,{type:"last_digit"}),(0,l.jsx)(lu,{type:"stat"}),(0,l.jsx)(lu,{type:"stat_list"}),(0,l.jsx)(lu,{type:"ticks"}),(0,l.jsx)(lu,{type:"lastDigitList"}),(0,l.jsx)(lu,{type:"check_direction"}),(0,l.jsx)(lu,{type:"is_candle_black"}),(0,l.jsxs)(lu,{type:"read_ohlc",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lg,{name:"CANDLEINDEX",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(lu,{type:"read_ohlc_obj"}),(0,l.jsx)(lu,{type:"ohlc_values"}),(0,l.jsx)(lu,{type:"ohlc_values_in_list"}),(0,l.jsxs)(lu,{type:"get_ohlc",children:[(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lg,{name:"CANDLEINDEX",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(lu,{type:"ohlc"})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Contract"),id:"contract_details",children:[(0,l.jsx)(lu,{type:"contract_check_result"}),(0,l.jsx)(lu,{type:"read_details"}),(0,l.jsx)(lu,{type:"sell_price"}),(0,l.jsx)(lu,{type:"check_sell"}),(0,l.jsx)(lu,{type:"payout"}),(0,l.jsx)(lu,{type:"ask_price"})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Stats"),id:"stats",children:[(0,l.jsx)(lu,{type:"balance"}),(0,l.jsx)(lu,{type:"total_profit"}),(0,l.jsx)(lu,{type:"total_runs"})]})]}),(0,l.jsxs)(lx,{id:"utility",name:(0,y.NC)("Utility"),children:[(0,l.jsx)(lx,{name:(0,y.NC)("Custom functions"),id:"custom_functions",dynamic:"PROCEDURE"}),(0,l.jsx)(lx,{name:(0,y.NC)("Variables"),id:"variables",dynamic:"VARIABLE"}),(0,l.jsxs)(lx,{name:(0,y.NC)("Notifications"),id:"notifications",children:[(0,l.jsx)(lu,{type:"text_print",children:(0,l.jsx)(lg,{name:"TEXT",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})}),(0,l.jsxs)(lu,{type:"text_prompt_ext",children:[(0,l.jsx)(lp,{name:"TYPE",children:"TEXT"}),(0,l.jsx)(lg,{name:"TEXT",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lg,{name:"MESSAGE",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(lu,{type:"notify_telegram",children:[(0,l.jsx)(lg,{name:"TELEGRAM_ACCESS_TOKEN",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT"})})}),(0,l.jsx)(lg,{name:"TELEGRAM_CHAT_ID",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT"})})}),(0,l.jsx)(lg,{name:"TELEGRAM_MESSAGE",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Time"),id:"time",children:[(0,l.jsx)(lu,{type:"epoch"}),(0,l.jsx)(lu,{type:"timeout"}),(0,l.jsx)(lu,{type:"tick_delay"}),(0,l.jsx)(lu,{type:"totimestamp",children:(0,l.jsx)(lg,{name:"DATETIME",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"yyyy-mm-dd hh:mm:ss"})})})}),(0,l.jsx)(lu,{type:"todatetime",children:(0,l.jsx)(lg,{name:"TIMESTAMP",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})})})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Math"),id:"math",children:[(0,l.jsx)(lu,{type:"math_number"}),(0,l.jsxs)(lu,{type:"math_arithmetic",children:[(0,l.jsx)(lp,{name:"OP",children:"ADD"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]}),(0,l.jsxs)(lu,{type:"math_single",children:[(0,l.jsx)(lp,{name:"OP",children:"ROOT"}),(0,l.jsx)(lg,{name:"NUM",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"9"})})})]}),(0,l.jsxs)(lu,{type:"math_trig",children:[(0,l.jsx)(lp,{name:"OP",children:"SIN"}),(0,l.jsx)(lg,{name:"NUM",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"45"})})})]}),(0,l.jsx)(lu,{type:"math_constant"}),(0,l.jsxs)(lu,{type:"math_number_property",children:[(0,l.jsx)(lj,{divisor_input:"false"}),(0,l.jsx)(lp,{name:"PROPERTY",children:"EVEN"}),(0,l.jsx)(lg,{name:"NUMBER_TO_CHECK",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})})]}),(0,l.jsxs)(lu,{type:"math_change",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"item"}),(0,l.jsx)(lg,{name:"DELTA",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]}),(0,l.jsx)(lu,{type:"math_on_list"}),(0,l.jsxs)(lu,{type:"math_round",children:[(0,l.jsx)(lp,{name:"OP",children:"ROUND"}),(0,l.jsx)(lg,{name:"NUM",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"3.1"})})})]}),(0,l.jsxs)(lu,{type:"math_modulo",children:[(0,l.jsx)(lg,{name:"DIVIDEND",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"64"})})}),(0,l.jsx)(lg,{name:"DIVISOR",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})]}),(0,l.jsxs)(lu,{type:"math_constrain",children:[(0,l.jsx)(lg,{name:"Value",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"50"})})}),(0,l.jsx)(lg,{name:"LOW",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})}),(0,l.jsx)(lg,{name:"HIGH",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"100"})})})]}),(0,l.jsxs)(lu,{type:"math_random_int",children:[(0,l.jsx)(lg,{name:"FROM",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})}),(0,l.jsx)(lg,{name:"TO",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"100"})})})]}),(0,l.jsx)(lu,{type:"math_random_float"})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Text"),id:"text",children:[(0,l.jsx)(lu,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})}),(0,l.jsxs)(lu,{type:"text_join",children:[(0,l.jsx)(lp,{name:"VARIABLE",variabletype:"",children:"text"}),(0,l.jsx)(ly,{name:"STACK",children:(0,l.jsx)(lu,{type:"text_statement",movable:"false",children:(0,l.jsx)(lg,{name:"TEXT",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})})})]}),(0,l.jsxs)(lu,{type:"text_append",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"text"}),(0,l.jsx)(lg,{name:"TEXT",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]}),(0,l.jsx)(lu,{type:"text_length",children:(0,l.jsx)(lg,{name:"Value",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})}),(0,l.jsx)(lu,{type:"text_isEmpty",children:(0,l.jsx)(lg,{name:"Value",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT"})})})}),(0,l.jsxs)(lu,{type:"text_indexOf",children:[(0,l.jsx)(lp,{name:"END",children:"FIRST"}),(0,l.jsx)(lg,{name:"Value",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"text"})})}),(0,l.jsx)(lg,{name:"FIND",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(lu,{type:"text_charAt",children:[(0,l.jsx)(lj,{at:"true"}),(0,l.jsx)(lp,{name:"WHERE",children:"FROM_START"}),(0,l.jsx)(lg,{name:"Value",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"item"})})}),(0,l.jsx)(lg,{name:"AT",children:(0,l.jsx)(lb,{type:"math_number_positive",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]}),(0,l.jsxs)(lu,{type:"text_getSubstring",children:[(0,l.jsx)(lj,{at1:"true",at2:"true"}),(0,l.jsx)(lp,{name:"WHERE1",children:"FROM_START"}),(0,l.jsx)(lp,{name:"WHERE2",children:"FROM_START"}),(0,l.jsx)(lg,{name:"STRING",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"text"})})}),(0,l.jsx)(lg,{name:"AT1",children:(0,l.jsx)(lb,{type:"math_number_positive",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})}),(0,l.jsx)(lg,{name:"AT2",children:(0,l.jsx)(lb,{type:"math_number_positive",children:(0,l.jsx)(lp,{name:"NUM",children:"2"})})})]}),(0,l.jsxs)(lu,{type:"text_changeCase",children:[(0,l.jsx)(lp,{name:"CASE",children:"UPPERCASE"}),(0,l.jsx)(lg,{name:"TEXT",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]}),(0,l.jsxs)(lu,{type:"text_trim",children:[(0,l.jsx)(lp,{name:"MODE",children:"BOTH"}),(0,l.jsx)(lg,{name:"TEXT",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Logic"),id:"logic",children:[(0,l.jsx)(lu,{type:"controls_if"}),(0,l.jsx)(lu,{type:"logic_compare"}),(0,l.jsx)(lu,{type:"logic_operation"}),(0,l.jsx)(lu,{type:"logic_negate"}),(0,l.jsx)(lu,{type:"logic_boolean"}),(0,l.jsx)(lu,{type:"logic_null"}),(0,l.jsx)(lu,{type:"logic_ternary"})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Lists"),id:"lists",children:[(0,l.jsxs)(lu,{type:"lists_create_with",children:[(0,l.jsx)(lp,{name:"VARIABLE",variabletype:"",children:"list"}),(0,l.jsx)(ly,{name:"STACK",children:(0,l.jsx)(lu,{type:"lists_statement",movable:"false",children:(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"lists_statement",movable:"false"})})})})]}),(0,l.jsx)(lu,{type:"lists_repeat",children:(0,l.jsx)(lg,{name:"NUM",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"5"})})})}),(0,l.jsx)(lu,{type:"lists_length"}),(0,l.jsx)(lu,{type:"lists_isEmpty"}),(0,l.jsx)(lu,{type:"lists_indexOf"}),(0,l.jsx)(lu,{type:"lists_getIndex"}),(0,l.jsx)(lu,{type:"lists_setIndex"}),(0,l.jsx)(lu,{type:"lists_getSublist"}),(0,l.jsxs)(lu,{type:"lists_split",children:[(0,l.jsx)(lj,{mode:"SPLIT"}),(0,l.jsx)(lp,{name:"MODE",children:"SPLIT"}),(0,l.jsx)(lg,{name:"DELIM",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:","})})})]}),(0,l.jsx)(lu,{type:"lists_sort"})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Loops"),id:"loops",children:[(0,l.jsx)(lu,{type:"controls_repeat"}),(0,l.jsx)(lu,{type:"controls_repeat_ext"}),(0,l.jsx)(lu,{type:"controls_whileUntil"}),(0,l.jsx)(lu,{type:"controls_for"}),(0,l.jsx)(lu,{type:"controls_forEach"}),(0,l.jsx)(lu,{type:"controls_flow_statements"})]}),(0,l.jsxs)(lx,{name:(0,y.NC)("Miscellaneous"),id:"misc",children:[(0,l.jsx)(lu,{type:"loader"}),(0,l.jsx)(lu,{type:"block_holder"}),(0,l.jsx)(lu,{type:"console",children:(0,l.jsx)(lg,{name:"MESSAGE",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})})]})]}),(0,l.jsxs)(lh,{id:"examples",children:[(0,l.jsx)(lm,{id:"sell_available",children:(0,l.jsx)(lu,{type:"during_purchase",children:(0,l.jsx)(ly,{name:"DURING_PURCHASE_STACK",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsx)(lu,{type:"check_sell"})}),(0,l.jsx)(ly,{name:"DO0",children:(0,l.jsx)(lu,{type:"sell_at_market"})})]})})})}),(0,l.jsx)(lm,{id:"trade_again",children:(0,l.jsx)(lu,{type:"after_purchase",children:(0,l.jsx)(ly,{name:"AFTERPURCHASE_STACK",children:(0,l.jsx)(lu,{type:"controls_if",children:(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"EQ"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"total_profit"})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"target_profit"})})})]})})})})})}),(0,l.jsx)(lm,{id:"sma_block_example",children:(0,l.jsxs)(lu,{type:"sma_statement",children:[(0,l.jsx)(lp,{name:"VARIABLE",variabletype:"",children:"sma"}),(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST",children:(0,l.jsxs)(lu,{type:"ohlc_values",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"})]})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})]})})]})}),(0,l.jsx)(lm,{id:"sma_array",children:(0,l.jsxs)(lu,{type:"smaa_statement",children:[(0,l.jsx)(lp,{name:"VARIABLE",variabletype:"",children:"smaa"}),(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsx)(lu,{type:"input_list",deletable:"false",movable:"false",children:(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})})})]})}),(0,l.jsx)(lm,{id:"sma_block_example_1",children:(0,l.jsxs)(lu,{type:"sma_statement",children:[(0,l.jsx)(lp,{name:"VARIABLE",variabletype:"",children:"sma"}),(0,l.jsx)(ly,{name:"STATEMENT",children:(0,l.jsxs)(lu,{type:"input_list",deletable:"false",movable:"false",children:[(0,l.jsx)(lg,{name:"INPUT_LIST",children:(0,l.jsx)(lu,{type:"ticks"})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"period",deletable:"false",movable:"false",children:(0,l.jsx)(lg,{name:"PERIOD",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})})})]})})]})}),(0,l.jsx)(lm,{id:"in_candle_list_read",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"op"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"read_ohlc",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lg,{name:"CANDLEINDEX",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]})})]})}),(0,l.jsx)(lm,{id:"read_candle_value",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"op"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"read_ohlc_obj",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lg,{name:"OHLCOBJ",children:(0,l.jsxs)(lu,{type:"read_ohlc",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lg,{name:"CANDLEINDEX",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]})})]})})]})}),(0,l.jsx)(lm,{id:"candle_list",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"candle_list"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"ohlc_values",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"})]})})]})}),(0,l.jsx)(lm,{id:"candle_list_1",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"cl"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"ohlc_values_in_list",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lg,{name:"OHLCLIST",children:(0,l.jsx)(lu,{type:"ohlc",children:(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"})})})]})})]})}),(0,l.jsx)(lm,{id:"get_candle",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"candle_open_price"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"read_ohlc_obj",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"epoch"}),(0,l.jsx)(lg,{name:"OHLCOBJ",children:(0,l.jsxs)(lu,{type:"get_ohlc",children:[(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lg,{name:"CANDLEINDEX",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"2"})})})]})})]})})]})}),(0,l.jsx)(lm,{id:"check_result",children:(0,l.jsx)(lu,{type:"after_purchase",children:(0,l.jsx)(ly,{name:"AFTERPURCHASE_STACK",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsx)(lu,{type:"contract_check_result",children:(0,l.jsx)(lp,{name:"CHECK_RESULT",children:"win"})})}),(0,l.jsx)(ly,{name:"DO0",children:(0,l.jsx)(lu,{type:"trade_again"})})]})})})}),(0,l.jsx)(lm,{id:"sell_pl",children:(0,l.jsx)(lu,{type:"during_purchase",children:(0,l.jsx)(ly,{name:"DURING_PURCHASE_STACK",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsx)(lu,{type:"check_sell"})}),(0,l.jsx)(ly,{name:"DO0",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"EQ"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"sell_price"})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"stake"})})})]})}),(0,l.jsx)(ly,{name:"DO0",children:(0,l.jsx)(lu,{type:"sell_at_market"})})]})})]})})})}),(0,l.jsx)(lm,{id:"if-return",children:(0,l.jsxs)(lu,{type:"procedures_defreturn",children:[(0,l.jsx)(lj,{children:(0,l.jsx)(l_,{name:"x"})}),(0,l.jsx)(lp,{name:"NAME",children:"do something"}),(0,l.jsx)(ly,{name:"STACK",children:(0,l.jsxs)(lu,{type:"procedures_ifreturn",children:[(0,l.jsx)(lj,{value:"1"}),(0,l.jsx)(lg,{name:"CONDITION",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"EQ"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})})]})}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"x must be positive or zero"})})})]})}),(0,l.jsx)(lg,{name:"RETURN",children:(0,l.jsxs)(lu,{type:"math_single",children:[(0,l.jsx)(lp,{name:"OP",children:"ROOT"}),(0,l.jsxs)(lg,{name:"NUM",children:[(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"9"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})]})]})})]})}),(0,l.jsx)(lm,{id:"notify_telegram",children:(0,l.jsxs)(lu,{type:"notify_telegram",children:[(0,l.jsxs)(lg,{name:"TELEGRAM_ACCESS_TOKEN",children:[(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"access_token"})})]}),(0,l.jsxs)(lg,{name:"TELEGRAM_CHAT_ID",children:[(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"chat_id"})})]}),(0,l.jsx)(lg,{name:"TELEGRAM_MESSAGE",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"Enjoy!"})})})]})}),(0,l.jsx)(lm,{id:"epoch",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"candle"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"read_ohlc",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"open"}),(0,l.jsx)(lp,{name:"CANDLEINTERVAL_LIST",children:"default"}),(0,l.jsx)(lg,{name:"CANDLEINDEX",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})})]})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"Open Time"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"read_ohlc_obj",children:[(0,l.jsx)(lp,{name:"OHLCFIELD_LIST",children:"epoch"}),(0,l.jsx)(lg,{name:"OHLCOBJ",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"candle"})})})]})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"Open Time"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsxs)(lu,{type:"math_arithmetic",children:[(0,l.jsx)(lp,{name:"OP",children:"MINUS"}),(0,l.jsxs)(lg,{name:"A",children:[(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})}),(0,l.jsx)(lu,{type:"epoch"})]}),(0,l.jsxs)(lg,{name:"B",children:[(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"Open Time"})})]})]})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"controls_if",children:(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"GTE"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"Time Since Candle Opened"})})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"30"})})})]})})})})]})})]})})]})}),(0,l.jsx)(lm,{id:"totimestamp",children:(0,l.jsx)(lu,{type:"before_purchase",children:(0,l.jsx)(ly,{name:"BEFOREPURCHASE_STACK",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"EQ"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"epoch"})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"totimestamp",children:(0,l.jsx)(lg,{name:"DATETIME",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"1957-08-31 00:00:00"})})})})})]})}),(0,l.jsx)(ly,{name:"DO0",children:(0,l.jsx)(lu,{type:"purchase",children:(0,l.jsx)(lp,{name:"PURCHASE_LIST",children:"CALL"})})})]})})})}),(0,l.jsx)(lm,{id:"todatetime",children:(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lp,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lg,{name:"MESSAGE",children:[(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})}),(0,l.jsx)(lu,{type:"todatetime",children:(0,l.jsxs)(lg,{name:"TIMESTAMP",children:[(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})}),(0,l.jsx)(lu,{type:"epoch"})]})})]})]})}),(0,l.jsx)(lm,{id:"constrain",children:(0,l.jsxs)(lu,{type:"math_constrain",children:[(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"5"})})}),(0,l.jsx)(lg,{name:"LOW",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})}),(0,l.jsx)(lg,{name:"HIGH",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"20"})})})]})}),(0,l.jsx)(lm,{id:"controls_if",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lj,{elseif:"1",else:"1"}),(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"EQ"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"var1"})})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"var2"})})})]})}),(0,l.jsx)(lg,{name:"IF1",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"EQ"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"var3"})})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"var4"})})})]})})]})}),(0,l.jsx)(lm,{id:"compare_logic",children:(0,l.jsx)(lu,{type:"logic_compare",children:(0,l.jsx)(lp,{name:"OP",children:"EQ"})})}),(0,l.jsx)(lm,{id:"compare_logic_1",children:(0,l.jsx)(lu,{type:"logic_operation",children:(0,l.jsx)(lp,{name:"OP",children:"AND"})})}),(0,l.jsx)(lm,{id:"repeat_while",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"controls_whileUntil",children:[(0,l.jsx)(lp,{name:"MODE",children:"WHILE"}),(0,l.jsx)(lg,{name:"BOOL",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"LTE"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})]})}),(0,l.jsx)(ly,{name:"DO",children:(0,l.jsxs)(lu,{type:"math_change",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lg,{name:"DELTA",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"1"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lp,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lg,{name:"MESSAGE",children:[(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})]})]})})]})})]})})]})}),(0,l.jsx)(lm,{id:"repeat_until",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"20"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"controls_whileUntil",children:[(0,l.jsx)(lp,{name:"MODE",children:"UNTIL"}),(0,l.jsx)(lg,{name:"BOOL",children:(0,l.jsxs)(lu,{type:"logic_compare",children:[(0,l.jsx)(lp,{name:"OP",children:"EQ"}),(0,l.jsx)(lg,{name:"A",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})}),(0,l.jsx)(lg,{name:"B",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})})]})}),(0,l.jsx)(ly,{name:"DO",children:(0,l.jsxs)(lu,{type:"math_change",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lg,{name:"DELTA",children:(0,l.jsx)(lb,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"-1"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lp,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lg,{name:"MESSAGE",children:[(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})]})]})})]})})]})})]})}),(0,l.jsx)(lm,{id:"controls_for",children:(0,l.jsxs)(lu,{type:"controls_for",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"i"}),(0,l.jsx)(lg,{name:"FROM",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"0"})})}),(0,l.jsx)(lg,{name:"TO",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"10"})})}),(0,l.jsx)(lg,{name:"BY",children:(0,l.jsx)(lu,{type:"math_number",children:(0,l.jsx)(lp,{name:"NUM",children:"2"})})}),(0,l.jsx)(ly,{name:"DO",children:(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lp,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lg,{name:"MESSAGE",children:[(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"i"})})]})]})})]})}),(0,l.jsx)(lm,{id:"controls_forEach",children:(0,l.jsxs)(lu,{type:"lists_create_with",children:[(0,l.jsx)(lp,{name:"VARIABLE",children:"list"}),(0,l.jsx)(ly,{name:"STACK",children:(0,l.jsxs)(lu,{type:"lists_statement",children:[(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"item1"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"lists_statement",children:[(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"item2"})})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"lists_statement",children:(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"item3"})})})})})]})})]})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"controls_forEach",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"i"}),(0,l.jsx)(lg,{name:"LIST",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"list"})})}),(0,l.jsx)(ly,{name:"DO",children:(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lp,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsxs)(lg,{name:"MESSAGE",children:[(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})}),(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"i"})})]})]})})]})})]})}),(0,l.jsx)(lm,{id:"break_out",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"logic_boolean",children:(0,l.jsx)(lp,{name:"BOOL",children:"TRUE"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"controls_repeat",children:[(0,l.jsx)(lp,{name:"TIMES",children:"10"}),(0,l.jsx)(ly,{name:"DO",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsx)(lu,{type:"logic_negate",children:(0,l.jsx)(lg,{name:"BOOL",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})})})}),(0,l.jsx)(ly,{name:"DO0",children:(0,l.jsx)(lu,{type:"controls_flow_statements",children:(0,l.jsx)(lp,{name:"FLOW",children:"BREAK"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lp,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsx)(lg,{name:"MESSAGE",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]})})]})})]})})]})}),(0,l.jsx)(lm,{id:"continue",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"logic_boolean",children:(0,l.jsx)(lp,{name:"BOOL",children:"FALSE"})})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"controls_repeat",children:[(0,l.jsx)(lp,{name:"TIMES",children:"10"}),(0,l.jsx)(ly,{name:"DO",children:(0,l.jsxs)(lu,{type:"controls_if",children:[(0,l.jsx)(lg,{name:"IF0",children:(0,l.jsx)(lu,{type:"logic_negate",children:(0,l.jsx)(lg,{name:"BOOL",children:(0,l.jsx)(lu,{type:"variables_get",children:(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"})})})})}),(0,l.jsx)(ly,{name:"DO0",children:(0,l.jsxs)(lu,{type:"variables_set",children:[(0,l.jsx)(lp,{name:"VAR",variabletype:"",children:"x"}),(0,l.jsx)(lg,{name:"VALUE",children:(0,l.jsx)(lu,{type:"logic_boolean",children:(0,l.jsx)(lp,{name:"BOOL",children:"TRUE"})})}),(0,l.jsx)(lv,{children:(0,l.jsx)(lu,{type:"controls_flow_statements",children:(0,l.jsx)(lp,{name:"FLOW",children:"CONTINUE"})})})]})}),(0,l.jsx)(lv,{children:(0,l.jsxs)(lu,{type:"notify",children:[(0,l.jsx)(lp,{name:"NOTIFICATION_TYPE",children:"success"}),(0,l.jsx)(lp,{name:"NOTIFICATION_SOUND",children:"silent"}),(0,l.jsx)(lg,{name:"MESSAGE",children:(0,l.jsx)(lb,{type:"text",children:(0,l.jsx)(lp,{name:"TEXT",children:"abc"})})})]})})]})})]})})]})})]})]})),lC=(0,r.Pi)(()=>{let{isDesktop:e}=(0,g.F)(),{toolbox:t,flyout:a,quick_strategy:s}=(0,h.oR)(),{hasSubCategory:n,is_search_loading:r,onMount:o,onSearch:d,onSearchBlur:c,onSearchClear:_,onSearchKeyUp:u,onToolboxItemClick:x,onToolboxItemExpand:m,onUnmount:p,sub_category_index:j,toolbox_dom:v}=t,{setFormVisibility:b}=s,{setVisibility:f,selected_category:N}=a,C=i.useRef(lN()),[k,w]=i.useState(!0);return(i.useEffect(()=>(o(C),()=>p()),[]),e)?(0,l.jsxs)("div",{className:"db-toolbox","data-testid":"dashboard__toolbox",children:[(0,l.jsx)(n1,{popover_message:(0,y.NC)("Click here to start building your Deriv Bot."),button_id:"db-toolbar__get-started-button",button_classname:"toolbar__btn toolbar__btn--icon toolbar__btn--start",buttonOnClick:()=>{b(!0),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"bot_builder",subform_name:"quick_strategy"})},button_text:(0,y.NC)("Quick strategy")}),(0,l.jsxs)("div",{id:"gtm-toolbox",className:"db-toolbox__content",children:[(0,l.jsx)("div",{className:"db-toolbox__header",children:(0,l.jsxs)("div",{className:"db-toolbox__title","data-testid":"db-toolbox__title",onClick:()=>{w(!k),f(!1)},children:[(0,y.NC)("Blocks menu"),(0,l.jsx)("span",{className:M()("db-toolbox__title__chevron",{"db-toolbox__title__chevron--active":k}),children:(0,l.jsx)(ll.Z,{fill:"var(--text-general)"})})]})}),(0,l.jsxs)("div",{className:M()("db-toolbox__content-wrapper",{active:k}),"data-testid":"db-toolbox__content-wrapper",children:[(0,l.jsx)(ld,{is_search_loading:r,onSearch:d,onSearchBlur:c,onSearchClear:_,onSearchKeyUp:u}),(0,l.jsx)("div",{className:"db-toolbox__category-menu",children:v&&Array.from(v.childNodes).map((e,t)=>{if("CATEGORY"===e.tagName.toUpperCase()){let a=n(e.children),s=j.includes(t);return(0,l.jsxs)("div",{className:M()("db-toolbox__row",{"db-toolbox__row--active":(null==N?void 0:N.getAttribute("id"))===(null==e?void 0:e.id)}),children:[(0,l.jsx)("div",{className:"db-toolbox__item",onClick:()=>{a?m(t):x(e)},children:(0,l.jsxs)("div",{className:"db-toolbox__category-text",children:[(0,l.jsx)("div",{className:"db-toolbox__label",children:(0,y.NC)(e.getAttribute("name"))}),a&&(0,l.jsx)("div",{className:M()("db-toolbox__category-arrow",{"db-toolbox__category-arrow--active":s}),children:(0,l.jsx)(ll.Z,{fill:"var(--text-general)"})})]})}),a&&s&&Array.from(e.childNodes).map(e=>(0,l.jsx)("div",{className:M()("db-toolbox__sub-category-row",{"db-toolbox__sub-category-row--active":(null==N?void 0:N.getAttribute("id"))===(null==e?void 0:e.id)}),onClick:()=>{x(e)},children:(0,l.jsx)(V.Z,{size:"xxs",children:e.getAttribute("name")})},`db-toolbox__sub-category-row--${e.getAttribute("id")}`))]},`db-toolbox__row--${e.getAttribute("id")}`)}return null})})]})]})]}):null}),lk=(0,r.Pi)(()=>{var e;let{blockly_store:t}=(0,h.oR)(),{onMount:a,onUnmount:s,is_loading:n}=t;return(i.useEffect(()=>(a(),()=>{s()}),[]),n)?null:(null===(e=window.Blockly)||void 0===e?void 0:e.derivWorkspace)?(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)(lC,{}),(0,l.jsx)(ln,{}),(0,l.jsx)(nJ,{}),(0,l.jsx)(n0,{})]}):null}),lw=(0,r.Pi)(()=>{let{dashboard:e,app:t,run_panel:a,toolbar:s,quick_strategy:n,blockly_store:r}=(0,h.oR)(),{active_tab:o,active_tour:d,is_preview_on_popup:c}=e,{is_open:_}=n,{is_running:u}=a,{is_loading:x}=r,m=i.useRef(!1),p=i.useRef(!1),{isDesktop:j}=(0,g.F)(),{onMount:v,onUnmount:b}=t,f=i.useRef(null),N=null;i.useEffect(()=>(v(),()=>b()),[v,b]),i.useEffect(()=>{var e;let t=null===(e=window.Blockly)||void 0===e?void 0:e.derivWorkspace;return t&&u&&!m.current?(m.current=!0,t.addChangeListener(C)):k(),()=>{t&&m.current&&k()}},[u]);let C=e=>{let{is_reset_button_clicked:t}=s;"selected"===e.type||t?t&&k():((0,aY.J)((0,aK.xG)().workspace_change),k())},k=()=>{var e,t;m.current=!1,null===(t=window.Blockly)||void 0===t||null===(e=t.derivWorkspace)||void 0===e||e.removeChangeListener(C)};i.useEffect(()=>{var e;let t=null===(e=window.Blockly)||void 0===e?void 0:e.derivWorkspace;t&&!p.current&&(p.current=!0,t.addChangeListener(w))},[x]);let w=e=>{let{is_reset_button_clicked:t,setResetButtonState:a}=s;if("undo"===e.type){N=null;return}"delete"===e.type&&!t&&(N=e.blockId),"selected"===e.type&&N===e.oldElementId&&(T(),N=null),"change"===e.type&&"AMOUNT_LIMITS"===e.name&&"(min: 0.35 - max: 50000)"===e.newValue&&t&&a(!1)},T=()=>{(0,aY.J)((0,aK.xG)().block_delete,{label:(0,y.NC)("Undo"),onClick:e=>{window.Blockly.derivWorkspace.undo(),null==e||e()}})};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:M()("bot-builder",{"bot-builder--active":1===o&&!c,"bot-builder--inactive":c,"bot-builder--tour-active":d}),children:(0,l.jsx)("div",{id:"scratch_div",ref:f,children:(0,l.jsx)(lk,{})})}),1===o&&(0,l.jsx)(sP,{is_mobile:!j}),(0,l.jsx)(sc,{}),(0,l.jsx)(sh,{}),_&&(0,l.jsx)(nF,{})]})});var lT=a("89250"),lE=a("46883");let lS=()=>(0,l.jsx)("iframe",{id:"trading-view-iframe",style:{width:"100%",height:"100%",backgroundColor:"white"},src:"https://charts.deriv.com/deriv?hide-signup=true"}),lA=(0,r.Pi)(()=>{let{dashboard:e}=(0,h.oR)(),{is_trading_view_modal_visible:t,setTradingViewModalVisibility:a}=e;return(0,l.jsx)(i.Fragment,{children:t&&(0,l.jsx)(R,{boundary:".main",header:(0,y.NC)("TradingView Chart"),onClose:a,modalWidth:526,modalHeight:595,minWidth:526,minHeight:524,enableResizing:!0,children:(0,l.jsx)("div",{style:{height:"calc(100% - 6rem)",padding:"0.5rem"},children:(0,l.jsx)(lS,{})})})})});var lI=a("73981"),lR=a("76953"),lO=a("47376"),lM=a("68217");let lL=(0,r.Pi)(()=>{let{dashboard:e}=(0,h.oR)(),{is_chart_modal_visible:t,setChartModalVisibility:a}=e;return(0,l.jsx)(i.Fragment,{children:t&&(0,l.jsx)(R,{boundary:".main",header:(0,y.NC)("Chart"),onClose:a,modalWidth:526,modalHeight:595,minWidth:526,minHeight:524,enableResizing:!0,children:(0,l.jsx)("div",{className:"chart-modal-dialog","data-testid":"chart-modal-dialog",children:(0,l.jsx)(lM.default,{show_digits_stats:!1})})})})}),lD=(0,r.Pi)(()=>{let{isDesktop:e}=(0,g.F)();return(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(d.a,{}),children:e&&(0,l.jsx)(lL,{})})}),lU=(0,r.Pi)(()=>{let{dashboard:e}=(0,h.oR)(),{active_tab:t,active_tour:a,setActiveTour:s,setTourDialogVisibility:n}=e,{is_close_tour:r,is_finished:o,handleJoyrideCallback:d,setIsCloseTour:c}=sD();return i.useEffect(()=>{(r||o)&&(c(!1),s(""))},[r,o,s,c]),!(0,sp.$8)("onboard_tour_token")&&0===t&&n(!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(sL,{}),a&&(0,l.jsx)(sb,{handleCallback:d,steps:sw,spotlightClicks:!0,disableCloseOnEsc:!0,disableOverlay:!1,disableOverlayClose:!0})]})}),lF={content:[],header:"",img:"",tour_step_key:1},lZ=(0,r.Pi)(()=>{let{dashboard:e}=(0,h.oR)(),{onCloseTour:t,onTourEnd:a,setTourActiveStep:s,active_tour:n,active_tab:r,setActiveTour:o}=e,[d,c]=i.useState(1),[_,u]=i.useState(lF),{content:x,header:m,img:p,media:j,tour_step_key:v}=_,b=1===d?(0,y.NC)("Start"):(0,y.NC)("Next"),g=8===d?(0,y.NC)("Got it, thanks!"):b,f="onboarding"===n;return(i.useEffect(()=>{sS.forEach(e=>{e.tour_step_key===d&&u(e),s(d)})},[d]),i.useEffect(()=>{(0,sp.$8)("onboard_tour_token")||0!==r||o("onboarding")},[r,n]),n)?(0,l.jsxs)("div",{className:M()("dbot-slider",{"dbot-slider--active":1===d,"dbot-slider--tour-position":1!==d}),"data-testid":"onboarding-tour-mobile",children:[1!==v&&(0,l.jsxs)("div",{className:"dbot-slider__navbar",children:[(0,l.jsx)(V.Z,{color:"less-prominent",weight:"less-prominent",lineHeight:"s",size:"xxs","data-testid":"dbot-onboard-slider__navbar",children:`${v-1}/7`}),(0,l.jsx)("span",{onClick:t,children:(0,l.jsx)(w.Z,{height:"20px",width:"20px","data-testid":"exit-onboard-tour",className:"db-contract-card__result-icon",color:"secondary"})})]}),m&&(0,l.jsx)(V.Z,{color:"prominent",weight:"bold",align:"center",className:"dbot-slider__title",as:"span",lineHeight:"s",size:"xs",children:(0,y.NC)(m)}),j&&(0,l.jsx)("div",{className:"dbot-slider__media",children:(0,l.jsx)("video",{autoPlay:!0,loop:!0,controls:!0,preload:"auto",playsInline:!0,disablePictureInPicture:!0,controlsList:"nodownload",src:j})}),p&&(0,l.jsx)("div",{className:"dbot-slider__image",children:(0,l.jsx)("img",{src:p})}),x&&(0,l.jsx)(l.Fragment,{children:x.map(e=>(0,l.jsx)(V.Z,{align:"center",color:"prominent",className:"dbot-slider__content",as:"div",lineHeight:"s",size:"xxs",children:e},e))}),(0,l.jsxs)("div",{className:"dbot-slider__status",children:[(0,l.jsx)("div",{className:"dbot-slider__progress-bar",children:(0,l.jsx)(sF,{step:d,steps_list:sS.map(e=>e.tour_step_key.toString()),onStepChange:c})}),(0,l.jsxs)("div",{className:"dbot-slider__button-group",children:[1===d&&(0,l.jsx)(sZ,{onClick:()=>{t()},label:(0,y.NC)("Skip"),"data-testid":"skip-onboard-tour"}),![1,2,8].includes(d)&&(0,l.jsx)(sZ,{onClick:()=>{c(d-1)},label:(0,y.NC)("Previous"),"data-testid":"prev-onboard-tour"}),(0,l.jsx)(sZ,{type:"danger",onClick:()=>{c(d+1),a(d,f)},label:g,"data-testid":8===v?"finish-onboard-tour":"next-onboard-tour"})]})]})]}):null}),lz=(0,r.Pi)(e=>{let{is_mobile:t}=e;return(0,l.jsx)(l.Fragment,{children:t?(0,l.jsx)(lZ,{}):(0,l.jsx)(lU,{})})});var lP=a("58995"),lB=a("44448");let lX=e=>{let{dashboard_click_name:t,subpage_name:a}=e;aA.Analytics.trackEvent("ce_bot_form",{action:aJ.om.DASHBOARD_CLICK,form_name:aJ.oH,subpage_name:a,dashboard_click_name:t})},l$=e=>{let{announcement_name:t}=e;aA.Analytics.trackEvent("ce_bot_form",{action:aJ.om.ANNOUNCEMENT_CLICK,form_name:aJ.oH,subform_name:"announcements",subform_source:"dashboard",announcement_name:t})},lH=e=>{let{announcement_name:t,announcement_action:a}=e;aA.Analytics.trackEvent("ce_bot_form",{action:aJ.om.ANNOUNCEMENT_ACTION,form_name:aJ.oH,subform_name:"announcements",subform_source:"dashboard",announcement_name:t,announcement_action:a})};var lV=a("64376");let lq=e=>{let{children:t,text_size:a,className:s}=e;return(0,l.jsx)("button",{type:"button",className:(0,nn.Z)("open-livechat__link",s),onClick:()=>window.LC_API.open_chat_window(),children:(0,l.jsx)(V.Z,{size:a||"xs",weight:"bold",color:"brand-red-coral",children:t||(0,l.jsx)(y.Xx,{i18n_default_text:"live chat"})})})};var lG=a("69557");let lY=e=>{let{announce:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lG.Z,{fill:"var(--text-info-blue)",width:"24",height:"26"}),t&&(0,l.jsx)("div",{className:"notification__icon--indicator"})]})},lK=e=>{let{title:t,announce:a}=e;return(0,l.jsx)(V.Z,{size:"xs",line_height:"l",weight:a?"bold":"normal",styles:a?{}:{color:"var(--text-general)"},children:t})},lW=e=>{let{message:t,date:a,announce:s}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(V.Z,{size:"xs",line_height:"m",weight:s?"normal":"lighter",styles:s?{}:{color:"var(--text-general)"},children:t}),(0,l.jsx)(V.Z,{size:"xxs",line_height:"xl",styles:{color:"var(--text-primary)"},children:a})]})},lJ=e=>{let{announce_id:t}=e;switch(t){case"MOVING_STRATEGIES_ANNOUNCE":return(0,l.jsx)(tf.J,{icon:"IcMigrateStrategy",className:"category-type",style:{height:100,width:140}});case"BLOCKLY_ANNOUNCE":return(0,l.jsx)(tf.J,{icon:"IcUpgradeBlockly",className:"category-type",style:{height:120,width:120}});case"ACCUMULATOR_ANNOUNCE":return(0,l.jsx)(tf.J,{icon:"IcTradetypeAccu",className:"category-type",style:{height:80,width:80}});default:return null}},lQ={UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE:{announcement:{id:"UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE",main_title:(0,y.NC)("Updates: Quick strategy modal"),confirm_button_text:(0,y.NC)("Explore now"),base_classname:"announcement-dialog",media:[(0,u.MT8)("assets/images/dbot-new-look-QS-and-accumulators-addition.gif")],title:[(0,l.jsx)(V.Z,{as:"div",align:"left",size:"xs",className:"announcement-dialog__title",children:(0,l.jsx)(y.Xx,{i18n_default_text:"We've improved the Quick strategy (QS) modal for a better trading experience."})},0),(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Whats new:</0>",components:[(0,l.jsx)("div",{},0)]},1)],unordered_list:[{id:0,text:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>A revamped design</0> for improved functionality.",components:[(0,l.jsx)("strong",{},0)]})},{id:1,text:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Support for multiple trade types </0> with a filter to find strategies by preference.",components:[(0,l.jsx)("strong",{},0)]})},{id:2,text:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Integration of Accumulators Options</0> for direct strategy application within the QS modal.",components:[(0,l.jsx)("strong",{},0)]})}]},should_not_be_cancel:!0,switch_tab_on_confirm:tK.ve.BOT_BUILDER,should_toggle_qs_modal:!0},MOVING_STRATEGIES_ANNOUNCE:{announcement:{id:"MOVING_STRATEGIES_ANNOUNCE",main_title:(0,y.NC)("Moving strategies to Deriv Bot"),confirm_button_text:(0,y.NC)("Import strategy"),base_classname:"announcement-dialog",title:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Follow these steps to smoothly transfer your strategies:</0>",components:[(0,l.jsx)("strong",{},0)]}),numbered_content:[{id:0,text:(0,y.NC)("Download your strategy in XML format and import it to Deriv Bot.")},{id:1,text:(0,y.NC)("Run your updated strategy to check its performance.")},{id:2,text:(0,y.NC)("Save the updated strategy for quicker re-imports.")}],plain_text:[{id:0,text:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Note</0>: Uploading complex strategies may take some time. Saving them from Deriv Bot ensures quicker access later. If you have questions, contact us via <1/>.",components:[(0,l.jsx)("strong",{},0),(0,l.jsx)(lq,{className:""},1)]})}]},should_not_be_cancel:!0,should_toggle_load_modal:!0,switch_tab_on_confirm:tK.ve.BOT_BUILDER,onConfirm:()=>{(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"announcements",subform_name:"load_strategy",load_strategy_tab:"recent"})}},BLOCKLY_ANNOUNCE:{announcement:{id:"BLOCKLY_ANNOUNCE",main_title:(0,y.NC)("Google Blockly v10 update"),base_classname:"announcement-dialog",title:(0,l.jsx)(y.Xx,{i18n_default_text:"We have updated our Blockly system in Deriv Bot from <0>version 3 to version 10</0>. This brings:",components:[(0,l.jsx)("strong",{},0)]}),numbered_content:[{id:0,text:(0,y.NC)("Better security.")},{id:1,text:(0,y.NC)("Faster performance.")},{id:2,text:(0,y.NC)("New features for developers.")}],plain_text:[{id:0,text:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Note</0>: Some complex strategies might face issues in the Bot Builder. If you have questions, contact us via <1/>.",components:[(0,l.jsx)("strong",{},0),(0,l.jsx)(lq,{className:""},1)]})}]},should_not_be_cancel:!0},ACCUMULATOR_ANNOUNCE:{announcement:{id:"ACCUMULATOR_ANNOUNCE",main_title:(0,y.NC)("Accumulators now on Deriv Bot"),confirm_button_text:(0,y.NC)("Try now"),cancel_button_text:(0,y.NC)("Learn more"),base_classname:"announcement-dialog",title:(0,l.jsx)(y.Xx,{i18n_default_text:"<0>Boost your trading strategy with Accumulators</0>",components:[(0,l.jsx)("strong",{},0)]}),content:[{id:0,text:(0,y.NC)("Trade Accumulators to build up potential profits with a structured approach.")},{id:1,text:(0,y.NC)("Customise your investment period and price levels to fit your trading goals.")},{id:2,text:(0,y.NC)("Manage risks while capitalising on market opportunities.")}]},switch_tab_on_cancel:tK.ve.TUTORIAL,switch_tab_on_confirm:tK.ve.BOT_BUILDER,onConfirm:()=>l3()}},l0={MODAL_BUTTON_ACTION:"modal_button_action",REDIRECT_BUTTON_ACTION:"redirect_button_action"},l1=[{id:"UPDATES_QUICK_STRATEGY_MODAL_ANNOUNCE",icon:lY,title:(0,y.NC)("Updated: Quick Strategy Modal"),message:(0,y.NC)("We've improved the Quick strategy (QS) modal for a better trading experience."),date:"18 November 2024 00:00 UTC",buttonAction:l0.MODAL_BUTTON_ACTION,actionText:""},{id:"MOVING_STRATEGIES_ANNOUNCE",icon:lY,title:(0,y.NC)("Moving strategies to Deriv Bot"),message:(0,y.NC)("Follow these steps to smoothly transfer your strategies"),date:"1 August 2024 00:00 UTC",buttonAction:l0.MODAL_BUTTON_ACTION,actionText:""},{id:"BLOCKLY_ANNOUNCE",icon:lY,title:(0,y.NC)("Google Blockly v10 update"),message:(0,y.NC)("We have updated our Blockly system in Deriv Bot from version 3 to version 10."),date:"24 July 2024 00:00 UTC",buttonAction:l0.MODAL_BUTTON_ACTION,actionText:""},{id:"ACCUMULATOR_ANNOUNCE",icon:lY,title:(0,y.NC)("Accumulators is now on Deriv Bot"),message:(0,y.NC)("Boost your trading strategy with Accumulators."),date:"2 July 2024 00:00 UTC",buttonAction:l0.MODAL_BUTTON_ACTION,actionText:""}],l3=()=>{Promise.resolve().then(a.bind(a,56505)).then(e=>{let t=Blockly.utils.xml.textToDom(e.default);((e,a)=>{let s=`${e.toUpperCase()}_LIST`,n=null==t?void 0:t.querySelectorAll(`field[name="${s}"]`);null==n||n.forEach(e=>{e.textContent=a})})("tradetypecat","accumulator");let{derivWorkspace:a}=Blockly;(0,U.load)({block_string:Blockly.Xml.domToText(t),file_name:"Strategy with accumulator trade type",workspace:a,from:U.save_types.UNSAVED,drop_event:null,strategy_id:null,showIncompatibleStrategyDialog:null})}).catch(e=>{console.error("Failed to load strategy XML:",e)})},l8=(e,t,a)=>{switch(e.buttonAction){case l0.MODAL_BUTTON_ACTION:return t(e.id,lQ[e.id]);case l0.REDIRECT_BUTTON_ACTION:{let t=lQ[e.id].url_redirect;if(t)return a(t);return!1}default:return!1}},l5=e=>{let{announcement:t,handleOnConfirm:a,handleOnCancel:s,is_announce_dialog_open:n,setIsAnnounceDialogOpen:i,is_tablet:r}=e,{id:o,main_title:d,confirm_button_text:c,cancel_button_text:_,base_classname:u,title:x,content:m,numbered_content:h,plain_text:p,unordered_list:j,media:v}=t;return(0,l.jsx)(aq.Z,{portal_element_id:"modal_root",title:d,is_visible:n,confirm_button_text:c,onConfirm:a,cancel_button_text:_,onCancel:s,is_mobile_full_width:!0,has_close_icon:!0,onClose:()=>{i(!1),(0,tQ._W)({subform_name:"announcements",announcement_name:d})},className:r?`${u} ${u}--tablet`:u,children:(0,l.jsxs)("div",{className:`${u}__body-text`,children:[(0,l.jsx)("div",{className:`${u}__body-icon--${o.toLowerCase()}`,children:(0,l.jsx)(lJ,{announce_id:o})}),Array.isArray(v)&&(0,l.jsx)(l.Fragment,{children:v.map((e,t)=>(0,l.jsx)("img",{className:`${u}__image`,src:e,alt:e},t))}),(0,l.jsxs)("div",{className:`${u}__body-main-content`,children:[(0,l.jsx)(V.Z,{as:"p",size:"xs",className:`${u}__title--${o.toLowerCase()}`,children:x}),Array.isArray(m)&&m.map(e=>(0,l.jsxs)("div",{className:`${u}__body-item`,children:[(0,l.jsx)("div",{children:(0,l.jsx)(eg.Z,{fill:"var(--icon-black-plus)"})}),(0,l.jsx)(V.Z,{as:"p",lineHeight:"l",size:"xs",children:null==e?void 0:e.text})]},null==e?void 0:e.id)),Array.isArray(j)&&(0,l.jsx)("ul",{className:`${u}__unordered_list`,children:j.map(e=>(0,l.jsx)("li",{children:(0,l.jsx)(V.Z,{as:"div",lineHeight:"l",size:"xs",children:null==e?void 0:e.text})},null==e?void 0:e.id))},0),Array.isArray(h)&&(0,l.jsx)("ol",{className:`${u}__body-item--numbered`,children:h.map(e=>(0,l.jsx)(V.Z,{as:"li",lineHeight:"xl",size:"xs",styles:{listStyle:"auto"},children:null==e?void 0:e.text},null==e?void 0:e.id))}),Array.isArray(p)&&(0,l.jsx)("div",{children:p.map(e=>(0,l.jsx)("span",{children:(0,l.jsx)(V.Z,{lineHeight:"m",size:"xs",styles:{listStyle:"auto"},children:e.text},e.id)},null==e?void 0:e.id))})]})]})})},l7=(0,r.Pi)(e=>{let{is_mobile:t,is_tablet:a,handleTabChange:s}=e,{load_modal:{toggleLoadModal:n},dashboard:{showVideoDialog:r},quick_strategy:{setFormVisibility:o}}=(0,h.oR)(),[d,c]=i.useState(!1),[_,u]=i.useState(!1),[x,m]=i.useState(null),[p,j]=i.useState({}),[v,b]=i.useState(0),g=(0,lT.s0)(),[f,N]=i.useState([]),C="announcements__label",k=e=>{var t;null===(t=localStorage)||void 0===t||t.setItem("bot-announcements",JSON.stringify(e))},w=e=>{let t=null;k({...t=JSON.parse(localStorage.getItem("bot-announcements")??"{}"),[e]:!1}),j(S())},T=(e,t)=>()=>{m(t),c(!0),u(e=>!e),l$({announcement_name:t.announcement.main_title}),w(e)},E=e=>()=>{g&&g(e)},S=()=>{let e=null;e=JSON.parse(localStorage.getItem("bot-announcements")??"{}");let t=[],a={};return l1.map(s=>{let n=!0;e&&Object.hasOwn(e,s.id)&&(n=e[s.id]),t.push({id:s.id,icon:(0,l.jsx)(s.icon,{announce:n}),title:(0,l.jsx)(lK,{title:s.title,announce:n}),message:(0,l.jsx)(lW,{message:s.message,date:s.date,announce:n}),buttonAction:l8(s,T,E),actionText:s.actionText}),a[s.id]=n}),N(t),a};i.useEffect(()=>{let e=S();k(e),j(e)},[]),i.useEffect(()=>{b(Object.values(p).filter(e=>e).length)},[p]);let A=()=>{let e=(0,lV.zw)().find(e=>4===e.id);e&&r({url:e.url,type:"url"})};return(0,l.jsxs)("div",{className:"announcements",children:[(0,l.jsxs)("button",{className:"announcements__button",onClick:()=>{u(e=>!e),!_&&(0,tQ.m5)({subform_name:"announcements",subform_source:"dashboard"})},"data-testid":"btn-announcements",children:[(0,l.jsx)(lP.Z,{fill:"var(--icon-black-plus)",iconSize:"sm"}),!t&&(0,l.jsx)(V.Z,{size:"xs",line_height:"s",className:C,children:(0,y.NC)("Announcements")}),0!==v&&(0,l.jsx)("div",{className:"announcements__amount",children:(0,l.jsx)("p",{"data-testid":"announcements__amount",children:v})})]}),(0,l.jsx)("div",{className:"notifications__wrapper",children:(0,l.jsx)(lB.T,{className:M()("",{"notifications__wrapper--mobile":t,"notifications__wrapper--desktop":!t,"notifications__wrapper--tablet":a}),clearNotificationsCallback:()=>{k(Object.fromEntries(Object.keys(p).map(e=>[e,!1]))),j(S())},componentConfig:{clearButtonText:(0,y.NC)("Mark all as read"),modalTitle:(0,y.NC)("Announcements"),noNotificationsMessage:"",noNotificationsTitle:""},isOpen:_,setIsOpen:u,notifications:f,excludedClickOutsideClass:C,...t&&{appElement:document.getElementById("modal_root")}})}),(null==x?void 0:x.announcement)&&(0,l.jsx)(l5,{announcement:x.announcement,is_announce_dialog_open:d,setIsAnnounceDialogOpen:c,handleOnCancel:(null==x?void 0:x.should_not_be_cancel)?null:()=>{var e;lH({announcement_name:null==x?void 0:x.announcement.main_title,announcement_action:null==x?void 0:x.announcement.cancel_button_text}),(null==x?void 0:x.switch_tab_on_cancel)&&(s(x.switch_tab_on_cancel),"ACCUMULATOR_ANNOUNCE"===x.announcement.id&&A()),null==x||null===(e=x.onCancel)||void 0===e||e.call(x),m(null)},handleOnConfirm:()=>{var e;lH({announcement_name:null==x?void 0:x.announcement.main_title,announcement_action:null==x?void 0:x.announcement.confirm_button_text}),(null==x?void 0:x.switch_tab_on_confirm)&&s(x.switch_tab_on_confirm),(null==x?void 0:x.should_toggle_qs_modal)&&o(!0),(null==x?void 0:x.should_toggle_load_modal)&&n(),null==x||null===(e=x.onConfirm)||void 0===e||e.call(x),m(null)},is_tablet:a})]})});var l2=a("21317"),l4=a("96475"),l9=a("69483"),l6=a.n(l9),ie=a("26961"),it=a.n(ie);let ia=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,h.oR)(),{is_delete_modal_open:a,onToggleDeleteDialog:s,selected_strategy_id:n,setDashboardStrategies:i,loadStrategyToBuilder:r,refreshStrategiesTheme:o,resetBotBuilderStrategy:d}=e,{setOpenSettings:c}=t,_=async(e,t)=>{t.length?(n===e&&await r(null==t?void 0:t[0]),await o()):d()},u=async e=>{let t=(await (0,U.getSavedWorkspaces)()).filter(t=>t.id!==e);i(t),l6().setItem("saved_workspaces",it().compress(JSON.stringify(t))),await _(e,t),s(!1)};return(0,l.jsx)("div",{children:(0,l.jsxs)(aq.Z,{title:(0,y.NC)("Delete bot"),is_visible:a,confirm_button_text:(0,y.NC)("Yes, delete"),onConfirm:()=>{u(n),s(!1),c(aK.tx.BOT_DELETE)},cancel_button_text:(0,y.NC)("No"),onCancel:()=>{s(!1)},is_mobile_full_width:!1,className:"dc-dialog__delete-strategy--delete",has_close_icon:!0,children:[(0,l.jsx)("div",{children:(0,l.jsxs)(V.Z,{color:"prominent",lineHeight:"s",size:"xs",children:[(0,y.NC)("Your bot will be permanently deleted when you hit "),(0,l.jsx)("strong",{children:(0,y.NC)("Yes, delete.")})]})}),(0,l.jsx)("div",{children:(0,l.jsx)(V.Z,{color:"prominent",lineHeight:"xl",size:"xs",children:(0,y.NC)("Are you sure you want to delete it?")})})]})})}),is=e=>{let[t,a]=i.useState(!1),s=e=>{"ESCAPE"===e.key.toUpperCase()&&a(!1)},n=t=>{var s;!(null==e?void 0:null===(s=e.current)||void 0===s?void 0:s.contains(t.target))&&a(!1)};return i.useEffect(()=>(document.addEventListener("keydown",s,!0),document.addEventListener("click",n,!0),()=>{document.removeEventListener("keydown",s,!0),document.removeEventListener("click",n,!0)}),[]),{is_dropdown_visible:t,setDropdownVisibility:a}};var il=a("85127"),ii=a("37575"),ir=a("42754"),io=a("33571");let id={OPEN:"open",SAVE:"save",DELETE:"delete",INIT:"init"},ic=[{type:id.OPEN,icon:(0,l.jsx)(il.Z,{fill:"var(--text-general)"}),label:(0,l.jsx)(y.Xx,{i18n_default_text:"Open"})},{type:id.SAVE,icon:(0,l.jsx)(ir.Z,{fill:"var(--text-general)",className:"icon-general-fill-path",iconSize:"xs",path:"",opacity:.8}),label:(0,l.jsx)(y.Xx,{i18n_default_text:"Save"})},{type:id.DELETE,icon:(0,l.jsx)(ii.Z,{fill:"var(--text-general)"}),label:(0,l.jsx)(y.Xx,{i18n_default_text:"Delete"})}],i_=(0,r.Pi)(e=>{let{workspace:t,index:a}=e,{dashboard:s,load_modal:n,save_modal:r}=(0,h.oR)(),{setActiveTab:o}=s,{toggleSaveModal:d,updateBotName:c}=r,{dashboard_strategies:_=[],getSaveType:u,getSelectedStrategyID:x,loadFileFromRecent:m,onToggleDeleteDialog:p,previewed_strategy_id:j,selected_strategy_id:v,setSelectedStrategyId:b}=n,y=i.useRef(null),f=i.useRef(null),N=i.useRef(!1),{setDropdownVisibility:C,is_dropdown_visible:k}=is(f),{isDesktop:w}=(0,g.F)();i.useEffect(()=>{let e;return(null==_?void 0:_.length)&&0===a&&!N.current&&(e=setTimeout(()=>{var e;N.current=!0,null==y||null===(e=y.current)||void 0===e||e.click()},50)),()=>{e&&clearTimeout(e)}},[_,a]);let T=async()=>{await m(),o(tK.ve.BOT_BUILDER),lX({dashboard_click_name:"open",subpage_name:"bot_builder"})},E=()=>{c(null==t?void 0:t.name),d(),lX({dashboard_click_name:"save",subpage_name:"dashboard"})},S=async e=>{switch(b(t.id),e){case id.OPEN:await T();break;case id.SAVE:E();break;case id.DELETE:p(!0),lX({dashboard_click_name:"delete",subpage_name:"dashboard"})}},A=v===t.id&&k,I=w?"xs":"xxs";return(0,l.jsxs)("div",{className:M()("bot-list__item",{"bot-list__item--selected":j===t.id,"bot-list__item--loaded":_,"bot-list__item--min":!!(null==_?void 0:_.length)&&!w}),ref:y,onClick:e=>{e.stopPropagation(),k&&C(!1),x(t.id),S(id.INIT)},children:[(0,l.jsx)("div",{className:"bot-list__item__label",children:(0,l.jsx)("div",{className:"text-wrapper",title:t.name,children:(0,l.jsx)(V.Z,{align:"left",as:"p",size:I,lineHeight:"l",children:t.name})})}),(0,l.jsx)("div",{className:"bot-list__item__time-stamp",children:(0,l.jsx)(V.Z,{align:"left",as:"p",size:I,lineHeight:"l",children:(0,U.timeSince)(t.timestamp)})}),(0,l.jsxs)("div",{className:"bot-list__item__load-type",children:[si(t.save_type,"bot-list__item__load-type__icon--active"),(0,l.jsx)("div",{className:"bot-list__item__load-type__icon--saved",children:(0,l.jsx)(V.Z,{align:"left",as:"p",size:I,lineHeight:"l",children:u(t.save_type)})})]}),w?(0,l.jsx)("div",{className:"bot-list__item__actions",children:ic.map(e=>(0,l.jsx)("div",{className:"bot-list__item__actions__action-item",onClick:t=>{t.stopPropagation(),S(e.type)},children:(0,l.jsx)(q,{alignment:"top",message:e.label,zIndex:"9999",children:e.icon})},e.type))}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"bot-list__item__actions",children:(0,l.jsx)("button",{ref:f,onClick:e=>{e.stopPropagation(),C(!k),b(t.id)},tabIndex:0,children:(0,l.jsx)(io.Z,{height:"20px",width:"20px"})})}),(0,l.jsx)("div",{className:M()("bot-list__item__responsive",{"bot-list__item__responsive--active":A,"bot-list__item__responsive--min":_.length<=5}),children:ic.map(e=>(0,l.jsxs)("div",{className:"bot-list__item__responsive__menu",onClick:t=>{t.stopPropagation(),S(e.type)},children:[(0,l.jsx)("div",{className:"bot-list__item__responsive__menu__icon",children:e.icon}),(0,l.jsx)(V.Z,{color:"prominent",className:"bot-list__item__responsive__menu__item",as:"p",size:"xs",children:e.label})]},e.type))})]})]},t.id)}),iu=[{label:(0,y.NC)("Bot name"),className:"bot-list__header__label"},{label:(0,y.NC)("Last modified"),className:"bot-list__header__time-stamp"},{label:(0,y.NC)("Status"),className:"bot-list__header__load-type"}],ix=(0,r.Pi)(()=>{let{load_modal:e,dashboard:t}=(0,h.oR)(),{setDashboardStrategies:a,dashboard_strategies:s}=e,{setStrategySaveType:n,strategy_save_type:r}=t,{isDesktop:o}=(0,g.F)(),d=i.useRef(!1),c=i.useRef(!1);return(i.useEffect(()=>{n(""),(async()=>{a(await (0,U.getSavedWorkspaces)()),!c.current&&(c.current=!0)})()},[r]),i.useEffect(()=>{!(null==s?void 0:s.length)&&!d.current&&(d.current=!0)},[]),null==s?void 0:s.length)?(0,l.jsxs)("div",{className:"bot-list__container",children:[(0,l.jsxs)("div",{className:"bot-list__wrapper",children:[(0,l.jsx)("div",{className:"bot-list__title",children:(0,l.jsx)(V.Z,{size:o?"s":"xs",weight:"bold",children:(0,l.jsx)(y.Xx,{i18n_default_text:"Your bots:"})})}),(0,l.jsx)("div",{className:"bot-list__header",children:iu.map(e=>{let{label:t,className:a}=e;return(0,l.jsx)("div",{className:a,children:(0,l.jsx)(V.Z,{size:o?"xs":"xxs",weight:"bold",children:t})},t)})}),(0,l.jsx)("div",{className:"bot-list__table",children:s.map(e=>(0,l.jsx)(i_,{workspace:e},e.id))})]}),(0,l.jsx)(ia,{})]}):null}),im=(0,r.Pi)(e=>{let{is_mobile:t,has_dashboard_strategies:a}=e,{dashboard:s,load_modal:n,quick_strategy:r}=(0,h.oR)(),{toggleLoadModal:o,setActiveTabIndex:d}=n,{isDesktop:c}=(0,g.F)(),{onCloseDialog:_,dialog_options:u,is_dialog_open:x,setActiveTab:m,setPreviewOnPopup:p}=s,{setFormVisibility:j}=r,v=()=>{o(),d(t?1:2),m(tK.ve.BOT_BUILDER)},b=()=>{o(),d(t?0:1),m(tK.ve.BOT_BUILDER)},f=[{id:"my-computer",icon:t?(0,l.jsx)(a5.Z,{height:"48px",width:"48px"}):(0,l.jsx)(a7.Z,{height:"48px",width:"48px"}),content:t?(0,l.jsx)(y.Xx,{i18n_default_text:"Local"}):(0,l.jsx)(y.Xx,{i18n_default_text:"My computer"}),callback:()=>{b(),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"load_strategy",load_strategy_tab:"local"})}},{id:"google-drive",icon:(0,l.jsx)(a3.Z,{height:"48px",width:"48px"}),content:(0,l.jsx)(y.Xx,{i18n_default_text:"Google Drive"}),callback:()=>{v(),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"load_strategy",load_strategy_tab:"google drive"})}},{id:"bot-builder",icon:(0,l.jsx)(l2.Z,{height:"48px",width:"48px"}),content:(0,l.jsx)(y.Xx,{i18n_default_text:"Bot builder"}),callback:()=>{m(tK.ve.BOT_BUILDER),lX({dashboard_click_name:"bot_builder",subpage_name:"bot_builder"})}},{id:"quick-strategy",icon:(0,l.jsx)(l4.Z,{height:"48px",width:"48px"}),content:(0,l.jsx)(y.Xx,{i18n_default_text:"Quick strategy"}),callback:()=>{m(tK.ve.BOT_BUILDER),j(!0),(0,tQ.m5)({subpage_name:"bot_builder",subform_source:"dashboard",subform_name:"quick_strategy"})}}];return i.useMemo(()=>(0,l.jsxs)("div",{className:M()("tab__dashboard__table",{"tab__dashboard__table--minimized":a&&t}),children:[(0,l.jsxs)("div",{className:M()("tab__dashboard__table__tiles",{"tab__dashboard__table__tiles--minimized":a&&t}),id:"tab__dashboard__table__tiles",children:[f.map(e=>{let{icon:s,content:n,callback:i,id:r}=e;return(0,l.jsxs)("div",{className:M()("tab__dashboard__table__block",{"tab__dashboard__table__block--minimized":a&&t}),children:[(0,l.jsx)("div",{className:M()("tab__dashboard__table__images",{"tab__dashboard__table__images--minimized":a}),width:"8rem",height:"8rem",icon:s,id:r,onClick:()=>{i()},children:s}),(0,l.jsx)(V.Z,{color:"prominent",size:t?"xxs":"xs",children:n})]},r)}),c?(0,l.jsx)(ay,{is_modal_open:x,className:"load-strategy__wrapper",header:(0,y.NC)("Load strategy"),onClickClose:()=>{p(!1),_()},height_offset:"80px",page_overlay:!0,children:(0,l.jsx)("div",{label:"Google Drive",className:"google-drive-label",children:(0,l.jsx)(a8,{})})}):(0,l.jsx)(aq.Z,{title:u.title,is_visible:x,onCancel:_,is_mobile_full_width:!0,className:"dc-dialog__wrapper--google-drive",has_close_icon:!0,children:(0,l.jsx)(a8,{})})]}),(0,l.jsx)(ix,{})]}),[x,a])}),ih=()=>[{label:(0,y.NC)("Welcome to Deriv Bot!"),content:[{data:(0,y.NC)("Ready to automate your trading strategy without writing any code? Youve come to the right place.")},{data:(0,y.NC)("Check out these guides and FAQs to learn more about building your bot:")}],link:!1},{label:(0,y.NC)("Guide"),content:[{data:(0,y.NC)("Deriv Bot - your automated trading partner")}],link:!0},{label:(0,y.NC)("FAQs"),content:[{data:(0,y.NC)("What is Deriv Bot?"),faq_id:"faq-0"},{data:(0,y.NC)("Where do I find the blocks I need?"),faq_id:"faq-1"},{data:(0,y.NC)("How do I remove blocks from the workspace?"),faq_id:"faq-2"}],link:!0}],ip=(0,r.Pi)(()=>{let{isDesktop:e}=(0,g.F)(),{dashboard:t}=(0,h.oR)(),a=p(),[s,n]=i.useState(!1),{active_tour:r,is_info_panel_visible:o,setActiveTab:d,setActiveTabTutorial:c,setInfoPanelVisibility:_,setFaqTitle:u}=t,x=(e,t,a)=>{let s=e?d(tK.ve.TUTORIAL):null,n="Guide"===t?c(0):c(1);return u(a),{tutorial_link:s,tutorial_label:n}},m=()=>{_(!1),n(!1),localStorage.setItem("dbot_should_show_info",JSON.stringify(Date.now()))};i.useEffect(()=>{a?n(!1):o?n(!0):n(!1)},[a,o]);let j=()=>(0,l.jsxs)("div",{className:"db-info-panel",children:[(0,l.jsx)("div",{"data-testid":"close-icon",className:"db-info-panel__close-action",onClick:m,children:(0,l.jsx)(w.Z,{height:"18px",width:"18px",fill:"var(--text-prominent)"})}),ih().map(t=>{let{label:a,content:s,link:n}=t;return(0,l.jsxs)("div",{children:[(0,l.jsx)(V.Z,{color:"prominent",lineHeight:"xxl",size:e?"m":"s",weight:"bold",as:"h1",children:a}),s.map(t=>(0,l.jsx)(V.Z,{className:M()("db-info-panel__card",{"db-info-panel__content":n}),color:"prominent",lineHeight:"xl",as:"p",onClick:()=>x(n,a,t.faq_id),size:e?"s":"xxs",children:t.data},`info-panel-tour${t.data}`))]},`${a}-${s}`)})]});return e?!r&&(0,l.jsx)("div",{className:M()("tab__dashboard__info-panel",{"tab__dashboard__info-panel--active":o}),children:j()}):(0,l.jsx)(f.Z,{className:"statistics__modal statistics__modal--mobile",is_open:s,toggleModal:m,width:"440px",children:(0,l.jsx)(f.Z.Body,{children:j()})})}),ij=(0,r.Pi)(e=>{let{handleTabChange:t}=e,{load_modal:a,dashboard:s}=(0,h.oR)(),{dashboard_strategies:n}=a,{active_tab:r,active_tour:o}=s,d=!!(null==n?void 0:n.length),{isDesktop:c,isTablet:_}=(0,g.F)();return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:M()("tab__dashboard",{"tab__dashboard--tour-active":o}),children:(0,l.jsxs)("div",{className:"tab__dashboard__content",children:[(0,l.jsx)(l7,{is_mobile:!c,is_tablet:_,handleTabChange:t}),(0,l.jsxs)("div",{className:"quick-panel",children:[(0,l.jsxs)("div",{className:M()("tab__dashboard__header",{"tab__dashboard__header--listed":c&&d}),children:[!d&&(0,l.jsx)(V.Z,{className:"title",as:"h2",color:"prominent",size:c?"sm":"s",lineHeight:"xxl",weight:"bold",children:(0,y.NC)("Load or build your bot")}),(0,l.jsx)(V.Z,{as:"p",color:"prominent",lineHeight:"s",size:c?"s":"xxs",className:M()("subtitle",{"subtitle__has-list":d}),children:(0,y.NC)("Import a bot from your computer or Google Drive, build it from scratch, or start with a quick strategy.")})]}),(0,l.jsx)(im,{has_dashboard_strategies:d,is_mobile:!c})]})]})}),(0,l.jsx)(ip,{}),0===r&&(0,l.jsx)(lz,{is_mobile:!c})]})}),iv=()=>(0,l.jsx)("div",{className:"toolbar__section","data-testid":"dt_run_strategy",children:(0,l.jsx)(t5,{className:"toolbar__animation"})}),ib=(0,i.lazy)(()=>Promise.resolve().then(a.bind(a,68217))),iy=(0,i.lazy)(()=>a.e("31").then(a.bind(a,94335))),ig=(0,r.Pi)(()=>{var e,t;let{connectionStatus:a}=(0,m.T)(),{dashboard:s,load_modal:n,run_panel:r,quick_strategy:o,summary_card:d}=(0,h.oR)(),{active_tab:c,active_tour:u,is_chart_modal_visible:x,is_trading_view_modal_visible:p,setActiveTab:j,setWebSocketState:v,setActiveTour:b,setTourDialogVisibility:f}=s,{onEntered:N,dashboard_strategies:C}=n,{is_dialog_open:k,is_drawer_open:w,dialog_options:T,onCancelButtonClick:E,onCloseDialog:S,onOkButtonClick:A,stopBot:I}=r,{is_open:R}=o,{cancel_button_text:O,ok_button_text:L,title:D,message:Z}=T,{clear:z}=d,{DASHBOARD:P,BOT_BUILDER:B}=tK.ve,X=i.useRef(!0),$=["dashboard","bot_builder","chart","tutorial"],{isDesktop:H}=(0,g.F)(),V=(0,lT.TH)(),q=(0,lT.s0)(),G=c;let Y=(e=c,(G=null===(t=V.hash)||void 0===t?void 0:t.split("#")[1])?Number($.indexOf(String(G))):e);i.useEffect(()=>{a!==aS.cR.OPENED&&null!==document.getElementById("db-animation__stop-button")&&(z(),I(),U.api_base.setIsRunning(!1),v(!1))},[z,a,v,I]),i.useEffect(()=>{R&&f(!1),X.current?(j(Number(Y)),!H&&K(Number(Y)),X.current=!1):q(`#${$[c]||$[0]}`),""!==u&&b("")},[c]),i.useEffect(()=>{let e=setTimeout(()=>{var e,t,a,s,n;if(c===B&&(null===(t=Blockly)||void 0===t?void 0:null===(e=t.derivWorkspace)||void 0===e?void 0:e.trashcan)){let e;let t=window.innerHeight-250;e=w?(0,F.rK)()?380:window.innerWidth-460:(0,F.rK)()?20:window.innerWidth-100,null===(n=Blockly)||void 0===n||null===(s=n.derivWorkspace)||void 0===s||null===(a=s.trashcan)||void 0===a||a.setTrashcanPosition(e,t)}},100);return()=>{clearTimeout(e)}},[c,w]),(0,i.useEffect)(()=>{let e;return C.length>0&&(e=setTimeout(()=>{(0,U.updateWorkspaceName)()})),()=>{e&&clearTimeout(e)}},[C,c]);let K=i.useCallback(e=>{j(e);let t=tK.FK[e];if(t){let e=document.getElementById(t);setTimeout(()=>{null==e||e.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})},10)}},[c]);return(0,l.jsxs)(i.Fragment,{children:[(0,l.jsx)("div",{className:"main",children:(0,l.jsx)("div",{className:M()("main__container",{"main__container--active":u&&c===P&&!H}),children:(0,l.jsxs)(lE.Z,{active_index:c,className:"main__tabs",onTabItemChange:N,onTabItemClick:K,top:!0,children:[(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lI.Z,{height:"24px",width:"24px",fill:"var(--text-general)"}),(0,l.jsx)(y.Xx,{i18n_default_text:"Dashboard"})]}),id:"id-dbot-dashboard",children:(0,l.jsx)(ij,{handleTabChange:K})}),(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lR.Z,{height:"24px",width:"24px",fill:"var(--text-general)"}),(0,l.jsx)(y.Xx,{i18n_default_text:"Bot Builder"})]}),id:"id-bot-builder"}),(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(lO.Z,{height:"24px",width:"24px",fill:"var(--text-general)"}),(0,l.jsx)(y.Xx,{i18n_default_text:"Charts"})]}),id:x||p?"id-charts--disabled":"id-charts",children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(_.Z,{message:(0,y.NC)("Please wait, loading chart...")}),children:(0,l.jsx)(ib,{show_digits_stats:!1})})}),(0,l.jsx)("div",{label:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s0.Z,{height:"16px",width:"16px",fill:"var(--text-general)",className:"icon-general-fill-g-path"}),(0,l.jsx)(y.Xx,{i18n_default_text:"Tutorials"})]}),id:"id-tutorials",children:(0,l.jsx)("div",{className:"tutorials-wrapper",children:(0,l.jsx)(i.Suspense,{fallback:(0,l.jsx)(_.Z,{message:(0,y.NC)("Please wait, loading tutorials...")}),children:(0,l.jsx)(iy,{handleTabChange:K})})})})]})})}),(0,l.jsxs)(ts.Z,{children:[(0,l.jsxs)("div",{className:"main__run-strategy-wrapper",children:[(0,l.jsx)(iv,{}),(0,l.jsx)(ab,{})]}),(0,l.jsx)(lD,{}),(0,l.jsx)(lA,{})]}),(0,l.jsx)(eK.Z,{children:!R&&(0,l.jsx)(ab,{})}),(0,l.jsx)(aq.Z,{cancel_button_text:O||(0,y.NC)("Cancel"),className:"dc-dialog__wrapper--fixed",confirm_button_text:L||(0,y.NC)("Ok"),has_close_icon:!0,is_mobile_full_width:!1,is_visible:k,onCancel:E,onClose:S,onConfirm:A||S,portal_element_id:"modal_root",title:D,children:Z})]})});window.globalObserver=t8.P,window.loadDbot=U.load,window.getLoginId=aE.Ke,window.loginUrl=u.x4w;let iN=()=>{let e=(0,m.T)();return e.authData&&t8.P.emit("acc.init",{balance:e.authData.balance,currency:e.authData.currency}),(0,l.jsx)(l.Fragment,{})},iC=(0,r.Pi)(()=>{var e;let[t,s]=i.useState(!1),[n,r]=i.useState(!0),o=(0,h.oR)(),{app:d,transactions:x,common:p,client:j}=o,{showDigitalOptionsMaltainvestError:v}=d,{recovered_transactions:b,recoverPendingContracts:g}=x,f=i.useRef(!1),C=i.useRef(null),{connectionStatus:k}=(0,m.T)(),{initTrackJS:w}=az();w(j.loginid),aU((0,aE.PO)()??null),(0,i.useEffect)(()=>{k===aS.cR.OPENED?(s(!0),p.setSocketOpened(!0)):k!==aS.cR.OPENED&&p.setSocketOpened(!1)},[p,k]);let{current_language:T}=p,E=document.documentElement;i.useEffect(()=>{null==E||E.setAttribute("lang",T.toLowerCase()),null==E||E.setAttribute("dir","ar"===T.toLowerCase()?"rtl":"ltr")},[T,E]);let S=i.useCallback(e=>{let{data:t}=e;if((null==t?void 0:t.msg_type)==="proposal_open_contract"&&!(null==t?void 0:t.error)){let{proposal_open_contract:e}=t;(null==e?void 0:e.status)!=="open"&&!(null==b?void 0:b.includes(null==e?void 0:e.contract_id))&&g(e)}},[b,g]);i.useEffect(()=>{(0,a$.setSmartChartsPublicPath)((0,u.MT8)("/js/smartcharts/"))},[]),i.useEffect(()=>{if(!f.current&&j.is_logged_in&&t&&(null===U.api_base||void 0===U.api_base?void 0:U.api_base.api)){var e;f.current=!0,C.current=null===(e=U.api_base.api.onMessage())||void 0===e?void 0:e.subscribe(S)}return()=>{if(f.current&&C.current){var e,t;f.current=!1,null===(e=(t=C.current).unsubscribe)||void 0===e||e.call(t)}}},[t,j.is_logged_in,j.loginid,S,k]),i.useEffect(()=>{v(j,p)},[j.is_options_blocked,null===(e=j.account_settings)||void 0===e?void 0:e.country_code,j.clients_country]);let A=()=>{U.ServerTime.init(p),d.setDBotEngineStores(),U.ApiHelpers.setInstance(d.api_helpers_store),Promise.resolve().then(a.bind(a,18908)).then(e=>{let{default:t}=e;t.init(o)})},I=()=>{var e;A();let t=()=>{let{active_symbols:e}=U.ApiHelpers.instance;e.retrieveActiveSymbols(!0).then(()=>{r(!1)})};if(null===U.ApiHelpers||void 0===U.ApiHelpers?void 0:null===(e=U.ApiHelpers.instance)||void 0===e?void 0:e.active_symbols)t();else{let e=setInterval(()=>{var a;(null===U.ApiHelpers||void 0===U.ApiHelpers?void 0:null===(a=U.ApiHelpers.instance)||void 0===a?void 0:a.active_symbols)&&(clearInterval(e),t())},1e3)}};return(i.useEffect(()=>{t&&(A(),r(!0),!j.is_logged_in&&I())},[t]),i.useEffect(()=>{j.is_logged_in&&j.is_landing_company_loaded&&t&&I()},[j.is_landing_company_loaded,t,j.loginid]),(0,i.useEffect)(()=>{aP(!0),j&&aX(j)},[]),null==p?void 0:p.error)?null:n?(0,l.jsx)(_.Z,{message:(0,y.NC)("Initializing your account...")}):(0,l.jsxs)(c,{children:[(0,l.jsx)(aV,{}),(0,l.jsxs)("div",{className:"bot-dashboard bot","data-testid":"dt_bot_dashboard",children:[(0,l.jsx)(aH,{}),(0,l.jsx)(ig,{}),(0,l.jsx)(lw,{}),(0,l.jsx)(aG,{}),(0,l.jsx)(aT,{}),(0,l.jsx)(N,{})]}),(0,l.jsx)(iN,{})]})})},45927:function(e,t,a){a.d(t,{Z:function(){return i}});var s=a(85893),n=a(63387),l=a.n(n);let i=e=>{let{message:t,className:a,type:n}=e;return(0,s.jsx)("div",{className:l()("dc-field",a,{"dc-field--error":"error"===n,"dc-field--warn":"warn"===n}),children:t})}},62873:function(e,t,a){a.d(t,{Z:function(){return n}});var s=a(46883);a(56803);let n=s.Z},46883:function(e,t,a){a.d(t,{Z:()=>u});var s=a("85893"),n=a("67294"),l=a("63387"),i=a.n(l);let r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>void 0,t=n.useRef(!1);!t.current&&(e(),t.current=!0)};var o=a("40150"),d=a("89606");let c=e=>{let{className:t,count:a}=e;return(0,s.jsx)("div",{className:i()("dc-counter",t),children:a})},_=e=>{let{active_icon_color:t="",active_tab_ref:a,bottom:l=!1,className:r="",count:o,header_content:_,header_fit_content:u=!1,icon_color:x="",icon_size:m=0,icon:h,id:p="",is_active:j,is_label_hidden:v,is_scrollable:b,label:y,onClick:g,setActiveLineStyle:f,top:N}=e;n.useEffect(()=>{f()},[o,y,_,f]);let C=i()("dc-tabs__item",{"dc-tabs__active":j,[`dc-tabs__active--${r}`]:r&&j,"dc-tabs__item--top":N,"dc-tabs__item--bottom":l,"dc-tabs__item--header-fit-content":u,"dc-tabs__item--is-hidden":v,[`dc-tabs__item--${r}`]:r,"dc-tabs__item--is-scrollable-and-active":b&&j}),k=j?t:x;return(0,s.jsxs)("li",{id:p,className:C,style:{color:k},onClick:g,ref:a,children:[h&&(0,s.jsx)(d.J,{icon:h,size:m,custom_color:k,className:"dc-tabs__item__icon"}),_||y,!!o&&(0,s.jsx)(c,{className:"dc-tabs__item__counter",count:o})]})};a("56803");let u=e=>{let t,{active_icon_color:a="",active_index:l=0,background_color:d="",bottom:c=!1,center:u=!1,children:x,className:m="",fit_content:h=!1,has_active_line:p=!0,has_bottom_line:j=!0,header_fit_content:v=!1,history:b,icon_color:y="",icon_size:g=0,is_100vw:f=!1,is_full_width:N=!1,is_overflow_hidden:C=!1,is_scrollable:k=!1,onTabItemClick:w,should_update_hash:T=!1,single_tab_has_no_label:E=!1,top:S}=e,[A,I]=n.useState({}),R=n.useRef(null),O=n.useRef(null),M=e=>{b.replace(`${b.location.pathname}${window.location.search}#${e}`)},L=n.useCallback(()=>{var e,t;let a=null==O?void 0:null===(e=O.current)||void 0===e?void 0:e.getBoundingClientRect(),s=null==R?void 0:null===(t=R.current)||void 0===t?void 0:t.getBoundingClientRect();a&&s?I({left:s.left-a.left,width:s.width}):setTimeout(()=>{L()},500)},[]),D=0;r(()=>{if(D=l,T){let t=location.hash.slice(1),a=x.findIndex(e=>e&&e.props&&e.props.hash===t);if(a>-1)D=a;else{var e;let t=null===(e=x[D])||void 0===e?void 0:e.props,a=t&&t.hash;a&&M(a)}}L()});let[U,F]=n.useState(D);n.useEffect(()=>{U>=0&&l!==U&&(null==w||w(U)),L()},[U,L]),n.useEffect(()=>{l>=0&&l!==U&&F(l)},[l]);let Z=e=>{if(T){var t;M(null===(t=x[e])||void 0===t?void 0:t.props["data-hash"])}F(e),L()},z=x.filter(e=>e);return t=k?"unset":h?"150px":`${(100/z.length).toFixed(2)}%`,(0,s.jsxs)("div",{className:i()("dc-tabs",{[`dc-tabs--${m}`]:m,"dc-tabs--top":S,"dc-tabs--100vw":f}),style:{"--tab-width":`${t}`,background:d},children:[(0,s.jsx)("div",{className:i()({[`dc-tabs__list--header--${m}`]:m}),children:(0,s.jsx)("ul",{className:i()("dc-tabs__list",{"dc-tabs__list--top":S,"dc-tabs__list--border-bottom":j,"dc-tabs__list--bottom":c,"dc-tabs__list--center":u,"dc-tabs__list--header-fit-content":v,"dc-tabs__list--full-width":N,[`dc-tabs__list--${m}`]:m,"dc-tabs__list--overflow-hidden":C}),ref:O,children:(0,s.jsxs)(o.Z,{className:"dc-themed-scrollbars-wrapper",is_only_horizontal:!0,is_scrollbar_hidden:!0,is_bypassed:!k,children:[n.Children.map(x,(e,t)=>{if(!e)return null;let{icon:n,label:l,id:i}=e.props,r=e.props["data-header-content"],o=e.props["data-count"];return(0,s.jsx)(_,{active_icon_color:a,className:m,count:o,icon:n,icon_color:y,icon_size:g,is_active:t===U,is_label_hidden:1===x.length&&E,label:l,id:i,is_scrollable:k,top:S,bottom:c,header_fit_content:v,active_tab_ref:t===U?R:null,header_content:r,onClick:()=>Z(t),setActiveLineStyle:L},l)}),p&&!k&&(0,s.jsx)("span",{className:i()("dc-tabs__active-line",{"dc-tabs__active-line--top":S,"dc-tabs__active-line--bottom":c,"dc-tabs__active-line--fit-content":h,"dc-tabs__active-line--header-fit-content":v,"dc-tabs__active-line--is-hidden":1===x.length&&E}),style:A})]})})}),(0,s.jsx)("div",{className:i()("dc-tabs__content",{[`dc-tabs__content--${m}`]:m}),children:n.Children.map(x,(e,t)=>{if(!e)return null;if(t===U)return e.props.children})})]})}},17009:function(e,t,a){a.d(t,{Z:()=>b});var s=a("85893"),n=a("67294"),l=a("96877"),i=a("33996"),r=a("85414"),o=a("2502"),d=a("63387"),c=a.n(d),_=a("45452"),u=a("83533"),x=a("19405");let m=e=>{let{content_data:t,expanded:a=!1,test_id:l="dbot-acc-id",is_cursive:r=!1,no_collapsible:o=!0,has_subtitle:d=!0,font_size:m,...h}=e,[p,j]=(0,n.useState)(a),{quick_strategy:{selected_strategy:v}}=(0,i.oR)();if(!t)return null;let{content:b,header:y}=t,{expanded_subtitles_storage:g,setExpandedSubtitlesStorage:f}=h,N=`${y}__${v}`.split(" ").join("_").toLocaleLowerCase(),C=!!g&&g[N]||p||!d;return(0,s.jsxs)("div",{className:"dbot-accordion",children:[d&&(0,s.jsxs)("button",{className:c()("dbot-accordion__navbar",{"dbot-accordion__navbar--no-event":!o}),"data-testid":l,onClick:e=>{e.preventDefault(),j(!C),g&&f&&f({...g,[N]:!C})},children:[(0,s.jsx)("div",{className:c()("dbot-accordion__header",{"dbot-accordion__header--cursive":r}),children:(0,s.jsx)(_.Z,{as:"span",size:m,weight:"bold",children:y})}),o&&(0,s.jsx)("div",{className:"dbot-accordion__icon",children:C?(0,s.jsx)(u.Z,{}):(0,s.jsx)(x.Z,{})})]}),(0,s.jsx)("div",{className:c()("dbot-accordion__content",{"dbot-accordion__content--open":C}),"data-testid":"accordion-content",children:(0,s.jsx)(_.Z,{as:"span",lineHeight:"s",size:m,children:b})})]})};var h=a("48118");let p=(0,l.Pi)(e=>{var t,a;let{item:n,font_size:l}=e,{ui:r}=(0,i.oR)(),{is_dark_mode_on:o}=r,d=(null==n?void 0:n.className)??"";switch(n.type){case"text":{let e=c()(`qs__description__content ${d}`);return(0,s.jsx)(s.Fragment,{children:null==n?void 0:null===(t=n.content)||void 0===t?void 0:t.map(t=>(0,s.jsx)("div",{className:e,children:(0,s.jsx)(_.Z,{size:l,children:(0,h.ZP)(t)})},t))})}case"text_italic":{let e=c()(`qs__description__content italic ${d}`);return(0,s.jsx)(s.Fragment,{children:null==n?void 0:null===(a=n.content)||void 0===a?void 0:a.map(t=>(0,s.jsx)("div",{className:e,children:(0,s.jsx)(_.Z,{size:l,children:(0,h.ZP)(t)})},t))})}case"media":{let e=c()(`qs__description__image ${d}`);return(0,s.jsx)("div",{className:e,style:null==n?void 0:n.styles,children:(0,s.jsx)("img",{src:o?n.dark_src??n.src:n.src,alt:n.alt})})}default:return null}}),j=e=>{let{item:t,font_size:a}=e,l=Array.isArray(t)?t:t.slice(1);return(0,s.jsx)(s.Fragment,{children:Array.isArray(l)&&(null==l?void 0:l.map(e=>(0,s.jsx)(n.Fragment,{children:(0,s.jsx)(p,{item:e,font_size:a})},e.id)))})},v=(0,l.Pi)(e=>{let{tutorial_selected_strategy:t,grouped_objects_by_title:a,expanded_subtitles_storage:l,setExpandedSubtitlesStorage:i}=e,{isDesktop:r}=(0,o.F)(),d=t?"s":"xs",c=n.useMemo(()=>r?d:"xs",[r,d]);return(0,s.jsx)(s.Fragment,{children:Array.isArray(a)&&a.map(e=>{var t,a,n,r;let o=(null==e?void 0:null===(a=e[0])||void 0===a?void 0:null===(t=a.content)||void 0===t?void 0:t[0])??"";return(0,s.jsx)(m,{content_data:{header:o,content:(0,s.jsx)(j,{item:e,font_size:c})},expanded:!!(null===(n=e[0])||void 0===n?void 0:n.expanded),is_cursive:!1,no_collapsible:null===(r=e[0])||void 0===r?void 0:r.no_collapsible,has_subtitle:!!o,expanded_subtitles_storage:l,setExpandedSubtitlesStorage:i,font_size:c},`accordion-${o}`)})})}),b=(0,l.Pi)(e=>{var t;let{formfields:a,active_tab:l,tutorial_selected_strategy:o}=e,{quick_strategy:d}=(0,i.oR)(),{selected_strategy:c}=d,_={},[u,x]=(0,n.useState)(_),m=(0,r.j)()[o||c];let h=Array.isArray(null==m?void 0:m.description)?null==m?void 0:null===(t=m.description)||void 0===t?void 0:t.reduce((e,t,a)=>{if("subtitle_italic"===t.type||"subtitle"===t.type){let a,s;e.push([]);_[a=t,s=c,`${a.content[0]}__${s}`.split(" ").join("_").toLowerCase()]=(null==t?void 0:t.expanded)??!1}return e[e.length-1].push({...t,id:a}),e},[]):[{type:"text",content:[null==m?void 0:m.description]}];return(0,s.jsx)(s.Fragment,{children:"TRADE_PARAMETERS"===l?(0,s.jsx)("div",{className:"qs__body__content__form",children:a}):(0,s.jsx)("div",{className:"qs__body__content__description",children:(0,s.jsx)(v,{tutorial_selected_strategy:o,grouped_objects_by_title:h,expanded_subtitles_storage:u,setExpandedSubtitlesStorage:x})})})})},68217:function(e,t,a){a.r(t),a.d(t,{default:()=>p});var s=a("85893"),n=a("67294"),l=a("96877"),i=a("57357"),r=a("33996"),o=a("63387"),d=a.n(o),c=a("49243"),_=a("47494"),u=a("2502");let x=(0,n.memo)(e=>{let{updateChartType:t,updateGranularity:a,position:n,isDesktop:l}=e;return(0,s.jsxs)(_.ToolbarWidget,{position:n,children:[(0,s.jsx)(_.ChartMode,{portalNodeId:"modal_root",onChartType:t,onGranularity:a}),l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(_.StudyLegend,{portalNodeId:"modal_root",searchInputClassName:"data-hj-whitelist"}),(0,s.jsx)(_.Views,{portalNodeId:"modal_root",onChartType:t,onGranularity:a,searchInputClassName:"data-hj-whitelist"}),(0,s.jsx)(_.DrawTools,{portalNodeId:"modal_root"}),(0,s.jsx)(_.Share,{portalNodeId:"modal_root"})]})]})});a("22798");let m={},h=(0,l.Pi)(e=>{let{show_digits_stats:t}=e,{common:a,ui:l}=(0,r.oR)(),{chart_store:i,run_panel:o,dashboard:h}=(0,r.oR)(),{chart_type:p,getMarketsOrder:j,granularity:v,onSymbolChange:b,setChartStatus:y,symbol:g,updateChartType:f,updateGranularity:N,updateSymbol:C,setChartSubscriptionId:k,chart_subscription_id:w}=i,T=(0,n.useRef)(w),{isDesktop:E,isMobile:S}=(0,u.F)(),{is_drawer_open:A}=o,{is_chart_modal_visible:I}=h,R={assetInformation:!1,countdown:!0,isHighestLowestMarkerEnabled:!1,language:a.current_language.toLowerCase(),position:l.is_chart_layout_default?"bottom":"left",theme:l.is_dark_mode_on?"dark":"light"};(0,n.useEffect)(()=>()=>{c.Z.api.forgetAll("ticks")},[]),(0,n.useEffect)(()=>{T.current=w},[w]),(0,n.useEffect)(()=>{!g&&C()},[g,C]);let O=e=>{e&&c.Z.api.forget(e)},M=async(e,t)=>{var a,s,n;try{O(T.current);let s=await c.Z.api.send(e);k(null==s?void 0:s.subscription.id),s&&t(s),1===e.subscribe&&(m[null==s?void 0:s.subscription.id]=null===(a=c.Z.api.onMessage())||void 0===a?void 0:a.subscribe(e=>{let{data:a}=e;t(a)}))}catch(e){(null==e?void 0:null===(s=e.error)||void 0===s?void 0:s.code)==="MarketIsClosed"&&t([]),console.log(null==e?void 0:null===(n=e.error)||void 0===n?void 0:n.message)}};if(!g)return null;let L=!!(null===c.Z||void 0===c.Z?void 0:c.Z.api);return(0,s.jsx)("div",{className:d()("dashboard__chart-wrapper",{"dashboard__chart-wrapper--expanded":A&&E,"dashboard__chart-wrapper--modal":I&&E}),dir:"ltr",children:(0,s.jsx)(_.SmartChart,{id:"dbot",barriers:[],showLastDigitStats:t,chartControlsWidgets:null,enabledChartFooter:!1,chartStatusListener:e=>y(!e),toolbarWidget:()=>(0,s.jsx)(x,{updateChartType:f,updateGranularity:N,position:E?"top":"bottom",isDesktop:E}),chartType:p,isMobile:S,enabledNavigationWidget:E,granularity:v,requestAPI:e=>c.Z.api.send(e),requestForget:()=>{},requestForgetStream:()=>{},requestSubscribe:M,settings:R,symbol:g,topWidgets:()=>(0,s.jsx)(_.ChartTitle,{onChange:b}),isConnectionOpened:L,getMarketsOrder:j,isLive:!0,leftMargin:80})})}),p=(0,l.Pi)(e=>{let{prefix:t="chart",show_digits_stats:a}=e,{client:l}=(0,r.oR)(),[o]=(0,n.useState)((0,i.Z)()),d=l.loginid?`${t}-${l.loginid}`:`${t}-${o}`;return(0,s.jsx)(h,{show_digits_stats:a},d)})}}]);