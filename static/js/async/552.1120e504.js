"use strict";(self.webpackChunkbot=self.webpackChunkbot||[]).push([["552"],{25282:function(e,t,r){r.r(t),r.d(t,{default:()=>m});var n=r("85893"),o=r("67294"),i=r("67026"),c=r("92198"),a=r("89250"),s=r("88199"),u=r("74748"),l=r("2502"),d=r("66499"),f=r("66175"),p=r("33996");let y=e=>{let{children:t}=e,r=localStorage.getItem("theme")??"light",{ui:i}=(0,p.oR)()??{ui:{setDevice:()=>{}}},{setDevice:c}=i,{isDesktop:a,isMobile:s,isTablet:u}=(0,l.F)();return(0,o.useEffect)(()=>{let e=document.querySelector("body");e&&("light"===r?(e.classList.remove("theme--dark"),e.classList.add("theme--light")):(e.classList.remove("theme--light"),e.classList.add("theme--dark")))},[r]),(0,o.useEffect)(()=>{s?c("mobile"):u?c("tablet"):c("desktop")},[a,s,u,c]),(0,n.jsx)("div",{className:"main-body",children:t})},m=()=>{var e;let t;let{isDesktop:r}=(0,l.F)(),p="/callback"===window.location.pathname,m="true"===c.Z.get("logged_state"),h=window.location.pathname.includes("endpoint"),b=JSON.parse(localStorage.getItem("clientAccounts")??"{}"),g=new URLSearchParams(window.location.search),w=g.get("account")??"",v=JSON.parse(localStorage.getItem("accountsList")??"{}"),_=Object.keys(v).length>0,j=Object.values(b).some(e=>e.currency===w)||"demo"===w||""===w,[S,L]=(0,o.useState)(j);(0,o.useEffect)(()=>(window.setClientHasCurrency=L,()=>{delete window.setClientHasCurrency}),[]);let O=[...f.g$d,...f.bs3],x=null===(e=g.get("account")??"")||void 0===e?void 0:e.toUpperCase(),k=O.includes(x),E=[],C=e=>{let{data:r}=e;if("authorize"===r.msg_type){var n;let e=((null==r?void 0:null===(n=r.authorize)||void 0===n?void 0:n.account_list)||[]).filter(e=>0===e.is_disabled);E.push(e||[]);let o=new Set(Object.values(b).map(e=>e.currency)),i=E.flat(),c="",a=i.some(e=>o.has(e.currency)?(e.currency,!1):(console.log("Missing currency:",e.currency),sessionStorage.setItem("query_param_currency",e.currency),!0)),s=!1,u="";for(let t of e)if(t.loginid&&!v[t.loginid]){s=!0,(u=t.currency||"")&&sessionStorage.setItem("query_param_currency",u);break}if(a||s)L(!1);else{let t=(null==e?void 0:e.find(e=>e.currency===w))||(null==e?void 0:e[0]),r=sessionStorage.getItem("query_param_currency")||(null==t?void 0:t.currency)||"USD";r=`account=${r}`,L(!0),new URLSearchParams(window.location.search).has("account"),L(!0)}t&&(null==t||t.unsubscribe())}};return(0,o.useEffect)(()=>{k&&s.api_base.api&&w&&O.includes(w.toUpperCase())&&(t=s.api_base.api.onMessage().subscribe(C))},[]),(0,o.useEffect)(()=>{w&&sessionStorage.setItem("query_param_currency",w);let e=!h&&!p&&!S;if((0,d.p)()&&m&&!_&&!h&&!p||e){let e=sessionStorage.getItem("query_param_currency")||w||"USD";e&&sessionStorage.setItem("query_param_currency",e);try{(0,u.P6)({redirectCallbackUri:`${window.location.origin}/callback`,...e?{state:{account:e}}:{}}).catch(e=>{console.error(e)})}catch(e){console.error(e)}}},[m,_,h,p,S]),(0,n.jsx)("div",{className:(0,i.Z)("layout",{responsive:r}),children:(0,n.jsx)(y,{children:(0,n.jsx)(a.j3,{})})})}},69174:function(e,t,r){r.d(t,{a:function(){return i},c:function(){return n},g:function(){return o}});var n="u">typeof globalThis?globalThis:"u">typeof window?window:"u">typeof global?global:"u">typeof self?self:{};function o(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function i(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var r=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}},2502:function(e,t,r){r.d(t,{F:function(){return o}});var n=r(79166);let o=()=>{let e=(0,n.u)("(min-width: 1280px)"),t=(0,n.u)("(max-width: 600px)"),r=(0,n.u)("(min-width: 601px) and (max-width: 1279px)"),o=(0,n.u)("(min-width: 601px) and (max-width: 1279px) and (orientation: portrait)");return{isDesktop:e,isMobile:t,isTablet:r,isTabletPortrait:o,isMobileOrTabletLandscape:(0,n.u)("(max-width: 1279px) and (orientation: landscape)")}}},79166:function(e,t,r){r.d(t,{a:function(){return l},u:function(){return u}});var n=r(67294),o=r(69174),i="object"==typeof o.c&&o.c&&o.c.Object===Object&&o.c,c="object"==typeof self&&self&&self.Object===Object&&self;i||c||Function("return this")();var a="u">typeof window?n.useLayoutEffect:n.useEffect,s=typeof window>"u";function u(e,{defaultValue:t=!1,initializeWithValue:r=!0}={}){let o=e=>s?t:window.matchMedia(e).matches,[i,c]=(0,n.useState)(()=>r?o(e):t);function l(){c(o(e))}return a(()=>{let t=window.matchMedia(e);return l(),t.addListener?t.addListener(l):t.addEventListener("change",l),()=>{t.removeListener?t.removeListener(l):t.removeEventListener("change",l)}},[e]),i}function l(e,t,r="mousedown",o={}){!function(e,t,r,o){let i=(0,n.useRef)(t);a(()=>{i.current=t},[t]),(0,n.useEffect)(()=>{let t=window;if(!(t&&t.addEventListener))return;let r=e=>{i.current(e)};return t.addEventListener(e,r,o),()=>{t.removeEventListener(e,r,o)}},[e,r,o])}(r,r=>{let n=r.target;n&&n.isConnected&&(Array.isArray(e)?e.filter(e=>!!e.current).every(e=>e.current&&!e.current.contains(n)):e.current&&!e.current.contains(n))&&t(r)},void 0,o)}},67026:function(e,t,r){r.d(t,{Z:function(){return n}});let n=function(){for(var e,t,r=0,n="",o=arguments.length;r<o;r++)(e=arguments[r])&&(t=function e(t){var r,n,o="";if("string"==typeof t||"number"==typeof t)o+=t;else if("object"==typeof t){if(Array.isArray(t)){var i=t.length;for(r=0;r<i;r++)t[r]&&(n=e(t[r]))&&(o&&(o+=" "),o+=n)}else for(n in t)t[n]&&(o&&(o+=" "),o+=n)}return o}(e))&&(n&&(n+=" "),n+=t);return n}}}]);